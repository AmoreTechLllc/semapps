import e,{useState as t,useEffect as n,useCallback as r,forwardRef as o}from"react";import{useTranslate as a,useGetList as i,useDataProvider as c,Loading as l,Error as s,usePermissionsOptimized as u,useAuthProvider as m,Button as d,TopToolbar as f,ListButton as p,ShowButton as h,Toolbar as g,SaveButton as v,DeleteButton as y,Edit as b,EditButton as E,Show as w,useNotify as C,useLogin as P,Notification as k,useLogout as O,Resource as j,MenuItemLink as I,useGetIdentity as x,UserMenu as A}from"react-admin";import S from"@material-ui/icons/Share";import{makeStyles as T,TextField as N,List as R,ListItem as U,ListItemAvatar as L,Avatar as W,ListItemText as D,ListItemSecondaryAction as _,IconButton as G,Menu as $,MenuItem as B,ListItemIcon as F,Dialog as M,DialogTitle as V,DialogContent as H,DialogActions as J,Card as z,CardActions as q,Button as K}from"@material-ui/core";import Q from"@material-ui/lab/Autocomplete";import X from"@material-ui/icons/Person";import Y from"@material-ui/icons/Edit";import Z from"@material-ui/icons/Check";import ee from"@material-ui/icons/Public";import te from"@material-ui/icons/VpnLock";import ne from"@material-ui/icons/Group";import{List as re,ListActions as oe}from"@semapps/archipelago-layout";import{ThemeProvider as ae}from"@material-ui/styles";import{makeStyles as ie,createMuiTheme as ce}from"@material-ui/core/styles";import le from"@material-ui/icons/Lock";import se from"@material-ui/core/MenuItem";import ue from"@material-ui/icons/PowerSettingsNew";import me from"@material-ui/icons/AccountCircle";function de(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,c,"next",e)}function c(e){de(a,r,o,i,c,"throw",e)}i(void 0)}))}}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e){this.message=e}Pe.prototype=new Error,Pe.prototype.name="InvalidCharacterError";var ke="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Pe("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,a=0,i="";r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function Oe(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ke(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return ke(t)}}function je(e){this.message=e}function Ie(e,t){if("string"!=typeof e)throw new je("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(Oe(e.split(".")[n]))}catch(e){throw new je("Invalid token specified: "+e.message)}}je.prototype=new Error,je.prototype.name="InvalidTokenError";var xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Ae,Se,Te=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t,n;t=xe,n=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=n():t.urljoin=n()})),Ne=function(e){return e?Array.isArray(e)?e:[e]:void 0},Re=function(e,t){return Te(e,t.replace(e,"_acl/"))},Ue=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},Le=function(e){var t,n,r,o=e.middlewareUri,a=e.httpClient,i=e.checkPermissions,c=e.resources;return{login:function(e){return window.location.href="".concat(o,"auth?redirectUrl=")+encodeURIComponent(window.location.href),Promise.resolve()},logout:function(){var e=new URL(window.location.href);return window.location.href="".concat(o,"auth/logout?redirectUrl=")+encodeURIComponent(e.origin+"/login?logout"),Promise.resolve("/")},checkAuth:function(){return localStorage.getItem("token"),Promise.resolve()},checkError:function(e){return Promise.resolve()},getPermissions:(r=fe(regeneratorRuntime.mark((function e(t){var n,r,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",!0);case 2:return n=c[t]?c[t].containerUri:t,r=Re(o,n),e.next=6,a(r);case 6:return l=e.sent,s=l.json,e.abrupt("return",s["@graph"]);case 9:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),addPermission:(n=fe(regeneratorRuntime.mark((function e(t,n,r,i){var l,s,u,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c[t]?c[t].containerUri:t,u=Re(o,s),pe(l={"@id":"#"+i.replace("acl:",""),"@type":"acl:Authorization"},r,n),pe(l,"acl:accessTo",s),pe(l,"acl:mode",i),m=l,e.next=5,a(u,{method:"PATCH",body:JSON.stringify({"@context":Ue(u),"@graph":[m]})});case 5:case"end":return e.stop()}}),e)}))),function(e,t,r,o){return n.apply(this,arguments)}),removePermission:(t=fe(regeneratorRuntime.mark((function e(t,n,r,i){var l,s,u,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c[t]?c[t].containerUri:t,s=Re(o,l),e.next=4,a(s);case 4:return u=e.sent,m=u.json,d=m["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=Ne(e["acl:mode"]),o=Ne(e[r]);return i&&t.includes(i)&&o&&o.includes(n)&&(o=o.filter((function(e){return e!==n}))),ve(ve({},e),{},pe({},r,o))})),e.next=9,a(s,{method:"PUT",body:JSON.stringify({"@context":Ue(s),"@graph":d})});case 9:case"end":return e.stop()}}),e)}))),function(e,n,r,o){return t.apply(this,arguments)}),getIdentity:function(){var e=localStorage.getItem("token");if(e){var t=Ie(e);return{id:t.webId,fullName:t.name}}}}},We="acl:agentClass",De=["acl:Append","acl:Write","acl:Control"],_e=["acl:Append","acl:Write","acl:Control"],Ge=["acl:Write","acl:Control"],$e=["acl:Control"],Be=(pe(Ae={},"acl:Read","auth.right.resource.read"),pe(Ae,"acl:Append","auth.right.resource.append"),pe(Ae,"acl:Write","auth.right.resource.write"),pe(Ae,"acl:Control","auth.right.resource.control"),Ae),Fe=(pe(Se={},"acl:Read","auth.right.container.read"),pe(Se,"acl:Write","auth.right.container.write"),pe(Se,"acl:Control","auth.right.container.control"),Se),Me=T((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),Ve=function(r){var o=r.agents,c=r.addPermission,l=Me(),s=a(),u=be(t(null),2),m=u[0],d=u[1],f=be(t(""),2),p=f[0],h=f[1],g=be(t([]),2),v=g[0],y=g[1],b=i("Person",{page:1,perPage:100},{field:"pair:label",order:"ASC"},{q:p},{enabled:p.length>0}),E=b.ids,w=b.data;return n((function(){y(E.length>0?Object.values(w):[])}),[E,w]),e.createElement(Q,{classes:{option:l.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:v,noOptionsText:s("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:m,onChange:function(e,t){c(t.id||t["@id"],"acl:agent","acl:Read"),d(null),h(""),y([])},onInputChange:function(e,t){h(t)},renderInput:function(t){return e.createElement(N,he({},t,{label:s("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(t){return e.createElement(R,{dense:!0,className:l.list},e.createElement(U,{button:!0},e.createElement(L,null,e.createElement(W,{src:t.image},e.createElement(X,null))),e.createElement(D,{primary:t["pair:label"]})))}})},He=function(t){var n=t.agent;switch(n.predicate){case We:return"foaf:Agent"===n.id?e.createElement(ee,null):e.createElement(te,null);case"acl:agent":return e.createElement(X,null);case"acl:agentGroup":return e.createElement(ne,null);default:throw new Error("Unknown agent predicate: "+n.predicate)}},Je=T((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),ze=function(r){var o=r.isContainer,i=r.agent,u=r.addPermission,m=r.removePermission,d=Je(),f=a(),p=c(),h=be(e.useState(null),2),g=h[0],v=h[1],y=be(t(),2),b=y[0],E=y[1],w=be(t(!0),2),C=w[0],P=w[1],k=be(t(),2),O=k[0],j=k[1];if(n((function(){"acl:agent"===i.predicate?p.getOne("Person",{id:i.id}).then((function(e){var t=e.data;E(t),P(!1)})).catch((function(e){j(e),P(!1)})):P(!1)}),[i.id,i.predicate]),"acl:agentGroup"===i.predicate)return null;var I=function(){return v(null)},x=o?Fe:Be;return C?e.createElement(l,null):O?e.createElement(s,null):e.createElement(U,{className:d.listItem},e.createElement(L,null,e.createElement(W,{src:null==b?void 0:b.image},e.createElement(He,{agent:i}))),e.createElement(D,{className:d.primaryText,primary:b?b["pair:label"]:f("foaf:Agent"===i.id?"auth.agent.anonymous":"auth.agent.authenticated")}),e.createElement(D,{className:d.secondaryText,primary:i.permissions&&i.permissions.map((function(e){return f(x[e])})).join(", ")}),e.createElement(_,null,e.createElement(G,{onClick:function(e){return v(e.currentTarget)}},e.createElement(Y,null)),e.createElement($,{anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:I},Object.entries(x).map((function(t){var n=be(t,2),r=n[0],o=n[1],a=i.permissions&&i.permissions.includes(r);return e.createElement(B,{key:r,onClick:function(){a?m(i.id,i.predicate,r):u(i.id,i.predicate,r),I()}},e.createElement(F,null,a?e.createElement(Z,null):null),e.createElement(D,{primary:f(o)}))})))))},qe=T((function(e){return{list:{width:"100%",maxWidth:"100%",backgroundColor:e.palette.background.paper}}})),Ke=function(t){var n=t.isContainer,r=t.agents,o=t.addPermission,a=t.removePermission,i=qe();return e.createElement(R,{dense:!0,className:i.list},Object.entries(r).map((function(t){var r=be(t,2),i=r[0],c=r[1];return e.createElement(ze,{key:i,isContainer:n,agent:c,addPermission:o,removePermission:a})})))},Qe=function(e){var o=u(e).permissions,a=m(),i=be(t({}),2),c=i[0],l=i[1];n((function(){var e,t=(pe(e={},"foaf:Agent",{id:"foaf:Agent",predicate:We,permissions:[]}),pe(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:We,permissions:[]}),e),n=function(e,n,r){t[e]?t[e].permissions.push(r):t[e]={id:e,predicate:n,permissions:[r]}};if(o){var r,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=we(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(o);try{var i=function(){var e=r.value;e[We]&&Ne(e[We]).forEach((function(t){return n(t,We,e["acl:mode"])})),e["acl:agent"]&&Ne(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&Ne(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}l(t)}}),[o]);var s=r((function(t,n,r){var o,i=ve({},c);l(ve(ve({},c),{},pe({},t,{id:t,predicate:n,permissions:c[t]?[].concat(Ee(null===(o=c[t])||void 0===o?void 0:o.permissions),[r]):[r]}))),a.addPermission(e,t,n,r).catch((function(e){l(i)}))}),[c,l,e,a]),d=r((function(t,n,r){var o=ve({},c);l(Object.fromEntries(Object.entries(c).map((function(e){var n=be(e,2),o=n[0],a=n[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==r}))),[o,a]})).filter((function(e){var t=be(e,2),n=(t[0],t[1]);return n.predicate===We||n.permissions.length>0})))),a.removePermission(e,t,n,r).catch((function(e){l(o)}))}),[c,l,e,a]);return{agents:c,addPermission:s,removePermission:d}},Xe=T((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Ye=function(t){var n=t.open,r=t.onClose,o=t.resourceId,i=t.isContainer,c=Xe(),l=a(),s=Qe(o),u=s.agents,m=s.addPermission,f=s.removePermission;return e.createElement(M,{fullWidth:!0,open:n,onClose:r},e.createElement(V,{className:c.title},l(i?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),e.createElement(H,{className:c.addForm},e.createElement(Ve,{agents:u,addPermission:m})),e.createElement(H,{className:c.listForm},e.createElement(Ke,{isContainer:i,agents:u,addPermission:m,removePermission:f})),e.createElement(J,{className:c.actions},e.createElement(d,{label:"ra.action.close",variant:"text",onClick:r})))},Ze=function(n){var r=n.record,o=n.resource,a=be(t(!1),2),i=a[0],c=a[1],l=!!o?o:r.id||r["@id"];return e.createElement(e.Fragment,null,e.createElement(d,{label:"auth.action.permissions",onClick:function(){return c(!0)}},e.createElement(S,null)),e.createElement(Ye,{resourceId:l,isContainer:!!o,open:i,onClose:function(){return c(!1)}}))},et=function(t){var n=t.basePath,r=t.className,o=t.data,a=t.hasList,i=t.hasShow,c=t.hasControl,l=ye(t,["basePath","className","data","hasList","hasShow","hasControl"]);return e.createElement(f,he({className:r},l),a&&e.createElement(p,{basePath:n,record:o}),i&&e.createElement(h,{basePath:n,record:o}),o&&c&&e.createElement(Ze,{basePath:n,record:o}))},tt=T((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),nt=function(t){var n=t.hasDelete,r=ye(t,["hasDelete"]),o=tt();return e.createElement(g,he({},r,{className:o.toolbar}),e.createElement(v,null),n&&e.createElement(y,{undoable:!1}))},rt=function(t){var n=u(t.id).permissions;return e.createElement(b,he({actions:e.createElement(et,{hasControl:!!n&&n.some((function(e){return $e.includes(e["acl:mode"])}))})},t,{permissions:n}),e.cloneElement(t.children,{toolbar:e.createElement(nt,{hasDelete:!!n&&n.some((function(e){return Ge.includes(e["acl:mode"])}))})}))},ot=function(t){var n=t.actions,r=t.resource,o=t.hasCreate,a=ye(t,["actions","resource","hasCreate"]),i=u(r).permissions;return e.createElement(re,he({},a,{resource:r,hasCreate:o&&!!i&&i.some((function(e){return De.includes(e["acl:mode"])})),actions:n&&i&&i.some((function(e){return $e.includes(e["acl:mode"])}))?e.cloneElement(n,{bulkActions:e.createElement(Ze,null)}):n}))};ot.defaultProps={actions:e.createElement(oe,null)};var at=function(t){var n=t.basePath,r=t.className,o=t.data,a=t.hasList,i=t.hasEdit,c=t.hasControl,l=ye(t,["basePath","className","data","hasList","hasEdit","hasControl"]);return e.createElement(f,he({className:r},l),a&&e.createElement(p,{basePath:n,record:o}),i&&e.createElement(E,{basePath:n,record:o}),o&&c&&e.createElement(Ze,{basePath:n,record:o}))},it=function(t){var n=u(t.id).permissions;return e.createElement(w,he({actions:e.createElement(at,{hasControl:!!n&&n.some((function(e){return $e.includes(e["acl:mode"])}))})},t,{permissions:n,hasEdit:t.hasEdit&&!!n&&n.some((function(e){return _e.includes(e["acl:mode"])}))}))},ct=ie((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.palette.primary[500]},card:{minWidth:300,marginTop:"6em"},lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.secondary[500]}}})),lt=function(t){var n=t.theme,r=t.history,o=t.location,a=t.buttons,i=t.userResource,c=ct(),l=C(),s=P(),u=new URLSearchParams(o.search);if(u.has("token"))if(localStorage.setItem("token",u.get("token")),u.has("new")&&"true"===u.get("new")){l("Votre compte a été créé, vous pouvez maintenant le compléter","info");var m=Ie(u.get("token")).webId;r.push("/"+i+"/"+encodeURIComponent(m)+"/edit")}else l("Vous êtes maintenant connecté","info"),r.push("/");return u.has("logout")&&(localStorage.removeItem("token"),l("Vous êtes maintenant déconnecté","info"),r.push("/")),e.createElement(ae,{theme:ce(n)},e.createElement("div",{className:c.main},e.createElement(z,{className:c.card},e.createElement("div",{className:c.lockIconAvatar},e.createElement(W,{className:c.lockIcon},e.createElement(le,null))),a&&a.map((function(t){return e.createElement(q,null,e.cloneElement(t,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return s({},"/login")}}))})))),e.createElement(k,null))};lt.defaultProps={buttons:[e.createElement(K,{startIcon:e.createElement(W,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var st=o((function(t,n){var r=O();return e.createElement(se,{onClick:function(){return r()},ref:n},e.createElement(ue,null),"   Se déconnecter")})),ut=function(t){var n=t.name,r=t.create,o=ye(t,["name","create"]),a=u(n).permissions;return e.createElement(j,he({},o,{name:n,create:a&&a.some((function(e){return De.includes(e["acl:mode"])}))?r:void 0}))},mt=o((function(t,n){var r=t.onClick,o=t.webId;return e.createElement(I,{ref:n,to:"/Person/".concat(encodeURIComponent(o),"/show"),primaryText:"Voir mon profil",leftIcon:e.createElement(me,null),onClick:r})})),dt=o((function(t,n){var r=t.onClick,o=t.webId;return e.createElement(I,{ref:n,to:"/Person/".concat(encodeURIComponent(o),"/edit"),primaryText:"Editer mon profil",leftIcon:e.createElement(Y,null),onClick:r})})),ft=o((function(t,n){var r=t.onClick;return e.createElement(I,{ref:n,to:"/login",primaryText:"Se connecter",onClick:r})})),pt=function(t){var n=t.logout,r=ye(t,["logout"]),o=x().identity;return e.createElement(A,r,o&&""!==o.id?[e.createElement(mt,{webId:o.id,key:"view"}),e.createElement(dt,{webId:o.id,key:"edit"}),e.cloneElement(n,{key:"logout"})]:e.createElement(ft,null))},ht={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la resource"},action:{permissions:"Permissions"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connectés"},input:{agent_select:"Ajouter un utilisateur..."}}};export{et as EditActions,rt as EditWithPermissions,ot as ListWithPermissions,lt as LoginPage,st as LogoutButton,Ze as PermissionsButton,ut as ResourceWithPermissions,at as ShowActions,it as ShowWithPermissions,pt as UserMenu,Le as authProvider,ht as frenchMessages};
