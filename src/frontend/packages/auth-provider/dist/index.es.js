import*as e from"react";import t,{useEffect as r,useState as n,useCallback as o,useRef as a,useMemo as i,forwardRef as s}from"react";import{useGetIdentity as c,usePermissions as u,useNotify as l,useRedirect as d,Create as p,CreateActions as f,useTranslate as m,useGetList as h,useDataProvider as v,Loading as g,Error as y,useAuthProvider as w,Button as b,useRecordContext as _,useResourceContext as E,useResourceDefinition as x,usePermissionsOptimized as j,TopToolbar as k,ListButton as O,ShowButton as P,DeleteButton as S,Toolbar as C,SaveButton as A,Edit as I,CreateButton as T,ExportButton as L,List as N,EditButton as U,Show as R,useLogin as z,useLocale as W,Notification as F,useSafeSetState as D,Form as V,TextInput as B,required as M,email as G,Resource as q,UserMenu as Y,Logout as $,useUserMenu as H,useGetPermissions as J}from"react-admin";import{useCreateContainer as K}from"@semapps/semantic-data-provider";import Q from"@mui/icons-material/Share";import{TextField as X,List as Z,ListItem as ee,ListItemAvatar as te,Avatar as re,ListItemText as ne,ListItemSecondaryAction as oe,IconButton as ae,Menu as ie,MenuItem as se,ListItemIcon as ce,Dialog as ue,DialogTitle as le,DialogContent as de,DialogActions as pe,useMediaQuery as fe,DialogContentText as me,Button as he,Card as ve,Typography as ge,CardActions as ye,Box as we,Divider as be,StyledEngineProvider as _e,CardContent as Ee,CircularProgress as xe}from"@mui/material";import je from"@mui/styles/makeStyles";import ke from"@mui/material/Autocomplete";import Oe from"@mui/icons-material/Person";import Pe from"@mui/icons-material/Edit";import Se from"@mui/icons-material/Check";import Ce from"@mui/icons-material/Public";import Ae from"@mui/icons-material/VpnLock";import Ie from"@mui/icons-material/Group";import{styled as Te,ThemeProvider as Le}from"@mui/system";import{useNavigate as Ne,useSearchParams as Ue,useLocation as Re,Link as ze}from"react-router-dom";import{styled as We}from"@mui/material/styles";import Fe from"@mui/icons-material/Lock";import De from"@mui/icons-material/Storage";import{useSignup as Ve}from"@semapps/auth-provider";import Be from"@mui/icons-material/AccountCircle";function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
qe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=b(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),s(g,i,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function He(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$e(a,n,o,i,s,"next",e)}function s(e){$e(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){if(e){if("string"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(e){this.message=e}rt.prototype=new Error,rt.prototype.name="InvalidCharacterError";var nt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new rt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,i="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?i+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function ot(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(nt(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return nt(t)}}function at(e){this.message=e}function it(e,t){if("string"!=typeof e)throw new at("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(ot(e.split(".")[r]))}catch(e){throw new at("Invalid token specified: "+e.message)}}at.prototype=new Error,at.prototype.name="InvalidTokenError";var st="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ct(e,t){return e(t={exports:{}},t.exports),t.exports}var ut,lt,dt=ct((function(e){var t,r;t=st,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(n>0&&(o=o.replace(/^[\/]+/,"")),o=n<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),pt=function(e){return e?Array.isArray(e)?e:[e]:void 0},ft=function(e){var t=new URL(e);return dt(t.origin,"_acl",t.pathname)},mt=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},ht=function(){var e=He(qe().mark((function e(t){var r,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=["username","email","password","domain"],gt=function(e){var t,r,n,o,a,i,s,c,u,l,d,p,f=e.dataProvider,m=e.allowAnonymous,h=void 0===m||m,v=e.localAccounts,g=void 0!==v&&v,y=e.checkUser,w=e.checkPermissions,b=void 0!==w&&w;return{login:(p=He(qe().mark((function e(t){var r,n,o,a,i,s,c;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(f);case 2:if(r=e.sent,!g){e.next=20;break}return n=t.username,o=t.password,e.prev=5,e.next=8,f.fetch(dt(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:o.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:a=e.sent,i=a.json,s=i.token,localStorage.setItem("token",s),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:c=new URL(window.location.href).origin+"/login?login=true",t.redirect&&(c+="&redirect="+encodeURIComponent(t.redirect)),window.location.href=dt(r,"auth?redirectUrl="+encodeURIComponent(c));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return p.apply(this,arguments)}),signup:(d=He(qe().mark((function e(t){var r,n,o,a,i,s,c,u,l,d,p;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(f);case 2:if(r=e.sent,!g){e.next=33;break}return n=t.username,o=t.email,a=t.password,t.domain,i=Qe(t,vt),e.prev=5,e.next=8,f.fetch(dt(r,"auth/signup"),{method:"POST",body:JSON.stringify(Ge({username:n.trim(),email:o.trim(),password:a.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return s=e.sent,c=s.json,u=c.token,localStorage.setItem("token",u),l=it(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:p=new URL(window.location.href).origin+"/login?login=true",window.location.href=dt(r,"auth?redirectUrl="+encodeURIComponent(p));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=He(qe().mark((function e(){var t,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(f);case 2:return t=e.sent,localStorage.clear(),g?(window.location.reload(),window.location.href="/"):(r=new URL(window.location.href).origin,window.location.href=dt(t,h?"auth/logout?redirectUrl="+encodeURIComponent(r+"/login?logout=true"):"auth/logout?redirectUrl="+encodeURIComponent(r+"/login"))),e.abrupt("return","/");case 6:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=He(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||h){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!y||y(e)},checkError:function(e){return Promise.resolve()},getPermissions:(c=He(qe().mark((function e(t){var r,n,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if("object"!==Ye(t)){e.next=4;break}return e.abrupt("return");case 4:if(t&&t.startsWith("http")){e.next=6;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 6:return r=ft(t),e.prev=7,e.next=10,f.fetch(r);case 10:return n=e.sent,o=n.json,e.abrupt("return",o["@graph"]);case 15:return e.prev=15,e.t0=e.catch(7),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[7,15]])}))),function(e){return c.apply(this,arguments)}),addPermission:(s=He(qe().mark((function e(t,r,n,o){var a,i,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=ft(t),Je(a={"@id":"#"+o.replace("acl:",""),"@type":"acl:Authorization"},n,r),Je(a,"acl:accessTo",t),Je(a,"acl:mode",o),s=a,e.next=6,f.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":mt(i),"@graph":[s]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return s.apply(this,arguments)}),removePermission:(i=He(qe().mark((function e(t,r,n,o){var a,i,s,c;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return a=ft(t),e.next=5,f.fetch(a);case 5:return i=e.sent,s=i.json,c=s["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=pt(e["acl:mode"]),a=pt(e[n]);return o&&t.includes(o)&&a&&a.includes(r)&&(a=a.filter((function(e){return e!==r}))),Ge(Ge({},e),{},Je({},n,a))})),e.next=10,f.fetch(a,{method:"PUT",body:JSON.stringify({"@context":mt(a),"@graph":c})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(a=He(qe().mark((function e(){var t,r,n,o,a,i,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=it(t),n=r.webId,e.next=5,f.fetch(n);case 5:if(o=e.sent,!(a=o.json).url){e.next=13;break}return e.next=10,f.fetch(a.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,s=i.json,e.abrupt("return",{id:n,fullName:(null==s?void 0:s["vcard:given-name"])||(null==s?void 0:s["pair:label"])||a["foaf:name"]||a["pair:label"],profileData:s,webIdData:a});case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resetPassword:(o=He(qe().mark((function e(t){var r,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,ht(f);case 3:return n=e.sent,e.prev=4,e.next=7,f.fetch(dt(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return o.apply(this,arguments)}),setNewPassword:(n=He(qe().mark((function e(t){var r,n,o,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,o=t.password,e.next=3,ht(f);case 3:return a=e.sent,e.prev=4,e.next=7,f.fetch(dt(a,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=He(qe().mark((function e(t){var r,n,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(f);case 2:return r=e.sent,e.prev=3,e.next=6,f.fetch(dt(r,"auth/account"));case 6:return n=e.sent,o=n.json,e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("auth.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=He(qe().mark((function e(t){var r,n,o,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(f);case 2:return r=e.sent,e.prev=3,n=t.email,o=t.currentPassword,a=t.newPassword,e.next=7,f.fetch(dt(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:o,email:n.trim(),newPassword:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("auth.notification.invalid_password");case 13:throw new Error("auth.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},yt="acl:agentClass",wt=["acl:Append","acl:Write","acl:Control"],bt=["acl:Append","acl:Write","acl:Control"],_t=["acl:Write","acl:Control"],Et=["acl:Control"],xt={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:wt,edit:bt,delete:_t,control:Et},jt={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},kt=(Je(ut={},"acl:Read","auth.right.resource.read"),Je(ut,"acl:Append","auth.right.resource.append"),Je(ut,"acl:Write","auth.right.resource.write"),Je(ut,"acl:Control","auth.right.resource.control"),ut),Ot=(Je(lt={},"acl:Read","auth.right.container.read"),Je(lt,"acl:Write","auth.right.container.write"),Je(lt,"acl:Control","auth.right.container.control"),lt),Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",o=c(),a=o.identity,i=o.isLoading,s=u(e),p=s.permissions,f=l(),m=d();return r((function(){!i&&a&&p&&!p.some((function(e){return xt[t].includes(e["acl:mode"])}))&&(f(jt[t],{type:"error"}),m(n))}),[p,a,m,f,i]),p},St=function(e){var r=K(e.resource);return Pt(r,"create"),t.createElement(p,e)};St.defaultProps={actions:t.createElement(f,null)};var Ct=je((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),At=function(e){var o=e.agents,a=e.addPermission,i=Ct(),s=m(),c=Xe(n(null),2),u=c[0],l=c[1],d=Xe(n(""),2),p=d[0],f=d[1],v=Xe(n([]),2),g=v[0],y=v[1],w=h("Person",{pagination:{page:1,perPage:100},sort:{field:"pair:label",order:"ASC"},filter:{q:p}},{enabled:p.length>0}).data;return r((function(){y((null==w?void 0:w.length)>0?Object.values(w):[])}),[w]),t.createElement(ke,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:g,noOptionsText:s("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){a(t.id||t["@id"],"acl:agent","acl:Read"),l(null),f(""),y([])},onInputChange:function(e,t){f(t)},renderInput:function(e){return t.createElement(X,Ke({},e,{label:s("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e,r){return t.createElement(Z,Ke({dense:!0,className:i.list},e),t.createElement(ee,{button:!0},t.createElement(te,null,t.createElement(re,{src:r.image},t.createElement(Oe,null))),t.createElement(ne,{primary:r["pair:label"]})))}})},It=function(e){var r=e.agent;switch(r.predicate){case yt:return"foaf:Agent"===r.id?t.createElement(Ce,null):t.createElement(Ae,null);case"acl:agent":return t.createElement(Oe,null);case"acl:agentGroup":return t.createElement(Ie,null);default:throw new Error("Unknown agent predicate: "+r.predicate)}},Tt=je((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),Lt=function(e){var o=e.isContainer,a=e.agent,i=e.addPermission,s=e.removePermission,c=Tt(),u=m(),l=v(),d=Xe(t.useState(null),2),p=d[0],f=d[1],h=Xe(n(),2),w=h[0],b=h[1],_=Xe(n(!0),2),E=_[0],x=_[1],j=Xe(n(),2),k=j[0],O=j[1];if(r((function(){"acl:agent"===a.predicate?l.getOne("Person",{id:a.id}).then((function(e){var t=e.data;b(t),x(!1)})).catch((function(e){O(e),x(!1)})):x(!1)}),[a.id,a.predicate]),"acl:agentGroup"===a.predicate)return null;var P=function(){return f(null)},S=o?Ot:kt;return E?t.createElement(g,null):k?t.createElement(y,null):t.createElement(ee,{className:c.listItem},t.createElement(te,null,t.createElement(re,{src:null==w?void 0:w.image},t.createElement(It,{agent:a}))),t.createElement(ne,{className:c.primaryText,primary:w?w["pair:label"]:u("foaf:Agent"===a.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(ne,{className:c.secondaryText,primary:a.permissions&&a.permissions.map((function(e){return u(S[e])})).join(", ")}),t.createElement(oe,null,t.createElement(ae,{onClick:function(e){return f(e.currentTarget)},size:"large"},t.createElement(Pe,null)),t.createElement(ie,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:P},Object.entries(S).map((function(e){var r=Xe(e,2),n=r[0],o=r[1],c=a.permissions&&a.permissions.includes(n);return t.createElement(se,{key:n,onClick:function(){c?s(a.id,a.predicate,n):i(a.id,a.predicate,n),P()}},t.createElement(ce,null,c?t.createElement(Se,null):null),t.createElement(ne,{primary:u(o)}))})))))},Nt=Te(Z)((function(e){return{width:"100%",maxWidth:"100%",backgroundColor:e.theme.palette.background.paper}})),Ut=function(e){var r=e.isContainer,n=e.agents,o=e.addPermission,a=e.removePermission;return t.createElement(Nt,{dense:!0},Object.entries(n).map((function(e){var n=Xe(e,2),i=n[0],s=n[1];return t.createElement(Lt,{key:i,isContainer:r,agent:s,addPermission:o,removePermission:a})})))},Rt=function(e){var t=u(e).permissions,a=w(),i=Xe(n({}),2),s=i[0],c=i[1];r((function(){var e,r=(Je(e={},"foaf:Agent",{id:"foaf:Agent",predicate:yt,permissions:[]}),Je(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:yt,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var o,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=et(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(t);try{var i=function(){var e=o.value;e[yt]&&pt(e[yt]).forEach((function(t){return n(t,yt,e["acl:mode"])})),e["acl:agent"]&&pt(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&pt(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(o=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}c(r)}}),[t]);var l=o((function(t,r,n){var o,i=Ge({},s);c(Ge(Ge({},s),{},Je({},t,{id:t,predicate:r,permissions:s[t]?[].concat(Ze(null===(o=s[t])||void 0===o?void 0:o.permissions),[n]):[n]}))),a.addPermission(e,t,r,n).catch((function(e){c(i)}))}),[s,c,e,a]),d=o((function(t,r,n){var o=Ge({},s);c(Object.fromEntries(Object.entries(s).map((function(e){var r=Xe(e,2),o=r[0],a=r[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==n}))),[o,a]})).filter((function(e){var t=Xe(e,2);t[0];var r=t[1];return r.predicate===yt||r.permissions.length>0})))),a.removePermission(e,t,r,n).catch((function(e){c(o)}))}),[s,c,e,a]);return{agents:s,addPermission:l,removePermission:d}},zt=je((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Wt=function(e){var r=e.open,n=e.onClose,o=e.uri,a=e.isContainer,i=zt(),s=m(),c=Rt(o),u=c.agents,l=c.addPermission,d=c.removePermission;return t.createElement(ue,{fullWidth:!0,open:r,onClose:n},t.createElement(le,{className:i.title},s(a?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(de,{className:i.addForm},t.createElement(At,{agents:u,addPermission:l})),t.createElement(de,{className:i.listForm},t.createElement(Ut,{isContainer:a,agents:u,addPermission:l,removePermission:d})),t.createElement(pe,{className:i.actions},t.createElement(b,{label:"ra.action.close",variant:"text",onClick:n})))},Ft=function(e){var r=e.isContainer,o=_(),a=E(),i=Xe(n(!1),2),s=i[0],c=i[1],u=K(a),l=r?u:o.id||o["@id"];return t.createElement(t.Fragment,null,t.createElement(b,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(Q,null)),t.createElement(Wt,{uri:l,isContainer:r,open:s,onClose:function(){return c(!1)}}))};Ft.defaultProps={isContainer:!1};var Dt=function(){var e=x(),r=e.hasList,n=e.hasShow,o=_(),a=j(null==o?void 0:o.id).permissions;return t.createElement(k,null,r&&t.createElement(O,null),n&&t.createElement(P,null),!!a&&a.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,null))},Vt=function(e){var r=_(),n=j(null==r?void 0:r.id).permissions;return n&&n.some((function(e){return _t.includes(e["acl:mode"])}))?t.createElement(S,e):null},Bt=je((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),Mt=function(e){var r=Bt();return t.createElement(C,Ke({},e,{className:r.toolbar}),t.createElement(A,null),t.createElement(Vt,{mutationMode:"undoable"}))},Gt=function(e){return Pt(e.id,"edit"),t.createElement(I,e,t.cloneElement(e.children,Ge({toolbar:t.createElement(Mt,null)},e.children.props)))};Gt.defaultProps={actions:t.createElement(Dt,null)};var qt=function(e){var r=e.bulkActions,n=e.sort,o=e.displayedFilters,a=e.exporter,i=e.filters,s=e.filterValues,c=e.onUnselectItems,l=e.selectedIds,d=e.showFilter,p=e.total,f=E(),m=fe((function(e){return e.breakpoints.down("xs")})),h=x(),v=K(f),g=u(v).permissions;return t.createElement(k,null,i&&t.cloneElement(i,{showFilter:d,displayedFilters:o,filterValues:s,context:"button"}),h.hasCreate&&g&&g.some((function(e){return wt.includes(e["acl:mode"])}))&&t.createElement(T,null),g&&g.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,{isContainer:!0}),!m&&!1!==a&&t.createElement(L,{disabled:0===p,sort:n,filter:s,exporter:a}),r&&t.cloneElement(r,{filterValues:s,selectedIds:l,onUnselectItems:c}))},Yt=function(e){return t.createElement(N,e)};Yt.defaultProps={actions:t.createElement(qt,null)};var $t=function(){var e=x(),r=e.hasList,n=e.hasEdit,o=_(),a=u(null==o?void 0:o.id).permissions;return t.createElement(k,null,r&&t.createElement(O,null),n&&a&&a.some((function(e){return bt.includes(e["acl:mode"])}))&&t.createElement(U,null),a&&a.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,null))},Ht=function(e){return Pt(e.id,"edit"),t.createElement(R,e)};Ht.defaultProps={actions:t.createElement($t,null)};var Jt=["open","onClose","title","message","redirect"],Kt=function(e){var r=e.open,n=e.onClose,o=e.title,a=e.message,i=e.redirect,s=Qe(e,Jt),c=z(),u=m();return t.createElement(ue,Ke({open:r,onClose:n},s),t.createElement(le,null,u(o)),t.createElement(de,null,t.createElement(me,null,u(a))),t.createElement(pe,null,t.createElement(he,{onClick:n},u("ra.action.cancel")),t.createElement(he,{onClick:function(){return c({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};Kt.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var Qt=["children","backgroundImage","buttons","userResource","propertiesExist","text"],Xt=function(e){e.children;var n=e.backgroundImage,o=e.buttons,i=e.userResource,s=e.propertiesExist,u=e.text,d=Qe(e,Qt),p=a(),f=!1,m=Ne(),h=Xe(Ue(),1)[0],g=c(),y=g.identity,b=g.isLoading,_=l(),E=z(),x=v(),j=w();r((function(){!b&&null!=y&&y.id&&m(h.get("redirect")||"/")}),[y,b,m,h]),r((function(){He(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.has("login")){e.next=7;break}if(!h.has("error")){e.next=5;break}"registration.not-allowed"===h.get("error")?_("auth.message.user_email_not_found",{type:"error"}):_("auth.message.bad_request",{type:"error",error:h.get("error")}),e.next=7;break;case 5:if(!h.has("token")){e.next=7;break}return e.delegateYield(qe().mark((function e(){var t,r,n,o,a,c,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.get("token"),r=it(t),n=r.webId,localStorage.setItem("token",t),e.next=5,x.getOne(i,{id:n});case 5:if(a=e.sent,o=a.data,!(s.length>0)){e.next=20;break}c=s.every((function(e){return o[e]}));case 9:if(c){e.next=20;break}return console.log("Waiting for all properties to have been created",s),e.next=13,delay(500);case 13:return e.next=15,x.getOne(i,{id:n});case 15:u=e.sent,o=u.data,c=s.every((function(e){return o[e]})),e.next=9;break;case 20:j.checkUser(o)?h.has("redirect")?(_("auth.message.user_connected",{type:"info"}),window.location.href=h.get("redirect")):h.has("new")&&"true"===h.get("new")?(_("auth.message.new_user_created",{type:"info"}),window.location.href="/"+i+"/"+encodeURIComponent(n)+"/edit"):(_("auth.message.user_connected",{type:"info"}),window.location.href="/"):(localStorage.removeItem("token"),_("auth.message.user_not_allowed_to_login",{type:"error"}),m.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",7);case 7:h.has("logout")&&(localStorage.clear(),_("auth.message.user_disconnected",{type:"info"}),m("/"));case 8:case"end":return e.stop()}}),e)})))()}),[h,m,_,i]);var k=function(){!f&&p.current&&(p.current.style.backgroundImage="url(".concat(n,")"),f=!0)};return r((function(){f||function(){if(n){var e=new Image;e.onload=k,e.src=n}}()})),b?null:t.createElement(tr,Ke({},d,{ref:p}),t.createElement(ve,{className:er.card},t.createElement("div",{className:er.avatar},t.createElement(re,{className:er.icon},t.createElement(Fe,null))),u&&t.createElement(ge,{variant:"body2"},u),o&&o.map((function(e,r){return t.createElement(ye,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return E({},"/login")}}))}))))},Zt="SsoLoginPage",er={card:"".concat(Zt,"-card"),avatar:"".concat(Zt,"-avatar"),icon:"".concat(Zt,"-icon"),switch:"".concat(Zt,"-switch")},tr=We("div",{name:Zt,overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme;return Je(t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},"& .".concat(er.card),{minWidth:300,marginTop:"6em"}),Je(t,"& .".concat(er.avatar),{margin:"1em",display:"flex",justifyContent:"center"}),Je(t,"& .".concat(er.icon),{backgroundColor:r.palette.secondary[500]}),Je(t,"& .".concat(er.switch),{marginBottom:"1em",display:"flex",justifyContent:"center"}),t}));Xt.defaultProps={propertiesExist:[],buttons:[t.createElement(he,{startIcon:t.createElement(re,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var rr=je((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:Je({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),nr=function(e){var o=e.history,a=e.location,i=e.text,s=e.customPodProviders,c=rr(),u=l(),d=W(),p=m(),f=w(),h=v(),g=Xe(n(s||[]),2),y=g[0],b=g[1],_=new URLSearchParams(a.search);return r((function(){He(qe().mark((function e(){var t,r,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==y.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),b(n),e.next=13;break;case 12:u("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[y,b,u,d]),r((function(){He(qe().mark((function e(){var t,r,n,a,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=it(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((a=e.sent).ok){e.next=10;break}u("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,a.json();case 12:i=e.sent,f.checkUser(i)?(localStorage.setItem("token",t),u("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(u("auth.message.user_not_allowed_to_login","error"),o.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),u("auth.message.user_disconnected","info"),o.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,h]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(we,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(ve,{className:c.card},t.createElement("div",{className:c.lockIconAvatar},t.createElement(re,{className:c.lockIcon},t.createElement(Fe,null))),t.createElement(we,{pl:2,pr:2},t.createElement(ge,{variant:"body2",className:c.text},i||p("auth.message.choose_pod_provider"))),t.createElement(we,{m:2},t.createElement(Z,{className:c.list},y.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(be,null),t.createElement(ee,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:c.listItem},t.createElement(te,null,t.createElement(re,null,t.createElement(De,null))),t.createElement(ne,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},or=function(e){var r=i((function(){return createTheme(e.theme)}),[e.theme]);return t.createElement(_e,{injectFirst:!0},t.createElement(Le,{theme:r},t.createElement(nr,e),t.createElement(F,null)))};function ar(){}function ir(){}ir.resetWarningCache=ar;var sr=function(){function e(e,t,r,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ir,resetWarningCache:ar};return r.PropTypes=r,r},cr=ct((function(e){e.exports=sr()})),ur=je((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),lr=function(t){var r=t.redirectTo,n=t.delayBeforeRedirect,o=Xe(D(!1),2),a=o[0],i=o[1],s=Ve(),c=m(),u=l(),d=ur(),p=Re(),f=new URLSearchParams(p.search);return e.createElement(V,{onSubmit:function(e){i(!0),s(e).then((function(e){n?setTimeout((function(){window.location.reload(),window.location.href=r||"/",i(!1)}),n):(window.location.reload(),window.location.href=r||"/",i(!1)),u("auth.message.new_user_created",{type:"info"})})).catch((function(e){i(!1),u("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},noValidate:!0,defaultValues:{email:f.get("email")}},e.createElement(Ee,{className:d.content},e.createElement(B,{autoFocus:!0,source:"username",label:c("auth.input.username"),autoComplete:"username",fullWidth:!0,disabled:a,validate:M()}),e.createElement(B,{source:"email",label:c("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:a||f.has("email")&&f.has("force-email"),validate:[M(),G()]}),e.createElement(B,{source:"password",type:"password",label:c("ra.auth.password"),autoComplete:"new-password",fullWidth:!0,disabled:a||f.has("email")&&f.has("force-email"),validate:M()}),e.createElement(he,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:d.button},a?e.createElement(xe,{className:d.icon,size:19,thickness:3}):c("auth.action.signup"))))};lr.propTypes={redirectTo:cr.string};var dr=je((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),pr=function(t){var r=t.redirectTo,n=Xe(D(!1),2),o=n[0],a=n[1],i=z(),s=m(),c=l(),u=dr(),d=Re(),p=new URLSearchParams(d.search);return e.createElement(V,{onSubmit:function(e){a(!0),i(e,r).then((function(){a(!1)})).catch((function(e){a(!1),c("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:p.get("email")}},e.createElement(Ee,{className:u.content},e.createElement(B,{source:"username",label:s("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:o||p.has("email")&&p.has("force-email"),validate:[M(),G()]}),e.createElement(B,{source:"password",type:"password",label:s("ra.auth.password"),autoComplete:"current-password",fullWidth:!0,disabled:o||p.has("email")&&p.has("force-email"),validate:M()}),e.createElement(he,{variant:"contained",type:"submit",color:"primary",disabled:o,fullWidth:!0,className:u.button},o?e.createElement(xe,{className:u.icon,size:19,thickness:3}):s("auth.action.login"))))};pr.propTypes={redirectTo:cr.string};var fr=je((function(e){return{icon:{margin:e.spacing(.3)}}})),mr=function(e){var r=e.redirectTo,n=Re(),o=new URLSearchParams(n.search),a=o.get("token"),i=Xe(D(!1),2),s=i[0],c=i[1],u=w(),d=m(),p=l(),f=fr();return t.createElement(V,{onSubmit:function(e){c(!0),u.setNewPassword(Ge(Ge({},e),{},{token:a})).then((function(e){setTimeout((function(){window.location.href="/login"+(r?"?redirect="+encodeURIComponent(r):""),c(!1)}),2e3),p("auth.notification.password_changed","info")})).catch((function(e){c(!1),p("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:o.get("email")}},t.createElement(Ee,{className:f.content},t.createElement(B,{autoFocus:!0,source:"email",label:d("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:s,validate:M(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(B,{autoFocus:!0,type:"password",source:"password",label:d("auth.input.new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:M(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(B,{autoFocus:!0,type:"password",source:"confirm-password",label:d("auth.input.confirm_new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:M(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(he,{variant:"contained",type:"submit",color:"primary",disabled:s,fullWidth:!0,className:f.button},s?t.createElement(xe,{className:f.icon,size:19,thickness:3}):d("auth.action.set_new_password"))))},hr=je((function(e){return{icon:{margin:e.spacing(.3)}}})),vr=function(){var e=Xe(D(!1),2),r=e[0],n=e[1],o=w(),a=m(),i=l(),s=hr();return t.createElement(V,{onSubmit:function(e){n(!0),o.resetPassword(Ge({},e)).then((function(e){n(!1),i("auth.notification.reset_password_submitted","info")})).catch((function(e){n(!1),i("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))}},t.createElement(Ee,{className:s.content},t.createElement(B,{autoFocus:!0,source:"email",label:a("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:r,validate:M(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(he,{variant:"contained",type:"submit",color:"primary",disabled:r,fullWidth:!0,className:s.button},r?t.createElement(xe,{className:s.icon,size:19,thickness:3}):a("auth.action.reset_password"))))},gr=je((function(e){return{"@global":{body:{backgroundColor:e.palette.secondary.main}},root:{backgroundColor:e.palette.secondary.main},card:Je({minWidth:300,maxWidth:500,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),icon:{marginTop:5,marginRight:5},title:Je({},e.breakpoints.down("sm"),{fontWeight:"bold",marginTop:12})}})),yr=function(e){var r=e.title,n=e.icon,o=e.text,a=e.children,i=gr();return t.createElement(we,{display:"flex",flexDirection:"column",alignItems:"center",className:i.root},t.createElement(ve,{className:i.card},t.createElement(we,{p:2,display:"flex",justifyContent:"start"},n&&t.cloneElement(n,{fontSize:"large",className:i.icon}),t.createElement(ge,{variant:"h4",className:i.title},r)),t.createElement(we,{pl:2,pr:2},t.createElement(ge,{variant:"body1"},o)),a),t.createElement(F,null))},wr=je((function(){return{switch:{marginBottom:"1em",display:"flex",flexDirection:"column",alignItems:"center"}}})),br=function(e){var n=e.hasSignup,o=wr(),a=Ne(),s=m(),u=Xe(Ue(),1)[0],l=n&&u.has("signup"),d=u.has("reset_password"),p=u.has("new_password"),f=!l&&!d&&!p,h=u.get("redirect"),v=c(),g=v.identity,y=v.isLoading;r((function(){!y&&null!=g&&g.id&&(h&&h.startsWith("http")?window.location.href=h:a(h||"/"))}),[g,y,a,h]);var w=Xe(i((function(){return l?["auth.action.signup","auth.helper.signup"]:f?["auth.action.login","auth.helper.login"]:d?["auth.action.reset_password","auth.helper.reset_password"]:p?["auth.action.set_new_password","auth.helper.set_new_password"]:void 0}),[l,f,d,p]),2),b=w[0],_=w[1];return y||null!=g&&g.id?null:t.createElement(yr,{title:s(b),text:s(_),icon:t.createElement(Fe,null)},t.createElement(ve,null,l&&t.createElement(lr,{redirectTo:h,delayBeforeRedirect:3e3}),d&&t.createElement(vr,null),p&&t.createElement(mr,{redirectTo:h}),f&&t.createElement(pr,{redirectTo:h}),t.createElement("div",{className:o.switch},l&&t.createElement(ze,{to:"/login"},t.createElement(ge,{variant:"body2"},s("auth.action.login"))),f&&t.createElement(t.Fragment,null,n&&t.createElement("div",null,t.createElement(ze,{to:"/login?signup=true"},t.createElement(ge,{variant:"body2"},s("auth.action.signup")))),t.createElement("div",null,t.createElement(ze,{to:"/login?reset_password=true&"+u.toString()},t.createElement(ge,{variant:"body2"},s("auth.action.reset_password"))))))))};br.defaultProps={hasSignup:!0};var _r=["name","create"],Er=function(e){var r=e.name,n=e.create,o=Qe(e,_r),a=K(r),i=u(a).permissions;return t.createElement(q,Ke({},o,{name:r,create:i&&i.some((function(e){return wt.includes(e["acl:mode"])}))?n:void 0}))},xr=["label","icon","to"],jr=["logout","profileResource"],kr=s((function(e,r){var n=e.label,a=e.icon,i=e.to,s=Qe(e,xr),c=H().onClose,u=m(),l=Ne(),d=o((function(){l(i),c()}),[i,c,l]);return t.createElement(se,Ke({onClick:d,ref:r},s),a&&t.createElement(ce,null,t.cloneElement(a,{fontSize:"small"})),t.createElement(ne,null,u(n)))})),Or=function(e){var r,n,o=e.logout,a=e.profileResource,i=Qe(e,jr),s=c().identity;return t.createElement(Y,i,s&&""!==s.id?[t.createElement(kr,{key:"view",label:"auth.action.view_my_profile",icon:t.createElement(Be,null),to:"/".concat(a,"/").concat(encodeURIComponent((null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id),"/show")}),t.createElement(kr,{key:"edit",label:"auth.action.edit_my_profile",icon:t.createElement(Pe,null),to:"/".concat(a,"/").concat(encodeURIComponent((null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id))}),t.cloneElement(o,{key:"logout"})]:[t.createElement(kr,{key:"signup",label:"auth.action.signup",to:"/login?signup=true"}),t.createElement(kr,{key:"login",label:"auth.action.login",to:"/login"})])};Or.defaultProps={logout:t.createElement($,null),profileResource:"Person"};var Pr=function(e){var t=c(),n=t.identity,o=t.isLoading,a=l(),i=d(),s=Re();return r((function(){o||null!=n&&n.id||(a(e||"ra.auth.auth_check_error",{type:"error"}),i("/login?redirect="+encodeURIComponent(s.pathname+s.search)))}),[o,n,i,a,s]),{identity:n,isLoading:o}};var Sr=function(){this.__data__=[],this.size=0};var Cr=function(e,t){return e===t||e!=e&&t!=t};var Ar=function(e,t){for(var r=e.length;r--;)if(Cr(e[r][0],t))return r;return-1},Ir=Array.prototype.splice;var Tr=function(e){var t=this.__data__,r=Ar(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ir.call(t,r,1),--this.size,!0)};var Lr=function(e){var t=this.__data__,r=Ar(t,e);return r<0?void 0:t[r][1]};var Nr=function(e){return Ar(this.__data__,e)>-1};var Ur=function(e,t){var r=this.__data__,n=Ar(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Rr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Rr.prototype.clear=Sr,Rr.prototype.delete=Tr,Rr.prototype.get=Lr,Rr.prototype.has=Nr,Rr.prototype.set=Ur;var zr=Rr;var Wr=function(){this.__data__=new zr,this.size=0};var Fr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Dr=function(e){return this.__data__.get(e)};var Vr=function(e){return this.__data__.has(e)},Br="object"==typeof st&&st&&st.Object===Object&&st,Mr="object"==typeof self&&self&&self.Object===Object&&self,Gr=Br||Mr||Function("return this")(),qr=Gr.Symbol,Yr=Object.prototype,$r=Yr.hasOwnProperty,Hr=Yr.toString,Jr=qr?qr.toStringTag:void 0;var Kr=function(e){var t=$r.call(e,Jr),r=e[Jr];try{e[Jr]=void 0;var n=!0}catch(e){}var o=Hr.call(e);return n&&(t?e[Jr]=r:delete e[Jr]),o},Qr=Object.prototype.toString;var Xr=function(e){return Qr.call(e)},Zr=qr?qr.toStringTag:void 0;var en=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Zr&&Zr in Object(e)?Kr(e):Xr(e)};var tn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var rn,nn=function(e){if(!tn(e))return!1;var t=en(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},on=Gr["__core-js_shared__"],an=(rn=/[^.]+$/.exec(on&&on.keys&&on.keys.IE_PROTO||""))?"Symbol(src)_1."+rn:"";var sn=function(e){return!!an&&an in e},cn=Function.prototype.toString;var un=function(e){if(null!=e){try{return cn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ln=/^\[object .+?Constructor\]$/,dn=Function.prototype,pn=Object.prototype,fn=dn.toString,mn=pn.hasOwnProperty,hn=RegExp("^"+fn.call(mn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var vn=function(e){return!(!tn(e)||sn(e))&&(nn(e)?hn:ln).test(un(e))};var gn=function(e,t){return null==e?void 0:e[t]};var yn=function(e,t){var r=gn(e,t);return vn(r)?r:void 0},wn=yn(Gr,"Map"),bn=yn(Object,"create");var _n=function(){this.__data__=bn?bn(null):{},this.size=0};var En=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xn=Object.prototype.hasOwnProperty;var jn=function(e){var t=this.__data__;if(bn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return xn.call(t,e)?t[e]:void 0},kn=Object.prototype.hasOwnProperty;var On=function(e){var t=this.__data__;return bn?void 0!==t[e]:kn.call(t,e)};var Pn=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=bn&&void 0===t?"__lodash_hash_undefined__":t,this};function Sn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sn.prototype.clear=_n,Sn.prototype.delete=En,Sn.prototype.get=jn,Sn.prototype.has=On,Sn.prototype.set=Pn;var Cn=Sn;var An=function(){this.size=0,this.__data__={hash:new Cn,map:new(wn||zr),string:new Cn}};var In=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Tn=function(e,t){var r=e.__data__;return In(t)?r["string"==typeof t?"string":"hash"]:r.map};var Ln=function(e){var t=Tn(this,e).delete(e);return this.size-=t?1:0,t};var Nn=function(e){return Tn(this,e).get(e)};var Un=function(e){return Tn(this,e).has(e)};var Rn=function(e,t){var r=Tn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function zn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zn.prototype.clear=An,zn.prototype.delete=Ln,zn.prototype.get=Nn,zn.prototype.has=Un,zn.prototype.set=Rn;var Wn=zn;var Fn=function(e,t){var r=this.__data__;if(r instanceof zr){var n=r.__data__;if(!wn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Wn(n)}return r.set(e,t),this.size=r.size,this};function Dn(e){var t=this.__data__=new zr(e);this.size=t.size}Dn.prototype.clear=Wr,Dn.prototype.delete=Fr,Dn.prototype.get=Dr,Dn.prototype.has=Vr,Dn.prototype.set=Fn;var Vn=Dn;var Bn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Mn=function(e){return this.__data__.has(e)};function Gn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Wn;++t<r;)this.add(e[t])}Gn.prototype.add=Gn.prototype.push=Bn,Gn.prototype.has=Mn;var qn=Gn;var Yn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var $n=function(e,t){return e.has(t)};var Hn=function(e,t,r,n,o,a){var i=1&r,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;var u=a.get(e),l=a.get(t);if(u&&l)return u==t&&l==e;var d=-1,p=!0,f=2&r?new qn:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(n)var v=i?n(h,m,d,t,e,a):n(m,h,d,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!Yn(t,(function(e,t){if(!$n(f,t)&&(m===e||o(m,e,r,n,a)))return f.push(t)}))){p=!1;break}}else if(m!==h&&!o(m,h,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p},Jn=Gr.Uint8Array;var Kn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var Qn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Xn=qr?qr.prototype:void 0,Zn=Xn?Xn.valueOf:void 0;var eo=function(e,t,r,n,o,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Jn(e),new Jn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Cr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Kn;case"[object Set]":var c=1&n;if(s||(s=Qn),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=Hn(s(e),s(t),n,o,a,i);return i.delete(e),l;case"[object Symbol]":if(Zn)return Zn.call(e)==Zn.call(t)}return!1};var to=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},ro=Array.isArray;var no=function(e,t,r){var n=t(e);return ro(e)?n:to(n,r(e))};var oo=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var ao=function(){return[]},io=Object.prototype.propertyIsEnumerable,so=Object.getOwnPropertySymbols,co=so?function(e){return null==e?[]:(e=Object(e),oo(so(e),(function(t){return io.call(e,t)})))}:ao;var uo=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var lo=function(e){return null!=e&&"object"==typeof e};var po=function(e){return lo(e)&&"[object Arguments]"==en(e)},fo=Object.prototype,mo=fo.hasOwnProperty,ho=fo.propertyIsEnumerable,vo=po(function(){return arguments}())?po:function(e){return lo(e)&&mo.call(e,"callee")&&!ho.call(e,"callee")};var go=function(){return!1},yo=ct((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Gr.Buffer:void 0,a=(o?o.isBuffer:void 0)||go;e.exports=a})),wo=/^(?:0|[1-9]\d*)$/;var bo=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&wo.test(e))&&e>-1&&e%1==0&&e<t};var _o=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Eo={};Eo["[object Float32Array]"]=Eo["[object Float64Array]"]=Eo["[object Int8Array]"]=Eo["[object Int16Array]"]=Eo["[object Int32Array]"]=Eo["[object Uint8Array]"]=Eo["[object Uint8ClampedArray]"]=Eo["[object Uint16Array]"]=Eo["[object Uint32Array]"]=!0,Eo["[object Arguments]"]=Eo["[object Array]"]=Eo["[object ArrayBuffer]"]=Eo["[object Boolean]"]=Eo["[object DataView]"]=Eo["[object Date]"]=Eo["[object Error]"]=Eo["[object Function]"]=Eo["[object Map]"]=Eo["[object Number]"]=Eo["[object Object]"]=Eo["[object RegExp]"]=Eo["[object Set]"]=Eo["[object String]"]=Eo["[object WeakMap]"]=!1;var xo=function(e){return lo(e)&&_o(e.length)&&!!Eo[en(e)]};var jo=function(e){return function(t){return e(t)}},ko=ct((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Br.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a})),Oo=ko&&ko.isTypedArray,Po=Oo?jo(Oo):xo,So=Object.prototype.hasOwnProperty;var Co=function(e,t){var r=ro(e),n=!r&&vo(e),o=!r&&!n&&yo(e),a=!r&&!n&&!o&&Po(e),i=r||n||o||a,s=i?uo(e.length,String):[],c=s.length;for(var u in e)!t&&!So.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bo(u,c))||s.push(u);return s},Ao=Object.prototype;var Io=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ao)};var To=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Lo=Object.prototype.hasOwnProperty;var No=function(e){if(!Io(e))return To(e);var t=[];for(var r in Object(e))Lo.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Uo=function(e){return null!=e&&_o(e.length)&&!nn(e)};var Ro=function(e){return Uo(e)?Co(e):No(e)};var zo=function(e){return no(e,Ro,co)},Wo=Object.prototype.hasOwnProperty;var Fo=function(e,t,r,n,o,a){var i=1&r,s=zo(e),c=s.length;if(c!=zo(t).length&&!i)return!1;for(var u=c;u--;){var l=s[u];if(!(i?l in t:Wo.call(t,l)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var f=!0;a.set(e,t),a.set(t,e);for(var m=i;++u<c;){var h=e[l=s[u]],v=t[l];if(n)var g=i?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===g?h===v||o(h,v,r,n,a):g)){f=!1;break}m||(m="constructor"==l)}if(f&&!m){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return a.delete(e),a.delete(t),f},Do=yn(Gr,"DataView"),Vo=yn(Gr,"Promise"),Bo=yn(Gr,"Set"),Mo=yn(Gr,"WeakMap"),Go=un(Do),qo=un(wn),Yo=un(Vo),$o=un(Bo),Ho=un(Mo),Jo=en;(Do&&"[object DataView]"!=Jo(new Do(new ArrayBuffer(1)))||wn&&"[object Map]"!=Jo(new wn)||Vo&&"[object Promise]"!=Jo(Vo.resolve())||Bo&&"[object Set]"!=Jo(new Bo)||Mo&&"[object WeakMap]"!=Jo(new Mo))&&(Jo=function(e){var t=en(e),r="[object Object]"==t?e.constructor:void 0,n=r?un(r):"";if(n)switch(n){case Go:return"[object DataView]";case qo:return"[object Map]";case Yo:return"[object Promise]";case $o:return"[object Set]";case Ho:return"[object WeakMap]"}return t});var Ko=Jo,Qo="[object Object]",Xo=Object.prototype.hasOwnProperty;var Zo=function(e,t,r,n,o,a){var i=ro(e),s=ro(t),c=i?"[object Array]":Ko(e),u=s?"[object Array]":Ko(t),l=(c="[object Arguments]"==c?Qo:c)==Qo,d=(u="[object Arguments]"==u?Qo:u)==Qo,p=c==u;if(p&&yo(e)){if(!yo(t))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new Vn),i||Po(e)?Hn(e,t,r,n,o,a):eo(e,t,c,r,n,o,a);if(!(1&r)){var f=l&&Xo.call(e,"__wrapped__"),m=d&&Xo.call(t,"__wrapped__");if(f||m){var h=f?e.value():e,v=m?t.value():t;return a||(a=new Vn),o(h,v,r,n,a)}}return!!p&&(a||(a=new Vn),Fo(e,t,r,n,o,a))};var ea=function e(t,r,n,o,a){return t===r||(null==t||null==r||!lo(t)&&!lo(r)?t!=t&&r!=r:Zo(t,r,n,o,e,a))};var ta=function(e,t){return ea(e,t)},ra={},na={"{}":void 0},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=JSON.stringify(e),n=D({permissions:na[t]}),a=Xe(n,2),i=a[0],s=a[1],c=J(),u=o((function(){return c(e).then((function(e){ta(e,i.permissions)||(na[t]=e,s({permissions:e}))})).catch((function(e){s({error:e})}))}),[t,e,c]);return r((function(){u()}),[t]),Ge(Ge({},i),{},{refetch:u})},aa=function(){var e=w();return o((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},ia={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",reset_password:"Reset password",set_new_password:"Set new password",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address",current_password:"Current password",new_password:"New password",confirm_new_password:"Confirm new password"},helper:{login:"Sign in to your account",signup:"Create your account",reset_password:"Enter your email address below and we will send you a link to reset your password",set_new_password:"Please enter your email address and a new password below"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."},notification:{reset_password_submitted:"An email has been sent with reset password instructions",reset_password_error:"An error occurred",password_changed:"Password changed successfully",new_password_error:"An error occurred",invalid_password:"Invalid password",get_settings_error:"An error occurred",update_settings_error:"An error occurred"}}},sa={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",reset_password:"Mot de passe oublié ?",set_new_password:"Définir le mot de passe",logout:"Se déconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"Éditer mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connectés"},input:{agent_select:"Ajouter un utilisateur...",name:"Prénom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail",current_password:"Mot de passe actuel",new_password:"Nouveau mot de passe",confirm_new_password:"Confirmer le nouveau mot de passe"},helper:{login:"Connectez-vous à votre compte.",signup:"Créez votre compte",reset_password:"Entrez votre adresse mail ci-dessous et nous vous enverrons un lien pour réinitialiser votre mot de passe",set_new_password:"Veuillez entrer votre adresse mail et un nouveau mot de passe ci-dessous"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'éditer cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de créer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouvé avec cette adresse mail",user_email_exist:"Un compte existe déjà avec cette adresse mail",username_exist:"Un compte existe déjà avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autorisés",new_user_created:"Votre compte a été créé avec succès",user_connected:"Vous êtes maintenant connecté",user_disconnected:"Vous êtes maintenant déconnecté",bad_request:"Requête erronée (Message d'erreur renvoyé par le serveur: %{error})",account_settings_updated:"Les paramètres de votre compte ont été mis à jour avec succès",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les données de l'application seront enregistrées sur votre POD."},notification:{reset_password_submitted:"Un e-mail a été envoyé avec les instructions de réinitialisation du mot de passe",reset_password_error:"Une erreur s'est produite",password_changed:"Le mot de passe a été changé avec succès",new_password_error:"Une erreur s'est produite",invalid_password:"Mot de passe incorrect",get_settings_error:"Une erreur s'est produite",update_settings_error:"Une erreur s'est produite"}}};export{Kt as AuthDialog,St as CreateWithPermissions,Vt as DeleteButtonWithPermissions,Dt as EditActionsWithPermissions,Mt as EditToolbarWithPermissions,Gt as EditWithPermissions,qt as ListActionsWithPermissions,Yt as ListWithPermissions,br as LocalLoginPage,Xt as LoginPage,Ft as PermissionsButton,or as PodLoginPage,Er as ResourceWithPermissions,$t as ShowActionsWithPermissions,Ht as ShowWithPermissions,Xt as SsoLoginPage,Or as UserMenu,gt as authProvider,ia as englishMessages,sa as frenchMessages,Rt as useAgents,Pr as useCheckAuthenticated,Pt as useCheckPermissions,oa as usePermissionsWithRefetch,aa as useSignup};
//# sourceMappingURL=index.es.js.map
