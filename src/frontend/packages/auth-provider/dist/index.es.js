import e,{useState as t,useEffect as n,useCallback as r,createElement as o,cloneElement as a,forwardRef as i}from"react";import{useGetList as c,useDataProvider as l,Loading as s,Error as u,usePermissionsOptimized as m,useAuthProvider as f,Button as d,TopToolbar as p,ListButton as h,ShowButton as g,Toolbar as v,SaveButton as y,DeleteButton as b,Edit as E,EditButton as w,Show as P,useNotify as C,useLogin as k,Notification as O,useLogout as j,Resource as A,MenuItemLink as I,useGetIdentity as x,UserMenu as S}from"react-admin";import N from"@material-ui/icons/Share";import{makeStyles as T,TextField as R,List as U,ListItem as L,ListItemAvatar as W,Avatar as D,ListItemText as $,ListItemSecondaryAction as G,IconButton as B,Menu as F,MenuItem as M,ListItemIcon as V,Dialog as H,DialogTitle as J,DialogContent as q,DialogActions as z,Card as _,CardActions as K,Button as Q}from"@material-ui/core";import X from"@material-ui/lab/Autocomplete";import Y from"@material-ui/icons/Person";import Z from"@material-ui/icons/Edit";import ee from"@material-ui/icons/Check";import te from"@material-ui/icons/Public";import ne from"@material-ui/icons/VpnLock";import re from"@material-ui/icons/Group";import{List as oe,ListActions as ae}from"@semapps/archipelago-layout";import{ThemeProvider as ie}from"@material-ui/styles";import{makeStyles as ce,createMuiTheme as le}from"@material-ui/core/styles";import se from"@material-ui/icons/Lock";import ue from"@material-ui/core/MenuItem";import me from"@material-ui/icons/PowerSettingsNew";import fe from"@material-ui/icons/AccountCircle";function de(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,c,"next",e)}function c(e){de(a,r,o,i,c,"throw",e)}i(void 0)}))}}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e){this.message=e}ke.prototype=new Error,ke.prototype.name="InvalidCharacterError";var Oe="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ke("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,a=0,i="";r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function je(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Oe(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return Oe(t)}}function Ae(e){this.message=e}Ae.prototype=new Error,Ae.prototype.name="InvalidTokenError";var Ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var xe,Se,Ne=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t,n;t=Ie,n=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=n():t.urljoin=n()})),Te=function(e){return e?Array.isArray(e)?e:[e]:void 0},Re=function(e,t){return Ne(e,t.replace(e,"_acl/"))},Ue=function(e){var t,n,r,o=e.middlewareUri,a=e.httpClient,i=e.checkPermissions,c=e.resources;return{login:function(e){return window.location.href="".concat(o,"auth?redirectUrl=")+encodeURIComponent(window.location.href),Promise.resolve()},logout:function(){var e=new URL(window.location.href);return window.location.href="".concat(o,"auth/logout?redirectUrl=")+encodeURIComponent(e.origin+"/login?logout"),Promise.resolve("/")},checkAuth:function(){return localStorage.getItem("token"),Promise.resolve()},checkError:function(e){return Promise.resolve()},getPermissions:(r=pe(regeneratorRuntime.mark((function e(t){var n,r,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",!0);case 2:return n=c[t]?c[t].containerUri:t,r=Re(o,n),e.next=6,a(r);case 6:return l=e.sent,s=l.json,e.abrupt("return",s["@graph"]);case 9:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),addPermission:(n=pe(regeneratorRuntime.mark((function e(t,n,r,i){var l,s,u,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c[t]?c[t].containerUri:t,u=Re(o,s),he(l={"@id":u+"#"+i.replace("acl:",""),"@type":"acl:Authorization"},r,n),he(l,"acl:accessTo",s),he(l,"acl:mode",i),m=l,e.next=5,a(u,{method:"PATCH",body:JSON.stringify({"@context":{acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/"},"@graph":[m]})});case 5:case"end":return e.stop()}}),e)}))),function(e,t,r,o){return n.apply(this,arguments)}),removePermission:(t=pe(regeneratorRuntime.mark((function e(t,n,r,i){var l,s,u,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c[t]?c[t].containerUri:t,s=Re(o,l),e.next=4,a(s);case 4:return u=e.sent,m=u.json,f=m["@graph"].map((function(e){var t=Te(e["acl:mode"]),o=Te(e[r]);return i&&t.includes(i)&&o&&o.includes(n)&&(o=o.filter((function(e){return e!==n}))),ye(ye({},e),{},he({},r,o))})),e.next=9,a(s,{method:"PUT",body:JSON.stringify(ye(ye({},m),{},{"@graph":f}))});case 9:case"end":return e.stop()}}),e)}))),function(e,n,r,o){return t.apply(this,arguments)}),getIdentity:function(){var e=localStorage.getItem("token");if(e){var t=function(e,t){if("string"!=typeof e)throw new Ae("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(je(e.split(".")[n]))}catch(e){throw new Ae("Invalid token specified: "+e.message)}}(e);return{id:t.webId,fullName:t.name}}}}},Le="acl:agentClass",We=["acl:Read","acl:Append","acl:Write","acl:Control"],De=["acl:Append","acl:Write","acl:Control"],$e=["acl:Append","acl:Write","acl:Control"],Ge=["acl:Write","acl:Control"],Be=["acl:Control"],Fe=(he(xe={},"acl:Read","Lire"),he(xe,"acl:Append","Enrichir"),he(xe,"acl:Write","Modifier"),he(xe,"acl:Control","Administrer"),xe),Me=(he(Se={},"acl:Read","Lister"),he(Se,"acl:Append","Ajouter"),he(Se,"acl:Control","Administrer"),T((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}}))),Ve=function(r){var o=r.agents,a=r.addPermission,i=Me(),l=Ee(t(null),2),s=l[0],u=l[1],m=Ee(t(""),2),f=m[0],d=m[1],p=Ee(t([]),2),h=p[0],g=p[1],v=c("Person",{page:1,perPage:100},{field:"pair:label",order:"ASC"},{q:f},{enabled:f.length>0}),y=v.ids,b=v.data;return n((function(){g(y.length>0?Object.values(b):[])}),[y,b]),e.createElement(X,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:h,noOptionsText:"Aucun résultat",autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:s,onChange:function(e,t){a(t.id||t["@id"],"acl:agent","acl:Read"),u(null),d(""),g([])},onInputChange:function(e,t){d(t)},renderInput:function(t){return e.createElement(R,ge({},t,{label:"Ajouter un utilisateur ou un groupe...",variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(t){return e.createElement(U,{dense:!0,className:i.list},e.createElement(L,{button:!0},e.createElement(W,null,e.createElement(D,{src:t.image},e.createElement(Y,null))),e.createElement($,{primary:t["pair:label"]})))}})},He=function(t){var n=t.agent;switch(n.predicate){case Le:return"foaf:Agent"===n.id?e.createElement(te,null):e.createElement(ne,null);case"acl:agent":return e.createElement(Y,null);case"acl:agentGroup":return e.createElement(re,null);default:throw new Error("Unknown agent predicate: "+n.predicate)}},Je=T((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),qe=function(r){var o=r.agent,a=r.addPermission,i=r.removePermission,c=Je(),m=l(),f=Ee(e.useState(null),2),d=f[0],p=f[1],h=Ee(t(),2),g=h[0],v=h[1],y=Ee(t(!0),2),b=y[0],E=y[1],w=Ee(t(),2),P=w[0],C=w[1];if(n((function(){"acl:agent"===o.predicate?m.getOne("Person",{id:o.id}).then((function(e){var t=e.data;v(t),E(!1)})).catch((function(e){C(e),E(!1)})):E(!1)}),[o.id,o.predicate]),"acl:agentGroup"===o.predicate)return null;var k=function(){return p(null)};return b?e.createElement(s,null):P?e.createElement(u,null):e.createElement(L,{button:!0,className:c.listItem},e.createElement(W,null,e.createElement(D,{src:null==g?void 0:g.image},e.createElement(He,{agent:o}))),e.createElement($,{className:c.primaryText,primary:g?g["pair:label"]:"foaf:Agent"===o.id?"Tous les utilisateurs":"Utilisateurs connectés"}),e.createElement($,{className:c.secondaryText,primary:o.permissions&&o.permissions.map((function(e){return Fe[e]})).join(", ")}),e.createElement(G,null,e.createElement(B,{onClick:function(e){return p(e.currentTarget)}},e.createElement(Z,null)),e.createElement(F,{anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:k},Object.entries(Fe).map((function(t){var n=Ee(t,2),r=n[0],c=n[1],l=o.permissions&&o.permissions.includes(r);return e.createElement(M,{key:r,onClick:function(){l?i(o.id,o.predicate,r):a(o.id,o.predicate,r),k()}},e.createElement(V,null,l?e.createElement(ee,null):null),e.createElement($,{primary:c}))})))))},ze=T((function(e){return{list:{width:"100%",maxWidth:"100%",backgroundColor:e.palette.background.paper}}})),_e=function(t){var n=t.agents,r=t.addPermission,o=t.removePermission,a=ze();return e.createElement(U,{dense:!0,className:a.list},Object.entries(n).map((function(t){var n=Ee(t,2),a=n[0],i=n[1];return e.createElement(qe,{key:a,agent:i,addPermission:r,removePermission:o})})))},Ke=function(e){var o=m(e).permissions,a=f(),i=Ee(t({}),2),c=i[0],l=i[1];n((function(){var e,t=(he(e={},"foaf:Agent",{id:"foaf:Agent",predicate:Le,permissions:[]}),he(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:Le,permissions:[]}),e),n=function(e,n,r){t[e]?t[e].permissions.push(r):t[e]={id:e,predicate:n,permissions:[r]}};if(o){var r,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Pe(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(o);try{var i=function(){var e=r.value;e[Le]&&Te(e[Le]).forEach((function(t){return n(t,Le,e["acl:mode"])})),e["acl:agent"]&&Te(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&Te(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}l(t)}}),[o]);var s=r((function(t,n,r){var o,i=ye({},c);l(ye(ye({},c),{},he({},t,{id:t,predicate:n,permissions:c[t]?[].concat(we(null===(o=c[t])||void 0===o?void 0:o.permissions),[r]):[r]}))),a.addPermission(e,t,n,r).catch((function(e){l(i)}))}),[c,l,e,a]),u=r((function(t,n,r){var o=ye({},c);l(Object.fromEntries(Object.entries(c).map((function(e){var n=Ee(e,2),o=n[0],a=n[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==r}))),[o,a]})).filter((function(e){var t=Ee(e,2),n=(t[0],t[1]);return n.predicate===Le||n.permissions.length>0})))),a.removePermission(e,t,n,r).catch((function(e){l(o)}))}),[c,l,e,a]);return{agents:c,addPermission:s,removePermission:u}},Qe=T((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Xe=function(t){var n=t.open,r=t.onClose,o=t.resourceId,a=t.isContainer,i=Qe(),c=Ke(o),l=c.agents,s=c.addPermission,u=c.removePermission;return e.createElement(H,{fullWidth:!0,open:n,onClose:r},e.createElement(J,{className:i.title},a?"Permissions sur le container":"Permissions sur la ressource"),e.createElement(q,{className:i.addForm},e.createElement(Ve,{agents:l,addPermission:s})),e.createElement(q,{className:i.listForm},e.createElement(_e,{isContainer:a,agents:l,addPermission:s,removePermission:u})),e.createElement(z,{className:i.actions},e.createElement(d,{label:"ra.action.close",variant:"text",onClick:r})))},Ye=function(n){var r=n.record,o=n.resource,a=Ee(t(!1),2),i=a[0],c=a[1],l=o||r.id||r["@id"],s=m(l).permissions;return l&&s&&s.some((function(e){return Be.includes(e["acl:mode"])}))?e.createElement(e.Fragment,null,e.createElement(d,{label:"Permissions",onClick:function(){return c(!0)}},e.createElement(N,null)),e.createElement(Xe,{resourceId:l,isContainer:!!o,open:i,onClose:function(){return c(!1)}})):null},Ze=function(t){var n=t.basePath,r=t.className,o=t.data,a=t.hasList,i=t.hasShow,c=t.hasControl,l=be(t,["basePath","className","data","hasList","hasShow","hasControl"]);return e.createElement(p,ge({className:r},l),a&&e.createElement(h,{basePath:n,record:o}),i&&e.createElement(g,{basePath:n,record:o}),o&&c&&e.createElement(Ye,{basePath:n,record:o}))},et=T((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),tt=function(t){var n=t.hasDelete,r=be(t,["hasDelete"]),o=et();return e.createElement(v,ge({},r,{className:o.toolbar}),e.createElement(y,null),n&&e.createElement(b,{undoable:!1}))},nt=function(t){console.log("EditWithPermissions",t.id);var n=m(t.id).permissions;return e.createElement(E,ge({actions:e.createElement(Ze,{hasControl:n&&n.some((function(e){return Be.includes(e["acl:mode"])}))})},t,{permissions:n}),e.cloneElement(t.children,{toolbar:e.createElement(tt,{hasDelete:n&&n.some((function(e){return Ge.includes(e["acl:mode"])}))})}))},rt=function(t){return e.createElement(oe,ge({actions:e.createElement(ae,{bulkActions:e.createElement(Ye,null)})},t))},ot=function(t){var n=t.basePath,r=t.className,o=t.data,a=t.hasList,i=t.hasEdit,c=t.hasControl,l=be(t,["basePath","className","data","hasList","hasEdit","hasControl"]);return e.createElement(p,ge({className:r},l),a&&e.createElement(h,{basePath:n,record:o}),i&&e.createElement(w,{basePath:n,record:o}),o&&c&&e.createElement(Ye,{basePath:n,record:o}))},at=function(t){var n=m(t.id).permissions;return e.createElement(P,ge({actions:e.createElement(ot,{hasControl:n&&n.some((function(e){return Be.includes(e["acl:mode"])}))})},t,{permissions:n,hasEdit:n&&n.some((function(e){return $e.includes(e["acl:mode"])}))}))},it=ce((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.palette.primary[500]},card:{minWidth:300,marginTop:"6em"},lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.secondary[500]}}})),ct=function(e){var t=e.theme,n=e.history,r=e.location,i=e.buttons,c=it(),l=C(),s=k(),u=new URLSearchParams(r.search);return u.has("token")&&(localStorage.setItem("token",u.get("token")),l("Vous êtes maintenant connecté","info"),n.push("/")),u.has("logout")&&(localStorage.removeItem("token"),l("Vous êtes maintenant déconnecté","info"),n.push("/")),o(ie,{theme:le(t)},o("div",{className:c.main},o(_,{className:c.card},o("div",{className:c.lockIconAvatar},o(D,{className:c.lockIcon},o(se,null))),i&&i.map((function(e){return o(K,null,a(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return s({},"/login")}}))})))),o(O,null))};ct.defaultProps={buttons:[o(Q,{startIcon:o(D,{src:"/lescommuns.jpg"})},"Les Communs")]};var lt=i((function(t,n){var r=j();return e.createElement(ue,{onClick:function(){return r()},ref:n},e.createElement(me,null),"   Se déconnecter")})),st=function(t){var n=t.name,r=t.list,o=t.create,a=be(t,["name","list","create"]),i=m(n).permissions;return e.createElement(A,ge({},a,{name:n,list:i&&i.some((function(e){return We.includes(e["acl:mode"])}))?r:void 0,create:i&&i.some((function(e){return De.includes(e["acl:mode"])}))?o:void 0}))},ut=i((function(t,n){var r=t.onClick,o=t.webId;return e.createElement(I,{ref:n,to:"/Person/".concat(encodeURIComponent(o),"/show"),primaryText:"Voir mon profil",leftIcon:e.createElement(fe,null),onClick:r})})),mt=i((function(t,n){var r=t.onClick,o=t.webId;return e.createElement(I,{ref:n,to:"/Person/".concat(encodeURIComponent(o),"/edit"),primaryText:"Editer mon profil",leftIcon:e.createElement(Z,null),onClick:r})})),ft=i((function(t,n){var r=t.onClick;return e.createElement(I,{ref:n,to:"/login",primaryText:"Se connecter",onClick:r})})),dt=function(t){var n=t.logout,r=be(t,["logout"]),o=x().identity;return e.createElement(S,r,o&&""!==o.id?[e.createElement(ut,{webId:o.id,key:"view"}),e.createElement(mt,{webId:o.id,key:"edit"}),e.cloneElement(n,{key:"logout"})]:e.createElement(ft,null))};export{Ze as EditActions,nt as EditWithPermissions,rt as ListWithPermissions,ct as LoginPage,lt as LogoutButton,Ye as PermissionsButton,st as ResourceWithPermissions,ot as ShowActions,at as ShowWithPermissions,dt as UserMenu,Ue as authProvider};
