import*as e from"react";import t,{useEffect as r,useState as n,useCallback as o,useRef as a,forwardRef as i}from"react";import{useGetIdentity as c,usePermissions as s,useNotify as u,useRedirect as l,Create as d,CreateActions as f,useTranslate as p,useGetList as m,useDataProvider as h,Loading as v,Error as g,useTheme as y,useAuthProvider as b,Button as w,useResourceDefinition as _,usePermissionsOptimized as E,TopToolbar as x,ListButton as j,ShowButton as k,useRecordContext as O,DeleteButton as P,Toolbar as S,SaveButton as C,Edit as A,CreateButton as I,ExportButton as T,List as L,EditButton as R,Show as U,useLogin as N,Notification as z,useLocale as W,useSafeSetState as F,Form as D,TextInput as V,required as B,email as G,LoginForm as q,useLogout as M,Resource as Y,UserMenu as $,MenuItemLink as H,useGetPermissions as J}from"react-admin";import{useCreateContainer as K}from"@semapps/semantic-data-provider";import Q from"@mui/icons-material/Share";import{TextField as X,List as Z,ListItem as ee,ListItemAvatar as te,Avatar as re,ListItemText as ne,ListItemSecondaryAction as oe,IconButton as ae,Menu as ie,MenuItem as ce,ListItemIcon as se,Dialog as ue,DialogTitle as le,DialogContent as de,DialogActions as fe,useMediaQuery as pe,DialogContentText as me,Button as he,Card as ve,StyledEngineProvider as ge,Typography as ye,CardActions as be,Box as we,Divider as _e,CardContent as Ee,CircularProgress as xe}from"@mui/material";import je from"@mui/styles/makeStyles";import ke from"@mui/material/Autocomplete";import Oe from"@mui/icons-material/Person";import Pe from"@mui/icons-material/Edit";import Se from"@mui/icons-material/Check";import Ce from"@mui/icons-material/Public";import Ae from"@mui/icons-material/VpnLock";import Ie from"@mui/icons-material/Group";import{styled as Te,ThemeProvider as Le}from"@mui/system";import Re from"@mui/icons-material/Lock";import{useNavigate as Ue,useLocation as Ne,useSearchParams as ze,Link as We}from"react-router-dom";import Fe from"@mui/icons-material/Storage";import{styled as De}from"@mui/material/styles";import Ve from"@mui/icons-material/PowerSettingsNew";import Be from"@mui/icons-material/AccountCircle";function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Me=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function f(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=p.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var s=u(e[o],e,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(g,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new b(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function He(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$e(a,n,o,i,c,"next",e)}function c(e){$e(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){if(e){if("string"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(e){this.message=e}rt.prototype=new Error,rt.prototype.name="InvalidCharacterError";var nt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new rt("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,i="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?i+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function ot(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(nt(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return nt(t)}}function at(e){this.message=e}function it(e,t){if("string"!=typeof e)throw new at("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(ot(e.split(".")[r]))}catch(e){throw new at("Invalid token specified: "+e.message)}}at.prototype=new Error,at.prototype.name="InvalidTokenError";var ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function st(e,t){return e(t={exports:{}},t.exports),t.exports}var ut,lt,dt=st((function(e){var t,r;t=ct,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(n>0&&(o=o.replace(/^[\/]+/,"")),o=n<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var a=t.join("/"),i=(a=a.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),ft=function(e){return e?Array.isArray(e)?e:[e]:void 0},pt=function(e){var t=new URL(e);return dt(t.origin,"_acl",t.pathname)},mt=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},ht=function(){var e=He(Me().mark((function e(t){var r,n;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=["username","email","password","domain"],gt=function(e){var t,r,n,o,a,i,c,s,u,l,d,f,p=e.dataProvider,m=e.allowAnonymous,h=void 0===m||m,v=e.localAccounts,g=void 0!==v&&v,y=e.checkUser,b=e.checkPermissions,w=void 0!==b&&b;return{login:(f=He(Me().mark((function e(t){var r,n,o,a,i,c,s;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(p);case 2:if(r=e.sent,!g){e.next=20;break}return n=t.username,o=t.password,e.prev=5,e.next=8,p.fetch(dt(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:o.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:a=e.sent,i=a.json,c=i.token,localStorage.setItem("token",c),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:s=new URL(window.location.href).origin+"/login?login=true",t.redirect&&(s+="&redirect="+encodeURIComponent(t.redirect)),window.location.href=dt(r,"auth?redirectUrl="+encodeURIComponent(s));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return f.apply(this,arguments)}),signup:(d=He(Me().mark((function e(t){var r,n,o,a,i,c,s,u,l,d,f;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(p);case 2:if(r=e.sent,!g){e.next=33;break}return n=t.username,o=t.email,a=t.password,t.domain,i=Qe(t,vt),e.prev=5,e.next=8,p.fetch(dt(r,"auth/signup"),{method:"POST",body:JSON.stringify(qe({username:n.trim(),email:o.trim(),password:a.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return c=e.sent,s=c.json,u=s.token,localStorage.setItem("token",u),l=it(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:f=new URL(window.location.href).origin+"/login?login=true",window.location.href=dt(r,"auth?redirectUrl="+encodeURIComponent(f));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=He(Me().mark((function e(){var t,r;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(p);case 2:return t=e.sent,localStorage.clear(),g?(window.location.reload(),window.location.href="/"):(r=new URL(window.location.href).origin,window.location.href=dt(t,h?"auth/logout?redirectUrl="+encodeURIComponent(r+"/login?logout=true"):"auth/logout?redirectUrl="+encodeURIComponent(r+"/login"))),e.abrupt("return","/");case 6:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=He(Me().mark((function e(){return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||h){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!y||y(e)},checkError:function(e){return Promise.resolve()},getPermissions:(s=He(Me().mark((function e(t){var r,n,o;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return");case 2:if("object"!==Ye(t)){e.next=4;break}return e.abrupt("return");case 4:if(t&&t.startsWith("http")){e.next=6;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 6:return r=pt(t),e.prev=7,e.next=10,p.fetch(r);case 10:return n=e.sent,o=n.json,e.abrupt("return",o["@graph"]);case 15:return e.prev=15,e.t0=e.catch(7),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[7,15]])}))),function(e){return s.apply(this,arguments)}),addPermission:(c=He(Me().mark((function e(t,r,n,o){var a,i,c;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=pt(t),Je(a={"@id":"#"+o.replace("acl:",""),"@type":"acl:Authorization"},n,r),Je(a,"acl:accessTo",t),Je(a,"acl:mode",o),c=a,e.next=6,p.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":mt(i),"@graph":[c]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return c.apply(this,arguments)}),removePermission:(i=He(Me().mark((function e(t,r,n,o){var a,i,c,s;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return a=pt(t),e.next=5,p.fetch(a);case 5:return i=e.sent,c=i.json,s=c["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=ft(e["acl:mode"]),a=ft(e[n]);return o&&t.includes(o)&&a&&a.includes(r)&&(a=a.filter((function(e){return e!==r}))),qe(qe({},e),{},Je({},n,a))})),e.next=10,p.fetch(a,{method:"PUT",body:JSON.stringify({"@context":mt(a),"@graph":s})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(a=He(Me().mark((function e(){var t,r,n,o,a,i,c;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=it(t),n=r.webId,e.next=5,p.fetch(n);case 5:if(o=e.sent,!(a=o.json).url){e.next=13;break}return e.next=10,p.fetch(a.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,c=i.json,e.abrupt("return",{id:n,fullName:(null==c?void 0:c["vcard:given-name"])||(null==c?void 0:c["pair:label"])||a["foaf:name"],profileData:c,webIdData:a});case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resetPassword:(o=He(Me().mark((function e(t){var r,n;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,ht(p);case 3:return n=e.sent,e.prev=4,e.next=7,p.fetch(dt(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return o.apply(this,arguments)}),setNewPassword:(n=He(Me().mark((function e(t){var r,n,o,a;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,o=t.password,e.next=3,ht(p);case 3:return a=e.sent,e.prev=4,e.next=7,p.fetch(dt(a,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("app.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=He(Me().mark((function e(t){var r,n,o;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(p);case 2:return r=e.sent,e.prev=3,e.next=6,p.fetch(dt(r,"auth/account"));case 6:return n=e.sent,o=n.json,e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("app.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=He(Me().mark((function e(t){var r,n,o,a;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(p);case 2:return r=e.sent,e.prev=3,n=t.email,o=t.currentPassword,a=t.newPassword,e.next=7,p.fetch(dt(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:o,email:n.trim(),newPassword:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("app.notification.invalid_password");case 13:throw new Error("app.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},yt="acl:agentClass",bt=["acl:Append","acl:Write","acl:Control"],wt=["acl:Append","acl:Write","acl:Control"],_t=["acl:Write","acl:Control"],Et=["acl:Control"],xt={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:bt,edit:wt,delete:_t,control:Et},jt={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},kt=(Je(ut={},"acl:Read","auth.right.resource.read"),Je(ut,"acl:Append","auth.right.resource.append"),Je(ut,"acl:Write","auth.right.resource.write"),Je(ut,"acl:Control","auth.right.resource.control"),ut),Ot=(Je(lt={},"acl:Read","auth.right.container.read"),Je(lt,"acl:Write","auth.right.container.write"),Je(lt,"acl:Control","auth.right.container.control"),lt),Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",o=c(),a=o.identity,i=o.isLoading,d=s(e),f=d.permissions,p=u(),m=l();return r((function(){!i&&a&&f&&!f.some((function(e){return xt[t].includes(e["acl:mode"])}))&&(p(jt[t],{type:"error"}),m(n))}),[f,a,m,p,i]),f},St=function(e){var r=K(e.resource);return Pt(r,"create"),t.createElement(d,e)};St.defaultProps={actions:t.createElement(f,null)};var Ct=je((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),At=function(e){var o=e.agents,a=e.addPermission,i=Ct(),c=p(),s=Xe(n(null),2),u=s[0],l=s[1],d=Xe(n(""),2),f=d[0],h=d[1],v=Xe(n([]),2),g=v[0],y=v[1],b=m("Person",{pagination:{page:1,perPage:100},sort:{field:"pair:label",order:"ASC"},filter:{q:f}},{enabled:f.length>0}).data;return console.log("inputvalue",f,b),r((function(){y((null==b?void 0:b.length)>0?Object.values(b):[])}),[b]),t.createElement(ke,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(o).includes(e.id)}))},options:g,noOptionsText:c("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){a(t.id||t["@id"],"acl:agent","acl:Read"),l(null),h(""),y([])},onInputChange:function(e,t){h(t)},renderInput:function(e){return t.createElement(X,Ke({},e,{label:c("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e,r){return t.createElement(Z,Ke({dense:!0,className:i.list},e),t.createElement(ee,{button:!0},t.createElement(te,null,t.createElement(re,{src:r.image},t.createElement(Oe,null))),t.createElement(ne,{primary:r["pair:label"]})))}})},It=function(e){var r=e.agent;switch(r.predicate){case yt:return"foaf:Agent"===r.id?t.createElement(Ce,null):t.createElement(Ae,null);case"acl:agent":return t.createElement(Oe,null);case"acl:agentGroup":return t.createElement(Ie,null);default:throw new Error("Unknown agent predicate: "+r.predicate)}},Tt=je((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),Lt=function(e){var o=e.isContainer,a=e.agent,i=e.addPermission,c=e.removePermission,s=Tt(),u=p(),l=h(),d=Xe(t.useState(null),2),f=d[0],m=d[1],y=Xe(n(),2),b=y[0],w=y[1],_=Xe(n(!0),2),E=_[0],x=_[1],j=Xe(n(),2),k=j[0],O=j[1];if(r((function(){"acl:agent"===a.predicate?l.getOne("Person",{id:a.id}).then((function(e){var t=e.data;w(t),x(!1)})).catch((function(e){O(e),x(!1)})):x(!1)}),[a.id,a.predicate]),"acl:agentGroup"===a.predicate)return null;var P=function(){return m(null)},S=o?Ot:kt;return E?t.createElement(v,null):k?t.createElement(g,null):t.createElement(ee,{className:s.listItem},t.createElement(te,null,t.createElement(re,{src:null==b?void 0:b.image},t.createElement(It,{agent:a}))),t.createElement(ne,{className:s.primaryText,primary:b?b["pair:label"]:u("foaf:Agent"===a.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(ne,{className:s.secondaryText,primary:a.permissions&&a.permissions.map((function(e){return u(S[e])})).join(", ")}),t.createElement(oe,null,t.createElement(ae,{onClick:function(e){return m(e.currentTarget)},size:"large"},t.createElement(Pe,null)),t.createElement(ie,{anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:P},Object.entries(S).map((function(e){var r=Xe(e,2),n=r[0],o=r[1],s=a.permissions&&a.permissions.includes(n);return t.createElement(ce,{key:n,onClick:function(){s?c(a.id,a.predicate,n):i(a.id,a.predicate,n),P()}},t.createElement(se,null,s?t.createElement(Se,null):null),t.createElement(ne,{primary:u(o)}))})))))},Rt=Te(Z)((function(){return{width:"100%",maxWidth:"100%",backgroundColor:Xe(y(),1)[0].palette.background.paper}})),Ut=function(e){var r=e.isContainer,n=e.agents,o=e.addPermission,a=e.removePermission;return t.createElement(Rt,{dense:!0},Object.entries(n).map((function(e){var n=Xe(e,2),i=n[0],c=n[1];return t.createElement(Lt,{key:i,isContainer:r,agent:c,addPermission:o,removePermission:a})})))},Nt=function(e){var t=s(e).permissions,a=b(),i=Xe(n({}),2),c=i[0],u=i[1];r((function(){var e,r=(Je(e={},"foaf:Agent",{id:"foaf:Agent",predicate:yt,permissions:[]}),Je(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:yt,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var o,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=et(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{var i=function(){var e=o.value;e[yt]&&ft(e[yt]).forEach((function(t){return n(t,yt,e["acl:mode"])})),e["acl:agent"]&&ft(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&ft(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(a.s();!(o=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}u(r)}}),[t]);var l=o((function(t,r,n){var o,i=qe({},c);u(qe(qe({},c),{},Je({},t,{id:t,predicate:r,permissions:c[t]?[].concat(Ze(null===(o=c[t])||void 0===o?void 0:o.permissions),[n]):[n]}))),a.addPermission(e,t,r,n).catch((function(e){u(i)}))}),[c,u,e,a]),d=o((function(t,r,n){var o=qe({},c);u(Object.fromEntries(Object.entries(c).map((function(e){var r=Xe(e,2),o=r[0],a=r[1];return a.id===t&&(a.permissions=a.permissions.filter((function(e){return e!==n}))),[o,a]})).filter((function(e){var t=Xe(e,2);t[0];var r=t[1];return r.predicate===yt||r.permissions.length>0})))),a.removePermission(e,t,r,n).catch((function(e){u(o)}))}),[c,u,e,a]);return{agents:c,addPermission:l,removePermission:d}},zt=je((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Wt=function(e){var r=e.open,n=e.onClose,o=e.uri,a=e.isContainer,i=zt(),c=p(),s=Nt(o),u=s.agents,l=s.addPermission,d=s.removePermission;return t.createElement(ue,{fullWidth:!0,open:r,onClose:n},t.createElement(le,{className:i.title},c(a?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(de,{className:i.addForm},t.createElement(At,{agents:u,addPermission:l})),t.createElement(de,{className:i.listForm},t.createElement(Ut,{isContainer:a,agents:u,addPermission:l,removePermission:d})),t.createElement(fe,{className:i.actions},t.createElement(w,{label:"ra.action.close",variant:"text",onClick:n})))},Ft=function(e){var r=e.record,o=e.resource,a=Xe(n(!1),2),i=a[0],c=a[1],s=K(o),u=!!o,l=u?s:r.id||r["@id"];return t.createElement(t.Fragment,null,t.createElement(w,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(Q,null)),t.createElement(Wt,{uri:l,isContainer:!!u,open:i,onClose:function(){return c(!1)}}))},Dt=function(e){var r=e.record,n=_(),o=n.hasList,a=n.hasShow,i=E(null==r?void 0:r.id).permissions;return t.createElement(x,null,o&&t.createElement(j,{record:r}),a&&t.createElement(k,{record:r}),!!i&&i.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,{record:r}))},Vt=function(e){var r=O(),n=E(null==r?void 0:r.id).permissions;return n&&n.some((function(e){return _t.includes(e["acl:mode"])}))?t.createElement(P,e):null},Bt=je((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),Gt=function(e){var r=Bt();return t.createElement(S,Ke({},e,{className:r.toolbar}),t.createElement(C,null),t.createElement(Vt,{mutationMode:"undoable"}))},qt=function(e){return Pt(e.id,"edit"),t.createElement(A,e,t.cloneElement(e.children,qe({toolbar:t.createElement(Gt,null)},e.children.props)))};qt.defaultProps={actions:t.createElement(Dt,null)};var Mt=["bulkActions","sort","displayedFilters","exporter","filters","filterValues","onUnselectItems","resource","selectedIds","showFilter","total"],Yt=function(e){var r=e.bulkActions,n=e.sort,o=e.displayedFilters,a=e.exporter,i=e.filters,c=e.filterValues,s=e.onUnselectItems,u=e.resource,l=e.selectedIds,d=e.showFilter,f=e.total,p=Qe(e,Mt),m=Xe(y(),1)[0],h=pe((function(){return m.breakpoints.down("sm")})),v=_(p),g=K(u),b=E(g).permissions;return t.createElement(x,null,i&&t.cloneElement(i,{resource:u,showFilter:d,displayedFilters:o,filterValues:c,context:"button"}),v.hasCreate&&b&&b.some((function(e){return bt.includes(e["acl:mode"])}))&&t.createElement(I,null),b&&b.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,{record:g}),!h&&!1!==a&&t.createElement(T,{disabled:0===f,resource:u,sort:n,filter:c,exporter:a}),r&&t.cloneElement(r,{filterValues:c,resource:u,selectedIds:l,onUnselectItems:s}))},$t=function(e){return t.createElement(L,e)};$t.defaultProps={actions:t.createElement(Yt,null)};var Ht=function(){var e=_(),r=e.hasList,n=e.hasEdit,o=O(),a=s(null==o?void 0:o.id).permissions;return t.createElement(x,null,r&&t.createElement(j,{record:o}),n&&a&&a.some((function(e){return wt.includes(e["acl:mode"])}))&&t.createElement(R,{record:o}),a&&a.some((function(e){return Et.includes(e["acl:mode"])}))&&t.createElement(Ft,{record:o}))},Jt=function(e){return Pt(e.id,"edit"),t.createElement(U,e)};Jt.defaultProps={actions:t.createElement(Ht,null)};var Kt=["open","onClose","title","message","redirect"],Qt=function(e){var r=e.open,n=e.onClose,o=e.title,a=e.message,i=e.redirect,c=Qe(e,Kt),s=N(),u=p();return t.createElement(ue,Ke({open:r,onClose:n},c),t.createElement(le,null,u(o)),t.createElement(de,null,t.createElement(me,null,u(a))),t.createElement(fe,null,t.createElement(he,{onClick:n},u("ra.action.cancel")),t.createElement(he,{onClick:function(){return s({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};Qt.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var Xt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Zt=Te("main")((function(e){return{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",backgroundColor:e.theme.palette.grey[300]}}));Te("main")((function(e){return e.theme,{maxWidth:300,textAlign:"center",padding:"4px 8px 8px"}}));var er=Te(ve)((function(e){return e.theme,{minWidth:300,marginTop:"6em"}})),tr=Te("div")((function(e){return e.theme,{margin:"1em",display:"flex",justifyContent:"center"}})),rr=Te(re)((function(e){return{backgroundColor:e.theme.palette.grey[500]}})),nr=function(e){var n=e.buttons,o=e.userResource,a=e.propertiesExist,i=e.text,c=u(),s=N(),l=h(),d=b(),f=Xe(y(),1)[0],p=Ue(),m=Ne();return r((function(){He(Me().mark((function e(){var t;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=new URLSearchParams(m.search)).has("login")){e.next=8;break}if(!t.has("error")){e.next=6;break}"registration.not-allowed"===t.get("error")?c("auth.message.user_email_not_found",{type:"error"}):c("auth.message.bad_request",{type:"error",error:t.get("error")}),e.next=8;break;case 6:if(!t.has("token")){e.next=8;break}return e.delegateYield(Me().mark((function e(){var r,n,i,s,u,f,m;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get("token"),n=it(r),i=n.webId,localStorage.setItem("token",r),e.next=5,l.getOne(o,{id:i});case 5:if(u=e.sent,s=u.data,!(a.length>0)){e.next=20;break}f=a.every((function(e){return s[e]}));case 9:if(f){e.next=20;break}return console.log("Waiting for all properties to have been created",a),e.next=13,Xt(500);case 13:return e.next=15,l.getOne(o,{id:i});case 15:m=e.sent,s=m.data,f=a.every((function(e){return s[e]})),e.next=9;break;case 20:d.checkUser(s)?t.has("redirect")?(c("auth.message.user_connected",{type:"info"}),p(t.get("redirect"))):t.has("new")&&"true"===t.get("new")?(c("auth.message.new_user_created",{type:"info"}),p("/"+o+"/"+encodeURIComponent(i)+"/edit")):(c("auth.message.user_connected",{type:"info"}),p("/")):(localStorage.removeItem("token"),c("auth.message.user_not_allowed_to_login",{type:"error"}),p.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:t.has("logout")&&(localStorage.clear(),c("auth.message.user_disconnected",{type:"info"}),p("/"));case 9:case"end":return e.stop()}}),e)})))()}),[m.search]),t.createElement(ge,{injectFirst:!0},t.createElement(Le,{theme:f},t.createElement(Zt,null,t.createElement(er,null,t.createElement(tr,null,t.createElement(rr,null,t.createElement(Re,null))),i&&t.createElement(ye,{variant:"body2"},i),n&&n.map((function(e,r){return t.createElement(be,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return s({},"/login")}}))})))),t.createElement(z,null)))};nr.defaultProps={propertiesExist:[],buttons:[t.createElement(he,{startIcon:t.createElement(re,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var or=je((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:Je({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),ar=function(e){var o=e.history,a=e.location,i=e.text,c=e.customPodProviders,s=or(),l=u(),d=W(),f=p(),m=b(),v=h(),g=Xe(n(c||[]),2),y=g[0],w=g[1],_=new URLSearchParams(a.search);return r((function(){He(Me().mark((function e(){var t,r,n;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==y.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),w(n),e.next=13;break;case 12:l("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[y,w,l,d]),r((function(){He(Me().mark((function e(){var t,r,n,a,i;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=it(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((a=e.sent).ok){e.next=10;break}l("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,a.json();case 12:i=e.sent,m.checkUser(i)?(localStorage.setItem("token",t),l("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(l("auth.message.user_not_allowed_to_login","error"),o.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),l("auth.message.user_disconnected","info"),o.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,v]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(we,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(ve,{className:s.card},t.createElement("div",{className:s.lockIconAvatar},t.createElement(re,{className:s.lockIcon},t.createElement(Re,null))),t.createElement(we,{pl:2,pr:2},t.createElement(ye,{variant:"body2",className:s.text},i||f("auth.message.choose_pod_provider"))),t.createElement(we,{m:2},t.createElement(Z,{className:s.list},y.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(_e,null),t.createElement(ee,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:s.listItem},t.createElement(te,null,t.createElement(re,null,t.createElement(Fe,null))),t.createElement(ne,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},ir=function(e){var r=Xe(y(),1)[0];return t.createElement(ge,{injectFirst:!0},t.createElement(Le,{theme:r},t.createElement(ar,e),t.createElement(z,null)))};function cr(){}function sr(){}sr.resetWarningCache=cr;var ur=function(){function e(e,t,r,n,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:sr,resetWarningCache:cr};return r.PropTypes=r,r},lr=st((function(e){e.exports=ur()})),dr=function(){var e=b();return o((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},fr=je((function(e){return{content:{width:300},button:{marginTop:e.spacing(2)},icon:{margin:e.spacing(.3)}}})),pr=function(t){var r=t.redirectTo,n=t.delayBeforeRedirect,o=Xe(F(!1),2),a=o[0],i=o[1],c=dr(),s=p(),l=u(),d=fr(),f=Ne(),m=new URLSearchParams(f.search);return e.createElement(D,{onSubmit:function(e){i(!0),c(e).then((function(e){n?setTimeout((function(){window.location.reload(),window.location.href=r||"/",i(!1)}),n):(window.location.reload(),window.location.href=r||"/",i(!1)),l("auth.message.new_user_created",{type:"info"})})).catch((function(e){i(!1),l("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},noValidate:!0,defaultValues:{email:m.get("email")}},e.createElement(Ee,{className:d.content},e.createElement(V,{autoFocus:!0,source:"username",label:s("auth.input.username"),autoComplete:"username",fullWidth:!0,disabled:a,validate:B()}),e.createElement(V,{source:"email",label:s("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:a||m.has("email")&&m.has("force-email"),validate:[B(),G()]}),e.createElement(V,{source:"password",type:"password",label:s("ra.auth.password"),autoComplete:"new-password",fullWidth:!0,disabled:a||m.has("email")&&m.has("force-email"),validate:B()}),e.createElement(he,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:d.button},a?e.createElement(xe,{className:d.icon,size:19,thickness:3}):s("auth.action.signup"))))};pr.propTypes={redirectTo:lr.string};var mr=["children","backgroundImage"],hr=function(e){e.children;var n=e.backgroundImage,o=Qe(e,mr),i=a(),s=!1,u=Ue(),l=p(),d=Xe(ze(),1)[0],f=d.has("signup"),m=d.get("redirect"),h=c(),v=h.identity,g=h.isLoading;r((function(){!g&&null!=v&&v.id&&u(m||"/")}),[v,g,u,m]);var y=function(){!s&&i.current&&(i.current.style.backgroundImage="url(".concat(n,")"),s=!0)};return r((function(){s||function(){if(n){var e=new Image;e.onload=y,e.src=n}}()})),g?null:t.createElement(yr,Ke({},o,{ref:i}),t.createElement(ve,{className:gr.card},t.createElement("div",{className:gr.avatar},t.createElement(re,{className:gr.icon},t.createElement(Re,null))),f?t.createElement(pr,{redirectTo:m,delayBeforeRedirect:3e3}):t.createElement(q,{redirectTo:m}),t.createElement("div",{className:gr.switch},f?t.createElement(We,{to:"/login"},t.createElement(ye,{variant:"body2"},l("auth.action.login"))):t.createElement(We,{to:"/login?signup=true"},t.createElement(ye,{variant:"body2"},l("auth.action.signup"))))))},vr="LocalLoginPage",gr={card:"".concat(vr,"-card"),avatar:"".concat(vr,"-avatar"),icon:"".concat(vr,"-icon"),switch:"".concat(vr,"-switch")},yr=De("div",{name:vr,overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme;return Je(t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},"& .".concat(gr.card),{minWidth:300,marginTop:"6em"}),Je(t,"& .".concat(gr.avatar),{margin:"1em",display:"flex",justifyContent:"center"}),Je(t,"& .".concat(gr.icon),{backgroundColor:r.palette.secondary[500]}),Je(t,"& .".concat(gr.switch),{marginBottom:"1em",display:"flex",justifyContent:"center"}),t})),br=Te("div")((function(e){return{minWidth:e.theme.spacing(5)}})),wr=Te("div")((function(e){var t=e.theme;return{color:t.palette.text?t.palette.text.secondary:"unset","&:active":{color:t.palette.text?t.palette.text.primary:"unset"}}})),_r=i((function(e,r){var n=M(),o=p();return t.createElement(wr,null,t.createElement(ce,{onClick:function(){return n()},ref:r},t.createElement(br,null,t.createElement(se,null,t.createElement(Ve,null))),o("auth.action.logout")))})),Er=["name","create"],xr=function(e){var r=e.name,n=e.create,o=Qe(e,Er),a=K(r),i=s(a).permissions;return t.createElement(Y,Ke({},o,{name:r,create:i&&i.some((function(e){return bt.includes(e["acl:mode"])}))?n:void 0}))},jr=["logout","profileResource"],kr=i((function(e,r){var n=e.onClick,o=e.profileResource,a=e.label,i=e.webId;return t.createElement(H,{ref:r,to:"/".concat(o,"/").concat(encodeURIComponent(i),"/show"),primaryText:a,leftIcon:t.createElement(Be,null),onClick:n})})),Or=i((function(e,r){var n=e.onClick,o=e.profileResource,a=e.label,i=e.webId;return t.createElement(H,{ref:r,to:"/".concat(o,"/").concat(encodeURIComponent(i)),primaryText:a,leftIcon:t.createElement(Pe,null),onClick:n})})),Pr=i((function(e,r){var n=e.onClick,o=e.label;return t.createElement(H,{ref:r,to:"/login",primaryText:o,onClick:n})})),Sr=i((function(e,r){var n=e.onClick,o=e.label;return t.createElement(H,{ref:r,to:"/login?signup=true",primaryText:o,onClick:n})})),Cr=function(e){var r,n,o=e.logout,a=e.profileResource,i=Qe(e,jr),s=c().identity,u=p();return t.createElement($,i,s&&""!==s.id?[t.createElement(kr,{webId:(null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id,label:u("auth.action.view_my_profile"),profileResource:a,key:"view"}),t.createElement(Or,{webId:(null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id,label:u("auth.action.edit_my_profile"),profileResource:a,key:"edit"}),t.cloneElement(o,{key:"logout"})]:[t.createElement(Sr,{label:u("auth.action.signup"),key:"signup"}),t.createElement(Pr,{label:u("auth.action.login"),key:"login"})])};Cr.defaultProps={logout:t.createElement(_r,null),profileResource:"Person"};var Ar=function(e){var t=c(),n=t.identity,o=t.isLoading,a=u(),i=l(),s=Ne();return r((function(){o||null!=n&&n.id||(a(e||"ra.auth.auth_check_error",{type:"error"}),i("/login?redirect="+encodeURIComponent(s.pathname+s.search)))}),[o,n,i,a,s]),{identity:n,isLoading:o}};var Ir=function(){this.__data__=[],this.size=0};var Tr=function(e,t){return e===t||e!=e&&t!=t};var Lr=function(e,t){for(var r=e.length;r--;)if(Tr(e[r][0],t))return r;return-1},Rr=Array.prototype.splice;var Ur=function(e){var t=this.__data__,r=Lr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Rr.call(t,r,1),--this.size,!0)};var Nr=function(e){var t=this.__data__,r=Lr(t,e);return r<0?void 0:t[r][1]};var zr=function(e){return Lr(this.__data__,e)>-1};var Wr=function(e,t){var r=this.__data__,n=Lr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fr.prototype.clear=Ir,Fr.prototype.delete=Ur,Fr.prototype.get=Nr,Fr.prototype.has=zr,Fr.prototype.set=Wr;var Dr=Fr;var Vr=function(){this.__data__=new Dr,this.size=0};var Br=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Gr=function(e){return this.__data__.get(e)};var qr=function(e){return this.__data__.has(e)},Mr="object"==typeof ct&&ct&&ct.Object===Object&&ct,Yr="object"==typeof self&&self&&self.Object===Object&&self,$r=Mr||Yr||Function("return this")(),Hr=$r.Symbol,Jr=Object.prototype,Kr=Jr.hasOwnProperty,Qr=Jr.toString,Xr=Hr?Hr.toStringTag:void 0;var Zr=function(e){var t=Kr.call(e,Xr),r=e[Xr];try{e[Xr]=void 0;var n=!0}catch(e){}var o=Qr.call(e);return n&&(t?e[Xr]=r:delete e[Xr]),o},en=Object.prototype.toString;var tn=function(e){return en.call(e)},rn=Hr?Hr.toStringTag:void 0;var nn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rn&&rn in Object(e)?Zr(e):tn(e)};var on=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var an,cn=function(e){if(!on(e))return!1;var t=nn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},sn=$r["__core-js_shared__"],un=(an=/[^.]+$/.exec(sn&&sn.keys&&sn.keys.IE_PROTO||""))?"Symbol(src)_1."+an:"";var ln=function(e){return!!un&&un in e},dn=Function.prototype.toString;var fn=function(e){if(null!=e){try{return dn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},pn=/^\[object .+?Constructor\]$/,mn=Function.prototype,hn=Object.prototype,vn=mn.toString,gn=hn.hasOwnProperty,yn=RegExp("^"+vn.call(gn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var bn=function(e){return!(!on(e)||ln(e))&&(cn(e)?yn:pn).test(fn(e))};var wn=function(e,t){return null==e?void 0:e[t]};var _n=function(e,t){var r=wn(e,t);return bn(r)?r:void 0},En=_n($r,"Map"),xn=_n(Object,"create");var jn=function(){this.__data__=xn?xn(null):{},this.size=0};var kn=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},On=Object.prototype.hasOwnProperty;var Pn=function(e){var t=this.__data__;if(xn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return On.call(t,e)?t[e]:void 0},Sn=Object.prototype.hasOwnProperty;var Cn=function(e){var t=this.__data__;return xn?void 0!==t[e]:Sn.call(t,e)};var An=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xn&&void 0===t?"__lodash_hash_undefined__":t,this};function In(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}In.prototype.clear=jn,In.prototype.delete=kn,In.prototype.get=Pn,In.prototype.has=Cn,In.prototype.set=An;var Tn=In;var Ln=function(){this.size=0,this.__data__={hash:new Tn,map:new(En||Dr),string:new Tn}};var Rn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Un=function(e,t){var r=e.__data__;return Rn(t)?r["string"==typeof t?"string":"hash"]:r.map};var Nn=function(e){var t=Un(this,e).delete(e);return this.size-=t?1:0,t};var zn=function(e){return Un(this,e).get(e)};var Wn=function(e){return Un(this,e).has(e)};var Fn=function(e,t){var r=Un(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Dn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Dn.prototype.clear=Ln,Dn.prototype.delete=Nn,Dn.prototype.get=zn,Dn.prototype.has=Wn,Dn.prototype.set=Fn;var Vn=Dn;var Bn=function(e,t){var r=this.__data__;if(r instanceof Dr){var n=r.__data__;if(!En||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Vn(n)}return r.set(e,t),this.size=r.size,this};function Gn(e){var t=this.__data__=new Dr(e);this.size=t.size}Gn.prototype.clear=Vr,Gn.prototype.delete=Br,Gn.prototype.get=Gr,Gn.prototype.has=qr,Gn.prototype.set=Bn;var qn=Gn;var Mn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Yn=function(e){return this.__data__.has(e)};function $n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Vn;++t<r;)this.add(e[t])}$n.prototype.add=$n.prototype.push=Mn,$n.prototype.has=Yn;var Hn=$n;var Jn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var Kn=function(e,t){return e.has(t)};var Qn=function(e,t,r,n,o,a){var i=1&r,c=e.length,s=t.length;if(c!=s&&!(i&&s>c))return!1;var u=a.get(e),l=a.get(t);if(u&&l)return u==t&&l==e;var d=-1,f=!0,p=2&r?new Hn:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var m=e[d],h=t[d];if(n)var v=i?n(h,m,d,t,e,a):n(m,h,d,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!Jn(t,(function(e,t){if(!Kn(p,t)&&(m===e||o(m,e,r,n,a)))return p.push(t)}))){f=!1;break}}else if(m!==h&&!o(m,h,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f},Xn=$r.Uint8Array;var Zn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var eo=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},to=Hr?Hr.prototype:void 0,ro=to?to.valueOf:void 0;var no=function(e,t,r,n,o,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Xn(e),new Xn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Tr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=Zn;case"[object Set]":var s=1&n;if(c||(c=eo),e.size!=t.size&&!s)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=Qn(c(e),c(t),n,o,a,i);return i.delete(e),l;case"[object Symbol]":if(ro)return ro.call(e)==ro.call(t)}return!1};var oo=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},ao=Array.isArray;var io=function(e,t,r){var n=t(e);return ao(e)?n:oo(n,r(e))};var co=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var so=function(){return[]},uo=Object.prototype.propertyIsEnumerable,lo=Object.getOwnPropertySymbols,fo=lo?function(e){return null==e?[]:(e=Object(e),co(lo(e),(function(t){return uo.call(e,t)})))}:so;var po=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var mo=function(e){return null!=e&&"object"==typeof e};var ho=function(e){return mo(e)&&"[object Arguments]"==nn(e)},vo=Object.prototype,go=vo.hasOwnProperty,yo=vo.propertyIsEnumerable,bo=ho(function(){return arguments}())?ho:function(e){return mo(e)&&go.call(e,"callee")&&!yo.call(e,"callee")};var wo=function(){return!1},_o=st((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?$r.Buffer:void 0,a=(o?o.isBuffer:void 0)||wo;e.exports=a})),Eo=/^(?:0|[1-9]\d*)$/;var xo=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Eo.test(e))&&e>-1&&e%1==0&&e<t};var jo=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ko={};ko["[object Float32Array]"]=ko["[object Float64Array]"]=ko["[object Int8Array]"]=ko["[object Int16Array]"]=ko["[object Int32Array]"]=ko["[object Uint8Array]"]=ko["[object Uint8ClampedArray]"]=ko["[object Uint16Array]"]=ko["[object Uint32Array]"]=!0,ko["[object Arguments]"]=ko["[object Array]"]=ko["[object ArrayBuffer]"]=ko["[object Boolean]"]=ko["[object DataView]"]=ko["[object Date]"]=ko["[object Error]"]=ko["[object Function]"]=ko["[object Map]"]=ko["[object Number]"]=ko["[object Object]"]=ko["[object RegExp]"]=ko["[object Set]"]=ko["[object String]"]=ko["[object WeakMap]"]=!1;var Oo=function(e){return mo(e)&&jo(e.length)&&!!ko[nn(e)]};var Po=function(e){return function(t){return e(t)}},So=st((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Mr.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a})),Co=So&&So.isTypedArray,Ao=Co?Po(Co):Oo,Io=Object.prototype.hasOwnProperty;var To=function(e,t){var r=ao(e),n=!r&&bo(e),o=!r&&!n&&_o(e),a=!r&&!n&&!o&&Ao(e),i=r||n||o||a,c=i?po(e.length,String):[],s=c.length;for(var u in e)!t&&!Io.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xo(u,s))||c.push(u);return c},Lo=Object.prototype;var Ro=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Lo)};var Uo=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),No=Object.prototype.hasOwnProperty;var zo=function(e){if(!Ro(e))return Uo(e);var t=[];for(var r in Object(e))No.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Wo=function(e){return null!=e&&jo(e.length)&&!cn(e)};var Fo=function(e){return Wo(e)?To(e):zo(e)};var Do=function(e){return io(e,Fo,fo)},Vo=Object.prototype.hasOwnProperty;var Bo=function(e,t,r,n,o,a){var i=1&r,c=Do(e),s=c.length;if(s!=Do(t).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in t:Vo.call(t,l)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=i;++u<s;){var h=e[l=c[u]],v=t[l];if(n)var g=i?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===g?h===v||o(h,v,r,n,a):g)){p=!1;break}m||(m="constructor"==l)}if(p&&!m){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p},Go=_n($r,"DataView"),qo=_n($r,"Promise"),Mo=_n($r,"Set"),Yo=_n($r,"WeakMap"),$o=fn(Go),Ho=fn(En),Jo=fn(qo),Ko=fn(Mo),Qo=fn(Yo),Xo=nn;(Go&&"[object DataView]"!=Xo(new Go(new ArrayBuffer(1)))||En&&"[object Map]"!=Xo(new En)||qo&&"[object Promise]"!=Xo(qo.resolve())||Mo&&"[object Set]"!=Xo(new Mo)||Yo&&"[object WeakMap]"!=Xo(new Yo))&&(Xo=function(e){var t=nn(e),r="[object Object]"==t?e.constructor:void 0,n=r?fn(r):"";if(n)switch(n){case $o:return"[object DataView]";case Ho:return"[object Map]";case Jo:return"[object Promise]";case Ko:return"[object Set]";case Qo:return"[object WeakMap]"}return t});var Zo=Xo,ea="[object Object]",ta=Object.prototype.hasOwnProperty;var ra=function(e,t,r,n,o,a){var i=ao(e),c=ao(t),s=i?"[object Array]":Zo(e),u=c?"[object Array]":Zo(t),l=(s="[object Arguments]"==s?ea:s)==ea,d=(u="[object Arguments]"==u?ea:u)==ea,f=s==u;if(f&&_o(e)){if(!_o(t))return!1;i=!0,l=!1}if(f&&!l)return a||(a=new qn),i||Ao(e)?Qn(e,t,r,n,o,a):no(e,t,s,r,n,o,a);if(!(1&r)){var p=l&&ta.call(e,"__wrapped__"),m=d&&ta.call(t,"__wrapped__");if(p||m){var h=p?e.value():e,v=m?t.value():t;return a||(a=new qn),o(h,v,r,n,a)}}return!!f&&(a||(a=new qn),Bo(e,t,r,n,o,a))};var na=function e(t,r,n,o,a){return t===r||(null==t||null==r||!mo(t)&&!mo(r)?t!=t&&r!=r:ra(t,r,n,o,e,a))};var oa=function(e,t){return na(e,t)},aa={},ia={"{}":void 0},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=JSON.stringify(e),n=F({permissions:ia[t]}),a=Xe(n,2),i=a[0],c=a[1],s=J(),u=o((function(){return s(e).then((function(e){oa(e,i.permissions)||(ia[t]=e,c({permissions:e}))})).catch((function(e){c({error:e})}))}),[t,e,s]);return r((function(){u()}),[t]),qe(qe({},i),{},{refetch:u})},sa={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."}}},ua={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",logout:"Se déconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"Éditer mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connectés"},input:{agent_select:"Ajouter un utilisateur...",name:"Prénom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'éditer cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de créer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouvé avec cette adresse mail",user_email_exist:"Un compte existe déjà avec cette adresse mail",username_exist:"Un compte existe déjà avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autorisés",new_user_created:"Votre compte a été créé avec succès",user_connected:"Vous êtes maintenant connecté",user_disconnected:"Vous êtes maintenant déconnecté",bad_request:"Requête erronée (Message d'erreur renvoyé par le serveur: %{error})",account_settings_updated:"Les paramètres de votre compte ont été mis à jour avec succès",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les données de l'application seront enregistrées sur votre POD."}}};export{Qt as AuthDialog,St as CreateWithPermissions,Vt as DeleteButtonWithPermissions,Dt as EditActionsWithPermissions,Gt as EditToolbarWithPermissions,qt as EditWithPermissions,Yt as ListActionsWithPermissions,$t as ListWithPermissions,hr as LocalLoginPage,nr as LoginPage,_r as LogoutButton,Ft as PermissionsButton,ir as PodLoginPage,xr as ResourceWithPermissions,Ht as ShowActionsWithPermissions,Jt as ShowWithPermissions,nr as SsoLoginPage,Cr as UserMenu,gt as authProvider,sa as englishMessages,ua as frenchMessages,Nt as useAgents,Ar as useCheckAuthenticated,Pt as useCheckPermissions,ca as usePermissionsWithRefetch,dr as useSignup};
//# sourceMappingURL=index.es.js.map
