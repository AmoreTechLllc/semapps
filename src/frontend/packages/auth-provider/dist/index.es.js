import*as e from"react";import t,{useEffect as r,useState as n,useCallback as a,useRef as o,useMemo as i,forwardRef as s}from"react";import{useGetIdentity as c,usePermissions as u,useNotify as l,useRedirect as d,useResourceContext as p,Create as m,CreateActions as f,useTranslate as h,useGetList as g,useDataProvider as v,Loading as y,Error as w,useAuthProvider as b,Button as _,useRecordContext as E,useResourceDefinition as k,usePermissionsOptimized as x,TopToolbar as j,ListButton as O,ShowButton as S,useGetRecordId as A,DeleteButton as C,Toolbar as P,SaveButton as I,Edit as z,EditButton as L,CreateButton as U,ExportButton as N,List as R,Show as T,useLogin as W,useLocale as D,Notification as F,useSafeSetState as V,useLocaleState as Y,Form as G,TextInput as q,required as B,email as M,Resource as $,UserMenu as Z,Logout as H,useUserMenu as K,useGetPermissions as J}from"react-admin";import{useCreateContainer as X}from"@semapps/semantic-data-provider";import Q from"@mui/icons-material/Share";import{TextField as ee,List as te,ListItem as re,ListItemAvatar as ne,Avatar as ae,ListItemText as oe,ListItemSecondaryAction as ie,IconButton as se,Menu as ce,MenuItem as ue,ListItemIcon as le,Dialog as de,DialogTitle as pe,DialogContent as me,DialogActions as fe,useMediaQuery as he,DialogContentText as ge,Button as ve,Card as ye,Typography as we,CardActions as be,Box as _e,Divider as Ee,StyledEngineProvider as ke,CardContent as xe,CircularProgress as je}from"@mui/material";import Oe from"@mui/styles/makeStyles";import Se from"@mui/material/Autocomplete";import Ae from"@mui/icons-material/Person";import Ce from"@mui/icons-material/Edit";import Pe from"@mui/icons-material/Check";import Ie from"@mui/icons-material/Public";import ze from"@mui/icons-material/VpnLock";import Le from"@mui/icons-material/Group";import{styled as Ue,ThemeProvider as Ne}from"@mui/system";import{useNavigate as Re,useSearchParams as Te,useLocation as We,Link as De}from"react-router-dom";import{styled as Fe}from"@mui/material/styles";import Ve from"@mui/icons-material/Lock";import Ye from"@mui/icons-material/Storage";import{useSignup as Ge}from"@semapps/auth-provider";import qe from"@mui/icons-material/AccountCircle";function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
$e=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=b(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function p(){}function m(){}var f={};s(f,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(x([])));g&&g!==t&&r.call(g,a)&&(f=g);var v=m.prototype=d.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,s){var c=u(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=m,s(v,"constructor",m),s(m,"constructor",p),p.displayName=s(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(v),s(v,i,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function Ke(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){He(o,n,a,i,s,"next",e)}function s(e){He(o,n,a,i,s,"throw",e)}i(void 0)}))}}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(){return(Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function at(e){this.message=e}at.prototype=new Error,at.prototype.name="InvalidCharacterError";var ot="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new at("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,a=0,o=0,i="";n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function it(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ot(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return ot(t)}}function st(e){this.message=e}function ct(e,t){if("string"!=typeof e)throw new st("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(it(e.split(".")[r]))}catch(e){throw new st("Invalid token specified: "+e.message)}}st.prototype=new Error,st.prototype.name="InvalidTokenError";var ut="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function lt(e,t){return e(t={exports:{}},t.exports),t.exports}var dt,pt,mt=lt((function(e){var t,r;t=ut,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var a=e[n];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(n>0&&(a=a.replace(/^[\/]+/,"")),a=n<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var o=t.join("/"),i=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),ft=function(e){return e?Array.isArray(e)?e:[e]:void 0},ht=function(e){var t=new URL(e);return mt(t.origin,"_acl",t.pathname)},gt=function(e){return{"@base":e,acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/","acl:agent":{"@type":"@id"},"acl:agentGroup":{"@type":"@id"},"acl:agentClass":{"@type":"@id"},"acl:mode":{"@type":"@id"},"acl:accessTo":{"@type":"@id"}}},vt=function(){var e=Ke($e().mark((function e(t){var r,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataServers();case 2:if(r=e.sent,n=Object.values(r).find((function(e){return!0===e.authServer}))){e.next=6;break}throw new Error("Could not find a server with authServer: true. Check your dataServers config.");case 6:return e.abrupt("return",n.pod?new URL(n.baseUrl).origin:n.baseUrl);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=["username","email","password","domain"],wt="sso",bt="local",_t="pod",Et=function(e){var t,r,n,a,o,i,s,c,u,l,d,p,m=e.dataProvider,f=e.authType,h=e.allowAnonymous,g=void 0===h||h,v=e.checkUser,y=e.checkPermissions,w=void 0!==y&&y;if(![wt,bt,_t].includes(f))throw new Error("The authType parameter is missing from the auth provider");return{login:(p=Ke($e().mark((function e(t){var r,n,a,o,i,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(m);case 2:if(r=e.sent,f!==bt){e.next=20;break}return n=t.username,a=t.password,e.prev=5,e.next=8,m.fetch(mt(r,"auth/login"),{method:"POST",body:JSON.stringify({username:n.trim(),password:a.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 8:o=e.sent,i=o.json,s=i.token,localStorage.setItem("token",s),window.location.reload(),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),new Error("ra.auth.sign_in_error");case 18:e.next=23;break;case 20:c=new URL(window.location.href).origin+"/login?login=true",t.redirect&&(c+="&redirect="+encodeURIComponent(t.redirect)),window.location.href=mt(r,"auth?redirectUrl="+encodeURIComponent(c));case 23:case"end":return e.stop()}}),e,null,[[5,15]])}))),function(e){return p.apply(this,arguments)}),signup:(d=Ke($e().mark((function e(t){var r,n,a,o,i,s,c,u,l,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(m);case 2:if(r=e.sent,f!==bt){e.next=33;break}return n=t.username,a=t.email,o=t.password,t.domain,i=Qe(t,yt),e.prev=5,e.next=8,m.fetch(mt(r,"auth/signup"),{method:"POST",body:JSON.stringify(Me({username:n.trim(),email:a.trim(),password:o.trim()},i)),headers:new Headers({"Content-Type":"application/json"})});case 8:return s=e.sent,c=s.json,u=c.token,localStorage.setItem("token",u),l=ct(u),d=l.webId,e.abrupt("return",d);case 16:if(e.prev=16,e.t0=e.catch(5),"email.already.exists"!==e.t0.message){e.next=22;break}throw new Error("auth.message.user_email_exist");case 22:if("username.already.exists"!==e.t0.message){e.next=26;break}throw new Error("auth.message.username_exist");case 26:if("username.invalid"!==e.t0.message){e.next=30;break}throw new Error("auth.message.username_invalid");case 30:throw new Error(e.t0.message||"ra.auth.sign_in_error");case 31:e.next=35;break;case 33:p=new URL(window.location.href).origin+"/login?login=true",window.location.href=mt(r,"auth?redirectUrl="+encodeURIComponent(p));case 35:case"end":return e.stop()}}),e,null,[[5,16]])}))),function(e){return d.apply(this,arguments)}),logout:(l=Ke($e().mark((function e(){var t,r,n,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=f,e.next=e.t0===bt?3:e.t0===wt?7:e.t0===_t?13:18;break;case 3:return localStorage.clear(),window.location.reload(),window.location.href="/",e.abrupt("break",18);case 7:return e.next=9,vt(m);case 9:return t=e.sent,r=new URL(window.location.href).origin,window.location.href=mt(t,"auth/logout?redirectUrl="+encodeURIComponent(mt(r,"login")+"?logout=true")),e.abrupt("break",18);case 13:return n=localStorage.getItem("token"),a=ct(n),o=a.webId,localStorage.clear(),window.location.href=mt(o,"openApp")+"?type="+encodeURIComponent("http://activitypods.org/ns/core#FrontAppRegistration"),e.abrupt("break",18);case 18:return e.abrupt("return","/");case 19:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkAuth:(u=Ke($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")||g){e.next=3;break}throw new Error;case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),checkUser:function(e){return!v||v(e)},checkError:function(e){return Promise.resolve()},getPermissions:(c=Ke($e().mark((function e(t){var r,n,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return");case 2:if("object"!==Ze(t)){e.next=4;break}return e.abrupt("return");case 4:if(t&&t.startsWith("http")){e.next=6;break}throw new Error("The first parameter passed to getPermissions must be an URL");case 6:return r=ht(t),e.prev=7,e.next=10,m.fetch(r);case 10:return n=e.sent,a=n.json,e.abrupt("return",a["@graph"]);case 15:return e.prev=15,e.t0=e.catch(7),console.warn("Could not fetch ACL URI ".concat(t)),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[7,15]])}))),function(e){return c.apply(this,arguments)}),addPermission:(s=Ke($e().mark((function e(t,r,n,a){var o,i,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to addPermission must be an URL");case 2:return i=ht(t),Je(o={"@id":"#"+a.replace("acl:",""),"@type":"acl:Authorization"},n,r),Je(o,"acl:accessTo",t),Je(o,"acl:mode",a),s=o,e.next=6,m.fetch(i,{method:"PATCH",body:JSON.stringify({"@context":gt(i),"@graph":[s]})});case 6:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return s.apply(this,arguments)}),removePermission:(i=Ke($e().mark((function e(t,r,n,a){var o,i,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.startsWith("http")){e.next=2;break}throw new Error("The first parameter passed to removePermission must be an URL");case 2:return o=ht(t),e.next=5,m.fetch(o);case 5:return i=e.sent,s=i.json,c=s["@graph"].filter((function(e){return!e["@id"].includes("#Default")})).map((function(e){var t=ft(e["acl:mode"]),o=ft(e[n]);return a&&t.includes(a)&&o&&o.includes(r)&&(o=o.filter((function(e){return e!==r}))),Me(Me({},e),{},Je({},n,o))})),e.next=10,m.fetch(o,{method:"PUT",body:JSON.stringify({"@context":gt(o),"@graph":c})});case 10:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return i.apply(this,arguments)}),getIdentity:(o=Ke($e().mark((function e(){var t,r,n,a,o,i,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=17;break}return r=ct(t),n=r.webId,e.next=5,m.fetch(n);case 5:if(a=e.sent,!(o=a.json).url){e.next=13;break}return e.next=10,m.fetch(o.url);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0={};case 14:return i=e.t0,s=i.json,e.abrupt("return",{id:n,fullName:(null==s?void 0:s["vcard:given-name"])||(null==s?void 0:s["pair:label"])||o["foaf:name"]||o["pair:label"],profileData:s,webIdData:o});case 17:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),resetPassword:(a=Ke($e().mark((function e(t){var r,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,vt(m);case 3:return n=e.sent,e.prev=4,e.next=7,m.fetch(mt(n,"auth/reset_password"),{method:"POST",body:JSON.stringify({email:r.trim()}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.reset_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return a.apply(this,arguments)}),setNewPassword:(n=Ke($e().mark((function e(t){var r,n,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.token,a=t.password,e.next=3,vt(m);case 3:return o=e.sent,e.prev=4,e.next=7,m.fetch(mt(o,"auth/new_password"),{method:"POST",body:JSON.stringify({email:r.trim(),token:n,password:a}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("auth.notification.new_password_error");case 12:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),getAccountSettings:(r=Ke($e().mark((function e(t){var r,n,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(m);case 2:return r=e.sent,e.prev=3,e.next=6,m.fetch(mt(r,"auth/account"));case 6:return n=e.sent,a=n.json,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(3),new Error("auth.notification.get_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e){return r.apply(this,arguments)}),updateAccountSettings:(t=Ke($e().mark((function e(t){var r,n,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt(m);case 2:return r=e.sent,e.prev=3,n=t.email,a=t.currentPassword,o=t.newPassword,e.next=7,m.fetch(mt(r,"auth/account"),{method:"POST",body:JSON.stringify({currentPassword:a,email:n.trim(),newPassword:o}),headers:new Headers({"Content-Type":"application/json"})});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"auth.account.invalid_password"!==e.t0.message){e.next=13;break}throw new Error("auth.notification.invalid_password");case 13:throw new Error("auth.notification.update_settings_error");case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}},kt="acl:agentClass",xt=["acl:Append","acl:Write","acl:Control"],jt=["acl:Append","acl:Write","acl:Control"],Ot=["acl:Write","acl:Control"],St=["acl:Control"],At={show:["acl:Read","acl:Append","acl:Write","acl:Control"],list:["acl:Read","acl:Append","acl:Write","acl:Control"],create:xt,edit:jt,delete:Ot,control:St},Ct={show:"auth.message.resource_show_forbidden",edit:"auth.message.resource_edit_forbidden",delete:"auth.message.resource_delete_forbidden",control:"auth.message.resource_control_forbidden",list:"auth.message.container_list_forbidden",create:"auth.message.container_create_forbidden"},Pt=(Je(dt={},"acl:Read","auth.right.resource.read"),Je(dt,"acl:Append","auth.right.resource.append"),Je(dt,"acl:Write","auth.right.resource.write"),Je(dt,"acl:Control","auth.right.resource.control"),dt),It=(Je(pt={},"acl:Read","auth.right.container.read"),Je(pt,"acl:Write","auth.right.container.write"),Je(pt,"acl:Control","auth.right.container.control"),pt),zt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",a=c(),o=a.identity,i=a.isLoading,s=u(e),p=s.permissions,m=l(),f=d();return r((function(){!i&&o&&p&&!p.some((function(e){return At[t].includes(e["acl:mode"])}))&&(m(Ct[t],{type:"error"}),f(n))}),[p,o,f,m,i]),p},Lt=function(e){var r=p(),n=X(r);return zt(n,"create"),t.createElement(m,e)};Lt.defaultProps={actions:t.createElement(f,null)};var Ut=Oe((function(){return{list:{padding:0,width:"100%"},option:{padding:0}}})),Nt=function(e){var a=e.agents,o=e.addPermission,i=Ut(),s=h(),c=et(n(null),2),u=c[0],l=c[1],d=et(n(""),2),p=d[0],m=d[1],f=et(n([]),2),v=f[0],y=f[1],w=g("Person",{pagination:{page:1,perPage:100},sort:{field:"pair:label",order:"ASC"},filter:{q:p}},{enabled:p.length>0}).data;return r((function(){y((null==w?void 0:w.length)>0?Object.values(w):[])}),[w]),t.createElement(Se,{classes:{option:i.option},getOptionLabel:function(e){return e["pair:label"]},filterOptions:function(e){return e.filter((function(e){return!Object.keys(a).includes(e.id)}))},options:v,noOptionsText:s("ra.navigation.no_results"),autoComplete:!0,blurOnSelect:!0,clearOnBlur:!0,disableClearable:!0,value:u,onChange:function(e,t){o(t.id||t["@id"],"acl:agent","acl:Read"),l(null),m(""),y([])},onInputChange:function(e,t){m(t)},renderInput:function(e){return t.createElement(ee,Xe({},e,{label:s("auth.input.agent_select"),variant:"filled",margin:"dense",fullWidth:!0}))},renderOption:function(e,r){return t.createElement(te,Xe({dense:!0,className:i.list},e),t.createElement(re,{button:!0},t.createElement(ne,null,t.createElement(ae,{src:r.image},t.createElement(Ae,null))),t.createElement(oe,{primary:r["pair:label"]})))}})},Rt=function(e){var r=e.agent;switch(r.predicate){case kt:return"foaf:Agent"===r.id?t.createElement(Ie,null):t.createElement(ze,null);case"acl:agent":return t.createElement(Ae,null);case"acl:agentGroup":return t.createElement(Le,null);default:throw new Error("Unknown agent predicate: "+r.predicate)}},Tt=Oe((function(){return{listItem:{paddingLeft:4,paddingRight:36},primaryText:{width:"30%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},secondaryText:{textAlign:"center",width:"60%",fontStyle:"italic",color:"grey"}}})),Wt=function(e){var a=e.isContainer,o=e.agent,i=e.addPermission,s=e.removePermission,c=Tt(),u=h(),l=v(),d=et(t.useState(null),2),p=d[0],m=d[1],f=et(n(),2),g=f[0],b=f[1],_=et(n(!0),2),E=_[0],k=_[1],x=et(n(),2),j=x[0],O=x[1];if(r((function(){"acl:agent"===o.predicate?l.getOne("Person",{id:o.id}).then((function(e){var t=e.data;b(t),k(!1)})).catch((function(e){O(e),k(!1)})):k(!1)}),[o.id,o.predicate]),"acl:agentGroup"===o.predicate)return null;var S=function(){return m(null)},A=a?It:Pt;return E?t.createElement(y,null):j?t.createElement(w,null):t.createElement(re,{className:c.listItem},t.createElement(ne,null,t.createElement(ae,{src:null==g?void 0:g.image},t.createElement(Rt,{agent:o}))),t.createElement(oe,{className:c.primaryText,primary:g?g["pair:label"]:u("foaf:Agent"===o.id?"auth.agent.anonymous":"auth.agent.authenticated")}),t.createElement(oe,{className:c.secondaryText,primary:o.permissions&&o.permissions.map((function(e){return u(A[e])})).join(", ")}),t.createElement(ie,null,t.createElement(se,{onClick:function(e){return m(e.currentTarget)},size:"large"},t.createElement(Ce,null)),t.createElement(ce,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:S},Object.entries(A).map((function(e){var r=et(e,2),n=r[0],a=r[1],c=o.permissions&&o.permissions.includes(n);return t.createElement(ue,{key:n,onClick:function(){c?s(o.id,o.predicate,n):i(o.id,o.predicate,n),S()}},t.createElement(le,null,c?t.createElement(Pe,null):null),t.createElement(oe,{primary:u(a)}))})))))},Dt=Ue(te)((function(e){return{width:"100%",maxWidth:"100%",backgroundColor:e.theme.palette.background.paper}})),Ft=function(e){var r=e.isContainer,n=e.agents,a=e.addPermission,o=e.removePermission;return t.createElement(Dt,{dense:!0},Object.entries(n).map((function(e){var n=et(e,2),i=n[0],s=n[1];return t.createElement(Wt,{key:i,isContainer:r,agent:s,addPermission:a,removePermission:o})})))},Vt=function(e){var t=u(e).permissions,o=b(),i=et(n({}),2),s=i[0],c=i[1];r((function(){var e,r=(Je(e={},"foaf:Agent",{id:"foaf:Agent",predicate:kt,permissions:[]}),Je(e,"acl:AuthenticatedAgent",{id:"acl:AuthenticatedAgent",predicate:kt,permissions:[]}),e),n=function(e,t,n){r[e]?r[e].permissions.push(n):r[e]={id:e,predicate:t,permissions:[n]}};if(t){var a,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=rt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{var i=function(){var e=a.value;e[kt]&&ft(e[kt]).forEach((function(t){return n(t,kt,e["acl:mode"])})),e["acl:agent"]&&ft(e["acl:agent"]).forEach((function(t){return n(t,"acl:agent",e["acl:mode"])})),e["acl:agentGroup"]&&ft(e["acl:agentGroup"]).forEach((function(t){return n(t,"acl:agentGroup",e["acl:mode"])}))};for(o.s();!(a=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}c(r)}}),[t]);var l=a((function(t,r,n){var a,i=Me({},s);c(Me(Me({},s),{},Je({},t,{id:t,predicate:r,permissions:s[t]?[].concat(tt(null===(a=s[t])||void 0===a?void 0:a.permissions),[n]):[n]}))),o.addPermission(e,t,r,n).catch((function(e){c(i)}))}),[s,c,e,o]),d=a((function(t,r,n){var a=Me({},s);c(Object.fromEntries(Object.entries(s).map((function(e){var r=et(e,2),a=r[0],o=r[1];return o.id===t&&(o.permissions=o.permissions.filter((function(e){return e!==n}))),[a,o]})).filter((function(e){var t=et(e,2);t[0];var r=t[1];return r.predicate===kt||r.permissions.length>0})))),o.removePermission(e,t,r,n).catch((function(e){c(a)}))}),[s,c,e,o]);return{agents:s,addPermission:l,removePermission:d}},Yt=Oe((function(){return{title:{paddingBottom:8},actions:{padding:15},addForm:{paddingTop:0},listForm:{paddingTop:0,paddingBottom:0,paddingRight:0,maxHeight:210}}})),Gt=function(e){var r=e.open,n=e.onClose,a=e.uri,o=e.isContainer,i=Yt(),s=h(),c=Vt(a),u=c.agents,l=c.addPermission,d=c.removePermission;return t.createElement(de,{fullWidth:!0,open:r,onClose:n},t.createElement(pe,{className:i.title},s(o?"auth.dialog.container_permissions":"auth.dialog.resource_permissions")),t.createElement(me,{className:i.addForm},t.createElement(Nt,{agents:u,addPermission:l})),t.createElement(me,{className:i.listForm},t.createElement(Ft,{isContainer:o,agents:u,addPermission:l,removePermission:d})),t.createElement(fe,{className:i.actions},t.createElement(_,{label:"ra.action.close",variant:"text",onClick:n})))},qt=function(e){var r=e.isContainer,a=E(),o=p(),i=et(n(!1),2),s=i[0],c=i[1],u=X(o),l=r?u:a.id||a["@id"];return t.createElement(t.Fragment,null,t.createElement(_,{label:"auth.action.permissions",onClick:function(){return c(!0)}},t.createElement(Q,null)),t.createElement(Gt,{uri:l,isContainer:r,open:s,onClose:function(){return c(!1)}}))};qt.defaultProps={isContainer:!1};var Bt=function(){var e=k(),r=e.hasList,n=e.hasShow,a=E(),o=x(null==a?void 0:a.id).permissions;return t.createElement(j,null,r&&t.createElement(O,null),n&&t.createElement(S,null),!!o&&o.some((function(e){return St.includes(e["acl:mode"])}))&&t.createElement(qt,null))},Mt=function(e){var r=A(),n=u(r),a=n.permissions;return!n.isLoading&&null!=a&&a.some((function(e){return Ot.includes(e["acl:mode"])}))?t.createElement(C,e):null},$t=Oe((function(){return{toolbar:{flex:1,display:"flex",justifyContent:"space-between"}}})),Zt=function(e){var r=$t();return t.createElement(P,Xe({},e,{className:r.toolbar}),t.createElement(I,null),t.createElement(Mt,{mutationMode:"undoable"}))},Ht=function(e){var r=A();return zt(r,"edit"),t.createElement(z,e,t.cloneElement(e.children,Me({toolbar:t.createElement(Zt,null)},e.children.props)))};Ht.defaultProps={actions:t.createElement(Bt,null)};var Kt=function(e){var r=A(),n=u(r),a=n.permissions;return!n.isLoading&&null!=a&&a.some((function(e){return jt.includes(e["acl:mode"])}))?t.createElement(L,e):null},Jt=function(e){var r=e.bulkActions,n=e.sort,a=e.displayedFilters,o=e.exporter,i=e.filters,s=e.filterValues,c=e.onUnselectItems,l=e.selectedIds,d=e.showFilter,m=e.total,f=p(),h=he((function(e){return e.breakpoints.down("xs")})),g=k(),v=X(f),y=u(v).permissions;return t.createElement(j,null,i&&t.cloneElement(i,{showFilter:d,displayedFilters:a,filterValues:s,context:"button"}),g.hasCreate&&y&&y.some((function(e){return xt.includes(e["acl:mode"])}))&&t.createElement(U,null),y&&y.some((function(e){return St.includes(e["acl:mode"])}))&&t.createElement(qt,{isContainer:!0}),!h&&!1!==o&&t.createElement(N,{disabled:0===m,sort:n,filter:s,exporter:o}),r&&t.cloneElement(r,{filterValues:s,selectedIds:l,onUnselectItems:c}))},Xt=function(e){return t.createElement(R,e)};Xt.defaultProps={actions:t.createElement(Jt,null)};var Qt=function(){var e=k(),r=e.hasList,n=e.hasEdit,a=E(),o=u(null==a?void 0:a.id).permissions;return t.createElement(j,null,r&&t.createElement(O,null),n&&o&&o.some((function(e){return jt.includes(e["acl:mode"])}))&&t.createElement(L,null),o&&o.some((function(e){return St.includes(e["acl:mode"])}))&&t.createElement(qt,null))},er=function(e){var r=A();return zt(r,"show"),t.createElement(T,e)};er.defaultProps={actions:t.createElement(Qt,null)};var tr=["open","onClose","title","message","redirect"],rr=function(e){var r=e.open,n=e.onClose,a=e.title,o=e.message,i=e.redirect,s=Qe(e,tr),c=W(),u=h();return t.createElement(de,Xe({open:r,onClose:n},s),t.createElement(pe,null,u(a)),t.createElement(me,null,t.createElement(ge,null,u(o))),t.createElement(fe,null,t.createElement(ve,{onClick:n},u("ra.action.cancel")),t.createElement(ve,{onClick:function(){return c({redirect:i||window.location.pathname+window.location.search})},color:"primary",variant:"contained"},u("auth.action.login"))))};rr.defaultProps={title:"auth.dialog.login_required",message:"auth.message.login_to_continue"};var nr=["children","backgroundImage","buttons","userResource","propertiesExist","text"],ar=function(e){e.children;var n=e.backgroundImage,a=e.buttons,i=e.userResource,s=e.propertiesExist,u=e.text,d=Qe(e,nr),p=o(),m=!1,f=Re(),h=et(Te(),1)[0],g=c(),y=g.identity,w=g.isLoading,_=l(),E=W(),k=v(),x=b();r((function(){!w&&null!=y&&y.id&&f(h.get("redirect")||"/")}),[y,w,f,h]),r((function(){Ke($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.has("login")){e.next=7;break}if(!h.has("error")){e.next=5;break}"registration.not-allowed"===h.get("error")?_("auth.message.user_email_not_found",{type:"error"}):_("auth.message.bad_request",{type:"error",error:h.get("error")}),e.next=7;break;case 5:if(!h.has("token")){e.next=7;break}return e.delegateYield($e().mark((function e(){var t,r,n,a,o,c,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.get("token"),r=ct(t),n=r.webId,localStorage.setItem("token",t),e.next=5,k.getOne(i,{id:n});case 5:if(o=e.sent,a=o.data,!(s.length>0)){e.next=20;break}c=s.every((function(e){return a[e]}));case 9:if(c){e.next=20;break}return console.log("Waiting for all properties to have been created",s),e.next=13,delay(500);case 13:return e.next=15,k.getOne(i,{id:n});case 15:u=e.sent,a=u.data,c=s.every((function(e){return a[e]})),e.next=9;break;case 20:x.checkUser(a)?h.has("redirect")?(_("auth.message.user_connected",{type:"info"}),window.location.href=h.get("redirect")):h.has("new")&&"true"===h.get("new")?(_("auth.message.new_user_created",{type:"info"}),window.location.href="/"+i+"/"+encodeURIComponent(n)):(_("auth.message.user_connected",{type:"info"}),window.location.href="/"):(localStorage.removeItem("token"),_("auth.message.user_not_allowed_to_login",{type:"error"}),f.replace("/login"));case 21:case"end":return e.stop()}}),e)}))(),"t0",7);case 7:h.has("logout")&&(localStorage.clear(),_("auth.message.user_disconnected",{type:"info"}),f("/"));case 8:case"end":return e.stop()}}),e)})))()}),[h,f,_,i]);var j=function(){!m&&p.current&&(p.current.style.backgroundImage="url(".concat(n,")"),m=!0)};return r((function(){m||function(){if(n){var e=new Image;e.onload=j,e.src=n}}()})),w?null:t.createElement(sr,Xe({},d,{ref:p}),t.createElement(ye,{className:ir.card},t.createElement("div",{className:ir.avatar},t.createElement(ae,{className:ir.icon},t.createElement(Ve,null))),u&&t.createElement(we,{variant:"body2"},u),a&&a.map((function(e,r){return t.createElement(be,{key:r},t.cloneElement(e,{fullWidth:!0,variant:"outlined",type:"submit",onClick:function(){return E({},"/login")}}))}))))},or="SsoLoginPage",ir={card:"".concat(or,"-card"),avatar:"".concat(or,"-avatar"),icon:"".concat(or,"-icon"),switch:"".concat(or,"-switch")},sr=Fe("div",{name:or,overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme;return Je(t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},"& .".concat(ir.card),{minWidth:300,marginTop:"6em"}),Je(t,"& .".concat(ir.avatar),{margin:"1em",display:"flex",justifyContent:"center"}),Je(t,"& .".concat(ir.icon),{backgroundColor:r.palette.secondary[500]}),Je(t,"& .".concat(ir.switch),{marginBottom:"1em",display:"flex",justifyContent:"center"}),t}));ar.defaultProps={propertiesExist:[],buttons:[t.createElement(ve,{startIcon:t.createElement(ae,{src:"/lescommuns.jpg"})},"Les Communs")],userResource:"Person"};var cr=Oe((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.main}},text:{textAlign:"center",padding:"4px 8px 8px"},card:Je({minWidth:300,maxWidth:350,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),lockIconAvatar:{margin:"1em",display:"flex",justifyContent:"center"},lockIcon:{backgroundColor:e.palette.grey[500]},list:{paddingTop:0,paddingBottom:0},listItem:{paddingTop:5,paddingBottom:5}}})),ur=function(e){var a=e.history,o=e.location,i=e.text,s=e.customPodProviders,c=cr(),u=l(),d=D(),p=h(),m=b(),f=v(),g=et(n(s||[]),2),y=g[0],w=g[1],_=new URLSearchParams(o.search);return r((function(){Ke($e().mark((function e(){var t,r,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==y.length){e.next=13;break}return e.next=3,fetch("https://data.activitypods.org/pod-providers",{headers:{Accept:"application/ld+json"}});case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:r=e.sent,n=r["ldp:contains"].filter((function(e){return Array.isArray(e["apods:locales"])?e["apods:locales"].includes(d):e["apods:locales"]===d})),w(n),e.next=13;break;case 12:u("auth.message.pod_providers_not_loaded","error");case 13:case"end":return e.stop()}}),e)})))()}),[y,w,u,d]),r((function(){Ke($e().mark((function e(){var t,r,n,o,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.has("token")){e.next=16;break}return t=_.get("token"),r=ct(t),n=r.webId,e.next=5,fetch(n,{headers:{Accept:"application/json"}});case 5:if((o=e.sent).ok){e.next=10;break}u("auth.message.unable_to_fetch_user_data","error"),e.next=14;break;case 10:return e.next=12,o.json();case 12:i=e.sent,m.checkUser(i)?(localStorage.setItem("token",t),u("auth.message.user_connected","info"),window.location.reload(),window.location.href="/?addUser=true"):(u("auth.message.user_not_allowed_to_login","error"),a.replace("/login"));case 14:e.next=17;break;case 16:_.has("logout")&&(localStorage.clear(),u("auth.message.user_disconnected","info"),a.push("/"));case 17:case"end":return e.stop()}}),e)})))()}),[_,f]),_.has("token")||_.has("addUser")||_.has("logout")?null:t.createElement(_e,{display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(ye,{className:c.card},t.createElement("div",{className:c.lockIconAvatar},t.createElement(ae,{className:c.lockIcon},t.createElement(Ve,null))),t.createElement(_e,{pl:2,pr:2},t.createElement(we,{variant:"body2",className:c.text},i||p("auth.message.choose_pod_provider"))),t.createElement(_e,{m:2},t.createElement(te,{className:c.list},y.map((function(e,r){var n=new URL("/auth",(e["apods:domainName"].includes(":")?"http://":"https://")+e["apods:domainName"]);return _.has("signup")&&n.searchParams.set("signup","true"),n.searchParams.set("redirect",window.location.href),t.createElement(t.Fragment,{key:r},t.createElement(Ee,null),t.createElement(re,{key:r,button:!0,onClick:function(){return window.location.href=n.toString()},className:c.listItem},t.createElement(ne,null,t.createElement(ae,null,t.createElement(Ye,null))),t.createElement(oe,{primary:e["apods:domainName"],secondary:e["apods:area"]})))}))))))},lr=function(e){var r=i((function(){return createTheme(e.theme)}),[e.theme]);return t.createElement(ke,{injectFirst:!0},t.createElement(Ne,{theme:r},t.createElement(ur,e),t.createElement(F,null)))},dr=lt((function(e){!function(t){var r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","گ":"g","چ":"ch","پ":"p","ژ":"zh","ک":"k","ی":"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","က":"k","ခ":"kh","ဂ":"g","ဃ":"ga","င":"ng","စ":"s","ဆ":"sa","ဇ":"z","စျ":"za","ည":"ny","ဋ":"t","ဌ":"ta","ဍ":"d","ဎ":"da","ဏ":"na","တ":"t","ထ":"ta","ဒ":"d","ဓ":"da","န":"n","ပ":"p","ဖ":"pa","ဗ":"b","ဘ":"ba","မ":"m","ယ":"y","ရ":"ya","လ":"l","ဝ":"w","သ":"th","ဟ":"h","ဠ":"la","အ":"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h","ဧ":"e","၏":"-e","ဣ":"i","ဤ":"-i","ဉ":"u","ဦ":"-u","ဩ":"aw","သြော":"aw","ဪ":"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ހ":"h","ށ":"sh","ނ":"n","ރ":"r","ބ":"b","ޅ":"lh","ކ":"k","އ":"a","ވ":"v","މ":"m","ފ":"f","ދ":"dh","ތ":"th","ލ":"l","ގ":"g","ޏ":"gn","ސ":"s","ޑ":"d","ޒ":"z","ޓ":"t","ޔ":"y","ޕ":"p","ޖ":"j","ޗ":"ch","ޘ":"tt","ޙ":"hh","ޚ":"kh","ޛ":"th","ޜ":"z","ޝ":"sh","ޞ":"s","ޟ":"d","ޠ":"t","ޡ":"z","ޢ":"a","ޣ":"gh","ޤ":"q","ޥ":"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"p","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"O","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","ă":"a","Ă":"A","ș":"s","Ș":"S","ț":"t","Ț":"T","ţ":"t","Ţ":"T","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"I","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"Kh","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","ђ":"dj","ј":"j","ћ":"c","џ":"dz","Ђ":"Dj","Ј":"j","Ћ":"C","Џ":"Dz","ľ":"l","ĺ":"l","ŕ":"r","Ľ":"L","Ĺ":"L","Ŕ":"R","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","ả":"a","Ả":"A","ẳ":"a","Ẳ":"A","ẩ":"a","Ẩ":"A","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E","ẽ":"e","Ẽ":"E","ẻ":"e","Ẻ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ể":"e","Ể":"E","ỏ":"o","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ổ":"o","Ổ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","Ở":"o","ở":"o","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ỉ":"i","Ỉ":"i","ủ":"u","Ủ":"U","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ử":"u","Ử":"ư","ỷ":"y","Ỷ":"y","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN","лв":"BGN","៛":"KHR","₡":"CRC","₸":"KZT","ден":"MKD","zł":"PLN","₽":"RUB","₾":"GEL"},n=["်","ް"],a={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},o={en:{},az:{"ç":"c","ə":"e","ğ":"g","ı":"i","ö":"o","ş":"s","ü":"u","Ç":"C","Ə":"E","Ğ":"G","İ":"I","Ö":"O","Ş":"S","Ü":"U"},cs:{"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"},fi:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},hu:{"ä":"a","Ä":"A","ö":"o","Ö":"O","ü":"u","Ü":"U","ű":"u","Ű":"U"},lt:{"ą":"a","č":"c","ę":"e","ė":"e","į":"i","š":"s","ų":"u","ū":"u","ž":"z","Ą":"A","Č":"C","Ę":"E","Ė":"E","Į":"I","Š":"S","Ų":"U","Ū":"U"},lv:{"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z"},pl:{"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"O","Ś":"S","Ź":"Z","Ż":"Z"},sv:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},sk:{"ä":"a","Ä":"A"},sr:{"љ":"lj","њ":"nj","Љ":"Lj","Њ":"Nj","đ":"dj","Đ":"Dj"},tr:{"Ü":"U","Ö":"O","ü":"u","ö":"o"}},i={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},s=[";","?",":","@","&","=","+","$",",","/"].join(""),c=[";","?",":","@","&","=","+","$",","].join(""),u=[".","!","~","*","'","(",")"].join(""),l=function(e,t){var l,d,f,h,g,v,y,w,b,_,E,k,x,j,O="-",S="",A="",C=!0,P={},I="";if("string"!=typeof e)return"";if("string"==typeof t&&(O=t),y=i.en,w=o.en,"object"==typeof t)for(E in l=t.maintainCase||!1,P=t.custom&&"object"==typeof t.custom?t.custom:P,f=+t.truncate>1&&t.truncate||!1,h=t.uric||!1,g=t.uricNoSlash||!1,v=t.mark||!1,C=!1!==t.symbols&&!1!==t.lang,O=t.separator||O,h&&(I+=s),g&&(I+=c),v&&(I+=u),y=t.lang&&i[t.lang]&&C?i[t.lang]:C?i.en:{},w=t.lang&&o[t.lang]?o[t.lang]:!1===t.lang||!0===t.lang?{}:o.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){P[e+""]=e+""})),d=!0):d=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){P[e+""]=e+""})),Object.keys(P).forEach((function(t){var r;r=t.length>1?new RegExp("\\b"+p(t)+"\\b","gi"):new RegExp(p(t),"gi"),e=e.replace(r,P[t])})),P)I+=E;for(I=p(I+=O),x=!1,j=!1,_=0,k=(e=e.replace(/(^\s+|\s+$)/g,"")).length;_<k;_++)E=e[_],m(E,P)?x=!1:w[E]?(E=x&&w[E].match(/[A-Za-z0-9]/)?" "+w[E]:w[E],x=!1):E in r?(_+1<k&&n.indexOf(e[_+1])>=0?(A+=E,E=""):!0===j?(E=a[A]+r[E],A=""):E=x&&r[E].match(/[A-Za-z0-9]/)?" "+r[E]:r[E],x=!1,j=!1):E in a?(A+=E,E="",_===k-1&&(E=a[A]),j=!0):!y[E]||h&&-1!==s.indexOf(E)||g&&-1!==c.indexOf(E)?(!0===j?(E=a[A]+E,A="",j=!1):x&&(/[A-Za-z0-9]/.test(E)||S.substr(-1).match(/A-Za-z0-9]/))&&(E=" "+E),x=!1):(E=x||S.substr(-1).match(/[A-Za-z0-9]/)?O+y[E]:y[E],E+=void 0!==e[_+1]&&e[_+1].match(/[A-Za-z0-9]/)?O:"",x=!0),S+=E.replace(new RegExp("[^\\w\\s"+I+"_-]","g"),O);return d&&(S=S.replace(/(\w)(\S*)/g,(function(e,t,r){var n=t.toUpperCase()+(null!==r?r:"");return Object.keys(P).indexOf(n.toLowerCase())<0?n:n.toLowerCase()}))),S=S.replace(/\s+/g,O).replace(new RegExp("\\"+O+"+","g"),O).replace(new RegExp("(^\\"+O+"+|\\"+O+"+$)","g"),""),f&&S.length>f&&(b=S.charAt(f)===O,S=S.slice(0,f),b||(S=S.slice(0,S.lastIndexOf(O)))),l||d||(S=S.toLowerCase()),S},d=function(e){return function(t){return l(t,e)}},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},m=function(e,t){for(var r in t)if(t[r]===e)return!0};if(e.exports)e.exports=l,e.exports.createSlug=d;else try{if(t.getSlug||t.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";t.getSlug=l,t.createSlug=d}catch(e){}}(ut)}));dr.createSlug;var pr=dr,mr=Oe((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),fr=function(t){var r=t.redirectTo,n=t.postSignupRedirect,a=t.delayBeforeRedirect,o=et(V(!1),2),i=o[0],s=o[1],c=Ge(),u=h(),d=l(),p=mr(),m=We(),f=new URLSearchParams(m.search),g=et(Y(),1)[0];return e.createElement(G,{onSubmit:function(e){s(!0),c(e).then((function(e){a?setTimeout((function(){window.location.reload(),window.location.href=n?n+"?redirect="+encodeURIComponent(r||"/"):r||"/",s(!1)}),a):(window.location.reload(),window.location.href=n?n+"?redirect="+encodeURIComponent(r||"/"):r||"/",s(!1)),d("auth.message.new_user_created",{type:"info"})})).catch((function(e){s(!1),d("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},noValidate:!0,defaultValues:{email:f.get("email")}},e.createElement(xe,{className:p.content},e.createElement(q,{autoFocus:!0,source:"username",label:u("auth.input.username"),autoComplete:"username",fullWidth:!0,disabled:i,validate:B(),format:function(e){return e?pr(e,{lang:g||"fr",separator:"_",custom:[".","-","0","1","2","3","4","5","6","7","8","9"]}):""}}),e.createElement(q,{source:"email",label:u("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:i||f.has("email")&&f.has("force-email"),validate:[B(),M()]}),e.createElement(q,{source:"password",type:"password",label:u("ra.auth.password"),autoComplete:"new-password",fullWidth:!0,disabled:i||f.has("email")&&f.has("force-email"),validate:B()}),e.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:i,fullWidth:!0,className:p.button},i?e.createElement(je,{className:p.icon,size:19,thickness:3}):u("auth.action.signup"))))};fr.defaultValues={redirectTo:"/"};var hr=Oe((function(e){return{content:{width:450},icon:{margin:e.spacing(.3)}}})),gr=function(t){var r=t.redirectTo,n=t.allowUsername,a=et(V(!1),2),o=a[0],i=a[1],s=W(),c=h(),u=l(),d=hr(),p=We(),m=new URLSearchParams(p.search);return e.createElement(G,{onSubmit:function(e){i(!0),s(e,r).then((function(){i(!1)})).catch((function(e){i(!1),u("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:m.get("email")}},e.createElement(xe,{className:d.content},e.createElement(q,{source:"username",label:c(n?"auth.input.username_or_email":"auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:o||m.has("email")&&m.has("force-email"),format:function(e){return e?e.toLowerCase():""},validate:n?[B()]:[B(),M()]}),e.createElement(q,{source:"password",type:"password",label:c("ra.auth.password"),autoComplete:"current-password",fullWidth:!0,disabled:o||m.has("email")&&m.has("force-email"),validate:B()}),e.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:o,fullWidth:!0,className:d.button},o?e.createElement(je,{className:d.icon,size:19,thickness:3}):c("auth.action.login"))))};gr.defaultValues={redirectTo:"/",allowUsername:!1};var vr=Oe((function(e){return{icon:{margin:e.spacing(.3)}}})),yr=function(e){var r=e.redirectTo,n=We(),a=new URLSearchParams(n.search),o=a.get("token"),i=et(V(!1),2),s=i[0],c=i[1],u=b(),d=h(),p=l(),m=vr();return t.createElement(G,{onSubmit:function(e){c(!0),u.setNewPassword(Me(Me({},e),{},{token:o})).then((function(e){setTimeout((function(){window.location.href="/login"+(r?"?redirect="+encodeURIComponent(r):""),c(!1)}),2e3),p("auth.notification.password_changed","info")})).catch((function(e){c(!1),p("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))},noValidate:!0,defaultValues:{email:a.get("email")}},t.createElement(xe,{className:m.content},t.createElement(q,{autoFocus:!0,source:"email",label:d("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:s,validate:B(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(q,{autoFocus:!0,type:"password",source:"password",label:d("auth.input.new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:B(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(q,{autoFocus:!0,type:"password",source:"confirm-password",label:d("auth.input.confirm_new_password"),autoComplete:"current-password",fullWidth:!0,disabled:s,validate:B(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:s,fullWidth:!0,className:m.button},s?t.createElement(je,{className:m.icon,size:19,thickness:3}):d("auth.action.set_new_password"))))},wr=Oe((function(e){return{icon:{margin:e.spacing(.3)}}})),br=function(){var e=et(V(!1),2),r=e[0],n=e[1],a=b(),o=h(),i=l(),s=wr();return t.createElement(G,{onSubmit:function(e){n(!0),a.resetPassword(Me({},e)).then((function(e){n(!1),i("auth.notification.reset_password_submitted","info")})).catch((function(e){n(!1),i("string"==typeof e?e:void 0!==e&&e.message?e.message:"auth.notification.reset_password_error",{type:"warning",messageArgs:{_:"string"==typeof e?e:e&&e.message?e.message:void 0}})}))}},t.createElement(xe,{className:s.content},t.createElement(q,{autoFocus:!0,source:"email",label:o("auth.input.email"),autoComplete:"email",fullWidth:!0,disabled:r,validate:B(),format:function(e){return e?e.toLowerCase():""}}),t.createElement(ve,{variant:"contained",type:"submit",color:"primary",disabled:r,fullWidth:!0,className:s.button},r?t.createElement(je,{className:s.icon,size:19,thickness:3}):o("auth.action.reset_password"))))},_r=Oe((function(e){return{"@global":{body:{backgroundColor:e.palette.secondary.main}},root:{backgroundColor:e.palette.secondary.main},card:Je({minWidth:300,maxWidth:500,marginTop:"6em"},e.breakpoints.down("sm"),{margin:"1em"}),icon:{marginTop:5,marginRight:5},title:Je({},e.breakpoints.down("sm"),{fontWeight:"bold",marginTop:12})}})),Er=function(e){var r=e.title,n=e.icon,a=e.text,o=e.children,i=_r();return t.createElement(_e,{display:"flex",flexDirection:"column",alignItems:"center",className:i.root},t.createElement(ye,{className:i.card},t.createElement(_e,{p:2,display:"flex",justifyContent:"start"},n&&t.cloneElement(n,{fontSize:"large",className:i.icon}),t.createElement(we,{variant:"h4",className:i.title},r)),t.createElement(_e,{pl:2,pr:2},t.createElement(we,{variant:"body1"},a)),o),t.createElement(F,null))},kr=Oe((function(){return{switch:{marginBottom:"1em",display:"flex",flexDirection:"column",alignItems:"center"}}})),xr=function(e){var n=e.hasSignup,a=e.allowUsername,o=e.postSignupRedirect,s=e.postLoginRedirect,u=kr(),l=Re(),d=h(),p=et(Te(),1)[0],m=n&&p.has("signup"),f=p.has("reset_password"),g=p.has("new_password"),v=!m&&!f&&!g,y=p.get("redirect"),w=c(),b=w.identity,_=w.isLoading;r((function(){!_&&null!=b&&b.id&&(s?l(s+"?redirect="+encodeURIComponent(y||"/")):y&&y.startsWith("http")?window.location.href=y:l(y||"/"))}),[b,_,l,y,s]);var E=et(i((function(){return m?["auth.action.signup","auth.helper.signup"]:v?["auth.action.login","auth.helper.login"]:f?["auth.action.reset_password","auth.helper.reset_password"]:g?["auth.action.set_new_password","auth.helper.set_new_password"]:void 0}),[m,v,f,g]),2),k=E[0],x=E[1];return _||null!=b&&b.id?null:t.createElement(Er,{title:d(k),text:d(x),icon:t.createElement(Ve,null)},t.createElement(ye,null,m&&t.createElement(fr,{redirectTo:y,delayBeforeRedirect:3e3,postSignupRedirect:o}),f&&t.createElement(br,null),g&&t.createElement(yr,{redirectTo:y}),v&&t.createElement(gr,{redirectTo:y,allowUsername:a}),t.createElement("div",{className:u.switch},m&&t.createElement(De,{to:"/login"},t.createElement(we,{variant:"body2"},d("auth.action.login"))),v&&t.createElement(t.Fragment,null,n&&t.createElement("div",null,t.createElement(De,{to:"/login?signup=true"},t.createElement(we,{variant:"body2"},d("auth.action.signup")))),t.createElement("div",null,t.createElement(De,{to:"/login?reset_password=true&"+p.toString()},t.createElement(we,{variant:"body2"},d("auth.action.reset_password"))))))))};xr.defaultProps={hasSignup:!0,allowUsername:!1};var jr=["name","create"],Or=function(e){var r=e.name,n=e.create,a=Qe(e,jr),o=X(r),i=u(o).permissions;return t.createElement($,Xe({},a,{name:r,create:i&&i.some((function(e){return xt.includes(e["acl:mode"])}))?n:void 0}))},Sr=["label","icon","to"],Ar=["logout","profileResource"],Cr=s((function(e,r){var n=e.label,o=e.icon,i=e.to,s=Qe(e,Sr),c=K().onClose,u=h(),l=Re(),d=a((function(){l(i),c()}),[i,c,l]);return t.createElement(ue,Xe({onClick:d,ref:r},s),o&&t.createElement(le,null,t.cloneElement(o,{fontSize:"small"})),t.createElement(oe,null,u(n)))})),Pr=function(e){var r,n,a=e.logout,o=e.profileResource,i=Qe(e,Ar),s=c().identity;return t.createElement(Z,i,s&&""!==s.id?[t.createElement(Cr,{key:"view",label:"auth.action.view_my_profile",icon:t.createElement(qe,null),to:"/".concat(o,"/").concat(encodeURIComponent((null==s||null===(r=s.profileData)||void 0===r?void 0:r.id)||s.id),"/show")}),t.createElement(Cr,{key:"edit",label:"auth.action.edit_my_profile",icon:t.createElement(Ce,null),to:"/".concat(o,"/").concat(encodeURIComponent((null==s||null===(n=s.profileData)||void 0===n?void 0:n.id)||s.id))}),t.cloneElement(a,{key:"logout"})]:[t.createElement(Cr,{key:"signup",label:"auth.action.signup",to:"/login?signup=true"}),t.createElement(Cr,{key:"login",label:"auth.action.login",to:"/login"})])};Pr.defaultProps={logout:t.createElement(H,null),profileResource:"Person"};var Ir=function(e){var t=c(),n=t.identity,a=t.isLoading,o=l(),i=d(),s=We();return r((function(){a||null!=n&&n.id||(o(e||"ra.auth.auth_check_error",{type:"error"}),i("/login?redirect="+encodeURIComponent(s.pathname+s.search)))}),[a,n,i,o,s]),{identity:n,isLoading:a}};var zr=function(){this.__data__=[],this.size=0};var Lr=function(e,t){return e===t||e!=e&&t!=t};var Ur=function(e,t){for(var r=e.length;r--;)if(Lr(e[r][0],t))return r;return-1},Nr=Array.prototype.splice;var Rr=function(e){var t=this.__data__,r=Ur(t,e);return!(r<0)&&(r==t.length-1?t.pop():Nr.call(t,r,1),--this.size,!0)};var Tr=function(e){var t=this.__data__,r=Ur(t,e);return r<0?void 0:t[r][1]};var Wr=function(e){return Ur(this.__data__,e)>-1};var Dr=function(e,t){var r=this.__data__,n=Ur(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fr.prototype.clear=zr,Fr.prototype.delete=Rr,Fr.prototype.get=Tr,Fr.prototype.has=Wr,Fr.prototype.set=Dr;var Vr=Fr;var Yr=function(){this.__data__=new Vr,this.size=0};var Gr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var qr=function(e){return this.__data__.get(e)};var Br=function(e){return this.__data__.has(e)},Mr="object"==typeof ut&&ut&&ut.Object===Object&&ut,$r="object"==typeof self&&self&&self.Object===Object&&self,Zr=Mr||$r||Function("return this")(),Hr=Zr.Symbol,Kr=Object.prototype,Jr=Kr.hasOwnProperty,Xr=Kr.toString,Qr=Hr?Hr.toStringTag:void 0;var en=function(e){var t=Jr.call(e,Qr),r=e[Qr];try{e[Qr]=void 0;var n=!0}catch(e){}var a=Xr.call(e);return n&&(t?e[Qr]=r:delete e[Qr]),a},tn=Object.prototype.toString;var rn=function(e){return tn.call(e)},nn=Hr?Hr.toStringTag:void 0;var an=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":nn&&nn in Object(e)?en(e):rn(e)};var on=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var sn,cn=function(e){if(!on(e))return!1;var t=an(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},un=Zr["__core-js_shared__"],ln=(sn=/[^.]+$/.exec(un&&un.keys&&un.keys.IE_PROTO||""))?"Symbol(src)_1."+sn:"";var dn=function(e){return!!ln&&ln in e},pn=Function.prototype.toString;var mn=function(e){if(null!=e){try{return pn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},fn=/^\[object .+?Constructor\]$/,hn=Function.prototype,gn=Object.prototype,vn=hn.toString,yn=gn.hasOwnProperty,wn=RegExp("^"+vn.call(yn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var bn=function(e){return!(!on(e)||dn(e))&&(cn(e)?wn:fn).test(mn(e))};var _n=function(e,t){return null==e?void 0:e[t]};var En=function(e,t){var r=_n(e,t);return bn(r)?r:void 0},kn=En(Zr,"Map"),xn=En(Object,"create");var jn=function(){this.__data__=xn?xn(null):{},this.size=0};var On=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Sn=Object.prototype.hasOwnProperty;var An=function(e){var t=this.__data__;if(xn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Sn.call(t,e)?t[e]:void 0},Cn=Object.prototype.hasOwnProperty;var Pn=function(e){var t=this.__data__;return xn?void 0!==t[e]:Cn.call(t,e)};var In=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xn&&void 0===t?"__lodash_hash_undefined__":t,this};function zn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zn.prototype.clear=jn,zn.prototype.delete=On,zn.prototype.get=An,zn.prototype.has=Pn,zn.prototype.set=In;var Ln=zn;var Un=function(){this.size=0,this.__data__={hash:new Ln,map:new(kn||Vr),string:new Ln}};var Nn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Rn=function(e,t){var r=e.__data__;return Nn(t)?r["string"==typeof t?"string":"hash"]:r.map};var Tn=function(e){var t=Rn(this,e).delete(e);return this.size-=t?1:0,t};var Wn=function(e){return Rn(this,e).get(e)};var Dn=function(e){return Rn(this,e).has(e)};var Fn=function(e,t){var r=Rn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Vn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vn.prototype.clear=Un,Vn.prototype.delete=Tn,Vn.prototype.get=Wn,Vn.prototype.has=Dn,Vn.prototype.set=Fn;var Yn=Vn;var Gn=function(e,t){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!kn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Yn(n)}return r.set(e,t),this.size=r.size,this};function qn(e){var t=this.__data__=new Vr(e);this.size=t.size}qn.prototype.clear=Yr,qn.prototype.delete=Gr,qn.prototype.get=qr,qn.prototype.has=Br,qn.prototype.set=Gn;var Bn=qn;var Mn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var $n=function(e){return this.__data__.has(e)};function Zn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Yn;++t<r;)this.add(e[t])}Zn.prototype.add=Zn.prototype.push=Mn,Zn.prototype.has=$n;var Hn=Zn;var Kn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var Jn=function(e,t){return e.has(t)};var Xn=function(e,t,r,n,a,o){var i=1&r,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var d=-1,p=!0,m=2&r?new Hn:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],h=t[d];if(n)var g=i?n(h,f,d,t,e,o):n(f,h,d,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(m){if(!Kn(t,(function(e,t){if(!Jn(m,t)&&(f===e||a(f,e,r,n,o)))return m.push(t)}))){p=!1;break}}else if(f!==h&&!a(f,h,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p},Qn=Zr.Uint8Array;var ea=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var ta=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},ra=Hr?Hr.prototype:void 0,na=ra?ra.valueOf:void 0;var aa=function(e,t,r,n,a,o,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Qn(e),new Qn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Lr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ea;case"[object Set]":var c=1&n;if(s||(s=ta),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=Xn(s(e),s(t),n,a,o,i);return i.delete(e),l;case"[object Symbol]":if(na)return na.call(e)==na.call(t)}return!1};var oa=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},ia=Array.isArray;var sa=function(e,t,r){var n=t(e);return ia(e)?n:oa(n,r(e))};var ca=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o};var ua=function(){return[]},la=Object.prototype.propertyIsEnumerable,da=Object.getOwnPropertySymbols,pa=da?function(e){return null==e?[]:(e=Object(e),ca(da(e),(function(t){return la.call(e,t)})))}:ua;var ma=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var fa=function(e){return null!=e&&"object"==typeof e};var ha=function(e){return fa(e)&&"[object Arguments]"==an(e)},ga=Object.prototype,va=ga.hasOwnProperty,ya=ga.propertyIsEnumerable,wa=ha(function(){return arguments}())?ha:function(e){return fa(e)&&va.call(e,"callee")&&!ya.call(e,"callee")};var ba=function(){return!1},_a=lt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?Zr.Buffer:void 0,o=(a?a.isBuffer:void 0)||ba;e.exports=o})),Ea=/^(?:0|[1-9]\d*)$/;var ka=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Ea.test(e))&&e>-1&&e%1==0&&e<t};var xa=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ja={};ja["[object Float32Array]"]=ja["[object Float64Array]"]=ja["[object Int8Array]"]=ja["[object Int16Array]"]=ja["[object Int32Array]"]=ja["[object Uint8Array]"]=ja["[object Uint8ClampedArray]"]=ja["[object Uint16Array]"]=ja["[object Uint32Array]"]=!0,ja["[object Arguments]"]=ja["[object Array]"]=ja["[object ArrayBuffer]"]=ja["[object Boolean]"]=ja["[object DataView]"]=ja["[object Date]"]=ja["[object Error]"]=ja["[object Function]"]=ja["[object Map]"]=ja["[object Number]"]=ja["[object Object]"]=ja["[object RegExp]"]=ja["[object Set]"]=ja["[object String]"]=ja["[object WeakMap]"]=!1;var Oa=function(e){return fa(e)&&xa(e.length)&&!!ja[an(e)]};var Sa=function(e){return function(t){return e(t)}},Aa=lt((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r&&Mr.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o})),Ca=Aa&&Aa.isTypedArray,Pa=Ca?Sa(Ca):Oa,Ia=Object.prototype.hasOwnProperty;var za=function(e,t){var r=ia(e),n=!r&&wa(e),a=!r&&!n&&_a(e),o=!r&&!n&&!a&&Pa(e),i=r||n||a||o,s=i?ma(e.length,String):[],c=s.length;for(var u in e)!t&&!Ia.call(e,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ka(u,c))||s.push(u);return s},La=Object.prototype;var Ua=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||La)};var Na=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Ra=Object.prototype.hasOwnProperty;var Ta=function(e){if(!Ua(e))return Na(e);var t=[];for(var r in Object(e))Ra.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Wa=function(e){return null!=e&&xa(e.length)&&!cn(e)};var Da=function(e){return Wa(e)?za(e):Ta(e)};var Fa=function(e){return sa(e,Da,pa)},Va=Object.prototype.hasOwnProperty;var Ya=function(e,t,r,n,a,o){var i=1&r,s=Fa(e),c=s.length;if(c!=Fa(t).length&&!i)return!1;for(var u=c;u--;){var l=s[u];if(!(i?l in t:Va.call(t,l)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);for(var f=i;++u<c;){var h=e[l=s[u]],g=t[l];if(n)var v=i?n(g,h,l,t,e,o):n(h,g,l,e,t,o);if(!(void 0===v?h===g||a(h,g,r,n,o):v)){m=!1;break}f||(f="constructor"==l)}if(m&&!f){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(e),o.delete(t),m},Ga=En(Zr,"DataView"),qa=En(Zr,"Promise"),Ba=En(Zr,"Set"),Ma=En(Zr,"WeakMap"),$a=mn(Ga),Za=mn(kn),Ha=mn(qa),Ka=mn(Ba),Ja=mn(Ma),Xa=an;(Ga&&"[object DataView]"!=Xa(new Ga(new ArrayBuffer(1)))||kn&&"[object Map]"!=Xa(new kn)||qa&&"[object Promise]"!=Xa(qa.resolve())||Ba&&"[object Set]"!=Xa(new Ba)||Ma&&"[object WeakMap]"!=Xa(new Ma))&&(Xa=function(e){var t=an(e),r="[object Object]"==t?e.constructor:void 0,n=r?mn(r):"";if(n)switch(n){case $a:return"[object DataView]";case Za:return"[object Map]";case Ha:return"[object Promise]";case Ka:return"[object Set]";case Ja:return"[object WeakMap]"}return t});var Qa=Xa,eo="[object Object]",to=Object.prototype.hasOwnProperty;var ro=function(e,t,r,n,a,o){var i=ia(e),s=ia(t),c=i?"[object Array]":Qa(e),u=s?"[object Array]":Qa(t),l=(c="[object Arguments]"==c?eo:c)==eo,d=(u="[object Arguments]"==u?eo:u)==eo,p=c==u;if(p&&_a(e)){if(!_a(t))return!1;i=!0,l=!1}if(p&&!l)return o||(o=new Bn),i||Pa(e)?Xn(e,t,r,n,a,o):aa(e,t,c,r,n,a,o);if(!(1&r)){var m=l&&to.call(e,"__wrapped__"),f=d&&to.call(t,"__wrapped__");if(m||f){var h=m?e.value():e,g=f?t.value():t;return o||(o=new Bn),a(h,g,r,n,o)}}return!!p&&(o||(o=new Bn),Ya(e,t,r,n,a,o))};var no=function e(t,r,n,a,o){return t===r||(null==t||null==r||!fa(t)&&!fa(r)?t!=t&&r!=r:ro(t,r,n,a,e,o))};var ao=function(e,t){return no(e,t)},oo={},io={"{}":void 0},so=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo,t=JSON.stringify(e),n=V({permissions:io[t]}),o=et(n,2),i=o[0],s=o[1],c=J(),u=a((function(){return c(e).then((function(e){ao(e,i.permissions)||(io[t]=e,s({permissions:e}))})).catch((function(e){s({error:e})}))}),[t,e,c]);return r((function(){u()}),[t]),Me(Me({},i),{},{refetch:u})},co=function(){var e=b();return a((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.signup(t)}),[e])},uo={auth:{dialog:{container_permissions:"Container permissions",resource_permissions:"Resource permissions",login_required:"Login required"},action:{permissions:"Permissions",signup:"Signup",reset_password:"Reset password",set_new_password:"Set new password",logout:"Logout",login:"Login",view_my_profile:"View my profile",edit_my_profile:"Edit my profile"},right:{resource:{read:"Read",append:"Append",write:"Write",control:"Control"},container:{read:"List",append:"Add",write:"Add",control:"Control"}},agent:{anonymous:"All users",authenticated:"Connected users"},input:{agent_select:"Add an user...",name:"Surname",username:"User ID",email:"Email address",username_or_email:"User ID or email address",current_password:"Current password",new_password:"New password",confirm_new_password:"Confirm new password"},helper:{login:"Sign in to your account",signup:"Create your account",reset_password:"Enter your email address below and we will send you a link to reset your password",set_new_password:"Please enter your email address and a new password below"},message:{resource_show_forbidden:"You are not allowed to view this resource",resource_edit_forbidden:"You are not allowed to edit this resource",resource_delete_forbidden:"You are not allowed to delete this resource",resource_control_forbidden:"You are not allowed to control this resource",container_create_forbidden:"You are not allowed to create new resource",container_list_forbidden:"You are not allowed to list these resources",user_not_allowed_to_login:"You are not allowed to login with this account",user_email_not_found:"No account found with this email address",user_email_exist:"An account already exist with this email address",username_exist:"An account already exist with this user ID",username_invalid:"This username is invalid. Only lowercase characters, numbers, dots and hyphens are authorized",new_user_created:"Your account has been successfully created",user_connected:"You are now connected",user_disconnected:"You are now disconnected",bad_request:"Bad request (Error message returned by the server: %{error})",account_settings_updated:"Your account settings have been successfully updated",login_to_continue:"Please login to continue",choose_pod_provider:"Please choose a POD provider in the list below. All application data will be saved on your POD."},notification:{reset_password_submitted:"An email has been sent with reset password instructions",reset_password_error:"An error occurred",password_changed:"Password changed successfully",new_password_error:"An error occurred",invalid_password:"Invalid password",get_settings_error:"An error occurred",update_settings_error:"An error occurred"}}},lo={auth:{dialog:{container_permissions:"Permissions sur le container",resource_permissions:"Permissions sur la ressource",login_required:"Connexion requise"},action:{permissions:"Permissions",signup:"S'inscrire",reset_password:"Mot de passe oublié ?",set_new_password:"Définir le mot de passe",logout:"Se déconnecter",login:"Se connecter",view_my_profile:"Voir mon profil",edit_my_profile:"Éditer mon profil"},right:{resource:{read:"Lire",append:"Enrichir",write:"Modifier",control:"Administrer"},container:{read:"Lister",append:"Ajouter",write:"Ajouter",control:"Administrer"}},agent:{anonymous:"Tous les utilisateurs",authenticated:"Utilisateurs connectés"},input:{agent_select:"Ajouter un utilisateur...",name:"Prénom",username:"Identifiant unique",email:"Adresse e-mail",username_or_email:"Identifiant ou adresse e-mail",current_password:"Mot de passe actuel",new_password:"Nouveau mot de passe",confirm_new_password:"Confirmer le nouveau mot de passe"},helper:{login:"Connectez-vous à votre compte.",signup:"Créez votre compte",reset_password:"Entrez votre adresse mail ci-dessous et nous vous enverrons un lien pour réinitialiser votre mot de passe",set_new_password:"Veuillez entrer votre adresse mail et un nouveau mot de passe ci-dessous"},message:{resource_show_forbidden:"Vous n'avez pas la permission de voir cette ressource",resource_edit_forbidden:"Vous n'avez pas la permission d'éditer cette ressource",resource_delete_forbidden:"Vous n'avez pas la permission d'effacer cette ressource",resource_control_forbidden:"Vous n'avez pas la permission d'administrer cette ressource",container_create_forbidden:"Vous n'avez pas la permission de créer des ressources",container_list_forbidden:"Vous n'avez pas la permission de voir ces ressources",user_not_allowed_to_login:"Vous n'avez pas le droit de vous connecter avec ce compte",user_email_not_found:"Aucun compte trouvé avec cette adresse mail",user_email_exist:"Un compte existe déjà avec cette adresse mail",username_exist:"Un compte existe déjà avec cet identifiant",username_invalid:"Cet identifiant n'est pas valide. Seuls les lettres minuscules, les chiffres, les points et les tirets sont autorisés",new_user_created:"Votre compte a été créé avec succès",user_connected:"Vous êtes maintenant connecté",user_disconnected:"Vous êtes maintenant déconnecté",bad_request:"Requête erronée (Message d'erreur renvoyé par le serveur: %{error})",account_settings_updated:"Les paramètres de votre compte ont été mis à jour avec succès",login_to_continue:"Veuillez vous connecter pour continuer",choose_pod_provider:"Veuillez choisir un fournisseur de PODs dans la liste ci-dessous. Toutes les données de l'application seront enregistrées sur votre POD."},notification:{reset_password_submitted:"Un e-mail a été envoyé avec les instructions de réinitialisation du mot de passe",reset_password_error:"Une erreur s'est produite",password_changed:"Le mot de passe a été changé avec succès",new_password_error:"Une erreur s'est produite",invalid_password:"Mot de passe incorrect",get_settings_error:"Une erreur s'est produite",update_settings_error:"Une erreur s'est produite"}}};export{rr as AuthDialog,Lt as CreateWithPermissions,Mt as DeleteButtonWithPermissions,Bt as EditActionsWithPermissions,Kt as EditButtonWithPermissions,Zt as EditToolbarWithPermissions,Ht as EditWithPermissions,Jt as ListActionsWithPermissions,Xt as ListWithPermissions,xr as LocalLoginPage,ar as LoginPage,qt as PermissionsButton,lr as PodLoginPage,Or as ResourceWithPermissions,Qt as ShowActionsWithPermissions,er as ShowWithPermissions,ar as SsoLoginPage,Pr as UserMenu,Et as authProvider,uo as englishMessages,lo as frenchMessages,Vt as useAgents,Ir as useCheckAuthenticated,zt as useCheckPermissions,so as usePermissionsWithRefetch,co as useSignup};
//# sourceMappingURL=index.es.js.map
