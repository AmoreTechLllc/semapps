import e,{useCallback as t,useMemo as r}from"react";import{MuiPickersUtilsProvider as n,DatePicker as a,TimePicker as o,DateTimePicker as i,KeyboardDatePicker as l,KeyboardDateTimePicker as c,KeyboardTimePicker as u}from"@material-ui/pickers";import{useTranslate as p,useInput as s,FieldTitle as m,InputHelperText as f,useListContext as d,linkToRecord as g}from"react-admin";import v from"@date-io/date-fns";import b from"@fullcalendar/react";import h from"@fullcalendar/daygrid";import{makeStyles as y,useTheme as O}from"@material-ui/core";import{useHistory as P}from"react-router-dom";import w from"@fullcalendar/list";function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},S=E(4),T=E(2),V=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,x=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=S(e.getFullYear()),r=T(e.getMonth()+1),n=T(e.getDate()),a=T(e.getHours()),o=T(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},F=function(e){return null==e||""===e?"":e instanceof Date?x(e):V.test(e)?e:x(new Date(e))},I=function(e){return e?new Date(e):""},B=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],R=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat"],q=function(r){var a=r.PickerComponent,o=r.format,i=void 0===o?F:o,l=r.label,c=r.options,u=r.source,d=r.resource,g=r.helperText,b=r.margin,h=void 0===b?"dense":b,y=r.onBlur,O=r.onChange,P=r.onFocus,w=r.parse,E=void 0===w?I:w,S=r.validate,T=r.variant,V=void 0===T?"filled":T;r.defaultValue;var x,q=r.providerOptions,M=q.utils,L=q.locale,N=r.pickerVariant,z=void 0===N?"dialog":N,A=r.stringFormat,Y=void 0===A?"ISO":A,_=j(r,R),G=p(),H=s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:y,onChange:O,onFocus:P,parse:E,resource:d,source:u,validate:S},_)),U=H.id,$=H.input,J=H.isRequired,K=H.meta,Q=K.error,W=K.touched,X=t((function(e){Date.parse(e)?$.onChange("ISO"===Y?e.toISOString():e.toString()):$.onChange(null)}),[]);return e.createElement(n,{utils:M||v,locale:L},e.createElement(a,D({id:U,InputLabelProps:{shrink:!0},label:e.createElement(m,{label:l,source:u,resource:d,isRequired:J}),variant:z,inputVariant:V,margin:h,error:!(!W||!Q),helperText:e.createElement(f,{touched:W,error:Q,helperText:g}),clearLabel:G("ra.action.clear_input_value"),cancelLabel:G("ra.action.cancel")},c,((x=_).allowEmpty,x.alwaysOn,x.basePath,x.component,x.defaultValue,x.format,x.formClassName,x.initialValue,x.initializeForm,x.input,x.isRequired,x.label,x.limitChoicesToValue,x.locale,x.meta,x.options,x.optionText,x.optionValue,x.parse,x.record,x.resource,x.source,x.textAlign,x.translate,x.translateChoice,x.labelTime,j(x,B)),{value:$.value?new Date($.value):null,onChange:function(e){return X(e)},onBlur:function(){return $.onBlur($.value?"ISO"===Y?new Date($.value).toISOString():new Date($.value).toString():null)}})))};q.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:v,locale:void 0}};var M=function(e){var n=e.label,a=e.startDate,o=e.endDate,i=e.linkType,l=P(),c=d(),u=c.ids,p=c.data,s=c.basePath,m=new URLSearchParams(l.location.search),f=t((function(e){var t=e.event;e.jsEvent.preventDefault(),l.push(t.url)}),[]),v=t((function(e){var t=e.view;m.set("month",t.currentStart.getMonth()+1),m.set("year",t.currentStart.getFullYear()),l.replace({pathname:l.location.pathname,search:"?"+m.toString()})}),[m]),b=r((function(){return u.map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:g(s,e)+"/"+i}}))}),[p,u,s]);return{initialDate:m.has("month")?new Date(m.get("year"),m.get("month")-1):new Date,events:b,datesSet:v,eventClick:f}},L=y((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),N=function(t){var r=O(),n=M(t);return L(),e.createElement(b,D({plugins:[h],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};N.defaultProps={linkType:"edit"};var z=y((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),A=function(t){var r=M(t);return z(),e.createElement(b,D({plugins:[w],locale:t.locale,initialView:"listMonth"},r))};A.defaultProps={linkType:"edit"};var Y=function(t){return e.createElement(q,D({PickerComponent:a},t))},_=function(t){return e.createElement(q,D({PickerComponent:o},t))},G=function(t){return e.createElement(q,D({PickerComponent:i},t))},H=function(t){return e.createElement(q,D({PickerComponent:l},t))},U=function(t){return e.createElement(q,D({PickerComponent:c},t))},$=function(t){return e.createElement(q,D({PickerComponent:u},t))};export{N as CalendarList,Y as DateInput,G as DateTimeInput,A as DaysList,H as KeyboardDateInput,U as KeyboardDateTimeInput,$ as KeyboardTimeInput,_ as TimeInput,M as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
