import e,{useCallback as t,useMemo as r}from"react";import{MuiPickersUtilsProvider as n,DatePicker as a,TimePicker as o,DateTimePicker as i,KeyboardDatePicker as l,KeyboardDateTimePicker as c,KeyboardTimePicker as u}from"@material-ui/pickers";import{useTranslate as p,useInput as s,FieldTitle as m,useListContext as f,linkToRecord as d}from"react-admin";import g from"@date-io/date-fns";import v from"@fullcalendar/react";import b from"@fullcalendar/daygrid";import{makeStyles as y,useTheme as h}from"@material-ui/core";import{useHistory as O}from"react-router-dom";import P from"@fullcalendar/list";function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},S=j(4),E=j(2),V=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,T=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=S(e.getFullYear()),r=E(e.getMonth()+1),n=E(e.getDate()),a=E(e.getHours()),o=E(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},x=function(e){return null==e||""===e?"":e instanceof Date?T(e):V.test(e)?e:T(new Date(e))},F=function(e){return e?new Date(e):""},I=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],B=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat"],R=function(r){var a=r.PickerComponent,o=r.format,i=void 0===o?x:o,l=r.label,c=r.options,u=r.source,f=r.resource;r.helperText;var d=r.margin,v=void 0===d?"dense":d,b=r.onBlur,y=r.onChange,h=r.onFocus,O=r.parse,P=void 0===O?F:O,j=r.validate,S=r.variant,E=void 0===S?"filled":S;r.defaultValue;var V,T=r.providerOptions,R=T.utils,q=T.locale,M=r.pickerVariant,L=void 0===M?"dialog":M,N=r.stringFormat,z=void 0===N?"ISO":N,A=D(r,B),Y=p(),_=s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:b,onChange:y,onFocus:h,parse:P,resource:f,source:u,validate:j},A)),G=_.id,H=_.input,U=_.isRequired,$=_.meta,J=$.error,K=$.touched,Q=t((function(e){Date.parse(e)?H.onChange("ISO"===z?e.toISOString():e.toString()):H.onChange(null)}),[]);return e.createElement(n,{utils:R||g,locale:q},e.createElement(a,k({id:G,InputLabelProps:{shrink:!0},label:e.createElement(m,{label:l,source:u,resource:f,isRequired:U}),variant:L,inputVariant:E,margin:v,error:!(!K||!J),helperText:" ",clearLabel:Y("ra.action.clear_input_value"),cancelLabel:Y("ra.action.cancel")},c,((V=A).allowEmpty,V.alwaysOn,V.basePath,V.component,V.defaultValue,V.format,V.formClassName,V.initialValue,V.initializeForm,V.input,V.isRequired,V.label,V.limitChoicesToValue,V.locale,V.meta,V.options,V.optionText,V.optionValue,V.parse,V.record,V.resource,V.source,V.textAlign,V.translate,V.translateChoice,V.labelTime,D(V,I)),{value:H.value?new Date(H.value):null,onChange:function(e){return Q(e)},onBlur:function(){return H.onBlur(H.value?"ISO"===z?new Date(H.value).toISOString():new Date(H.value).toString():null)}})))};R.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:g,locale:void 0}};var q=function(e){var n=e.label,a=e.startDate,o=e.endDate,i=e.linkType,l=O(),c=f(),u=c.ids,p=c.data,s=c.basePath,m=new URLSearchParams(l.location.search),g=t((function(e){var t=e.event;e.jsEvent.preventDefault(),l.push(t.url)}),[]),v=t((function(e){var t=e.view;m.set("month",t.currentStart.getMonth()+1),m.set("year",t.currentStart.getFullYear()),l.replace({pathname:l.location.pathname,search:"?"+m.toString()})}),[m]),b=r((function(){return u.map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:d(s,e)+"/"+i}}))}),[p,u,s]);return{initialDate:m.has("month")?new Date(m.get("year"),m.get("month")-1):new Date,events:b,datesSet:v,eventClick:g}},M=y((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),L=function(t){var r=h(),n=q(t);return M(),e.createElement(v,k({plugins:[b],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};L.defaultProps={linkType:"edit"};var N=y((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),z=function(t){var r=q(t);return N(),e.createElement(v,k({plugins:[P],locale:t.locale,initialView:"listMonth"},r))};z.defaultProps={linkType:"edit"};var A=function(t){return e.createElement(R,k({PickerComponent:a},t))},Y=function(t){return e.createElement(R,k({PickerComponent:o},t))},_=function(t){return e.createElement(R,k({PickerComponent:i},t))},G=function(t){return e.createElement(R,k({PickerComponent:l},t))},H=function(t){return e.createElement(R,k({PickerComponent:c},t))},U=function(t){return e.createElement(R,k({PickerComponent:u},t))};export{L as CalendarList,A as DateInput,_ as DateTimeInput,z as DaysList,G as KeyboardDateInput,H as KeyboardDateTimeInput,U as KeyboardTimeInput,Y as TimeInput,q as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
