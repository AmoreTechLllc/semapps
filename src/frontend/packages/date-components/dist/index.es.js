import e,{useCallback as t,useMemo as r}from"react";import{useTranslate as n,useInput as o,FieldTitle as a,InputHelperText as i,useListContext as l,useCreatePath as c}from"react-admin";import{IconButton as u,useTheme as p}from"@mui/material";import s from"@mui/lab/LocalizationProvider";import m from"@date-io/date-fns";import f from"@mui/icons-material/Clear";import{DatePicker as d,TimePicker as g,DateTimePicker as v}from"@mui/lab";import b from"@fullcalendar/react";import y from"@fullcalendar/daygrid";import h from"@mui/styles/makeStyles";import{useNavigate as O}from"react-router-dom";import C from"@fullcalendar/list";function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},E=D(4),S=D(2),T=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,V=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=E(e.getFullYear()),r=S(e.getMonth()+1),n=S(e.getDate()),o=S(e.getHours()),a=S(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(o,":").concat(a)},x=function(e){return null==e||""===e?"":e instanceof Date?V(e):T.test(e)?e:V(new Date(e))},F=function(e){return e?new Date(e):""},I=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],B=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],R=function(r){var l=r.PickerComponent,c=r.format,p=void 0===c?x:c,d=r.label,g=r.options,v=r.source,b=r.resource,y=r.helperText,h=r.margin,O=void 0===h?"dense":h,C=r.onBlur,D=r.onChange,E=r.onFocus,S=r.parse,T=void 0===S?F:S,V=r.validate,R=r.variant,q=void 0===R?"filled":R;r.defaultValue;var L,M=r.providerOptions,z=M.utils,N=M.locale,A=r.pickerVariant,Y=void 0===A?"dialog":A,_=r.stringFormat,G=void 0===_?"ISO":_,H=r.allowClear,U=j(r,B),$=n(),J=o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:p,onBlur:C,onChange:D,onFocus:E,parse:T,resource:b,source:v,validate:V},U)),K=J.id,Q=J.input,W=J.isRequired,X=J.meta,Z=X.error,ee=X.isTouched,te=t((function(e){Date.parse(e)?Q.onChange("ISO"===G?e.toISOString():e.toString()):Q.onChange(null)}),[]),re=t((function(e){e.stopPropagation(),Q.onChange(null)}),[]);return e.createElement(s,{utils:z||m,locale:N},e.createElement(l,k({id:K,InputLabelProps:{shrink:!0},InputProps:{endAdornment:H?e.createElement(u,{onClick:re,size:"large"},e.createElement(f,null)):void 0},label:e.createElement(a,{label:d,source:v,resource:b,isRequired:W}),variant:Y,inputVariant:q,margin:O,error:!(!ee||!Z),helperText:e.createElement(i,{touched:ee,error:Z,helperText:y}),clearLabel:$("ra.action.clear_input_value"),cancelLabel:$("ra.action.cancel")},g,((L=U).allowEmpty,L.alwaysOn,L.basePath,L.component,L.defaultValue,L.format,L.formClassName,L.initialValue,L.initializeForm,L.input,L.isRequired,L.label,L.limitChoicesToValue,L.locale,L.meta,L.options,L.optionText,L.optionValue,L.parse,L.record,L.resource,L.source,L.textAlign,L.translate,L.translateChoice,L.labelTime,j(L,I)),{value:Q.value?new Date(Q.value):null,onChange:te,onBlur:function(){return Q.onBlur(Q.value?"ISO"===G?new Date(Q.value).toISOString():new Date(Q.value).toString():null)}})))};R.defaultProps={isRequired:!1,meta:{isTouched:!1,error:!1},options:{},providerOptions:{utils:m,locale:void 0},parse:function(e){return""===e?null:e}};var q=function(e){var n=e.label,o=e.startDate,a=e.endDate,i=e.linkType,u=O(),p=l(),s=p.ids,m=p.data,f=p.resource,d=c(),g=new URLSearchParams(u.location.search),v=t((function(e){var t=e.event;e.jsEvent.preventDefault(),u(t.url)}),[]),b=t((function(e){var t=e.view;g.set("month",t.currentStart.getMonth()+1),g.set("year",t.currentStart.getFullYear()),u.replace({pathname:u.location.pathname,search:"?"+g.toString()})}),[g]),y=r((function(){return s.filter((function(e){return m[e]})).map((function(e){return{id:e,title:"string"==typeof n?m[e][n]:n(m[e]),start:"string"==typeof o?m[e][o]:o(m[e]),end:"string"==typeof a?m[e][a]:a(m[e]),url:d({resource:f,id:e,type:i})}}))}),[m,s,f]);return{initialDate:g.has("month")?new Date(g.get("year"),g.get("month")-1):new Date,events:y,datesSet:b,eventClick:v}},L=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),M=function(t){var r=p(),n=q(t);return L(),e.createElement(b,k({plugins:[y],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};M.defaultProps={linkType:"edit"};var z=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),N=function(t){var r=q(t);return z(),e.createElement(b,k({plugins:[C],locale:t.locale,initialView:"listMonth"},r))};N.defaultProps={linkType:"edit"};var A=function(t){return e.createElement(R,k({PickerComponent:d},t))},Y=function(t){return e.createElement(R,k({PickerComponent:g},t))},_=function(t){return e.createElement(R,k({PickerComponent:v},t))},G=function(t){return e.createElement(R,k({PickerComponent:d},t))},H=function(t){return e.createElement(R,k({PickerComponent:v},t))},U=function(t){return e.createElement(R,k({PickerComponent:g},t))};export{M as CalendarList,A as DateInput,_ as DateTimeInput,N as DaysList,G as KeyboardDateInput,H as KeyboardDateTimeInput,U as KeyboardTimeInput,Y as TimeInput,q as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
