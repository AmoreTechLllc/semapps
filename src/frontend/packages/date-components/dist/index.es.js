import e,{useCallback as t,useMemo as r}from"react";import{useTranslate as n,useInput as o,FieldTitle as a,InputHelperText as i,useListContext as l,useCreatePath as u}from"react-admin";import{IconButton as c,useTheme as p}from"@mui/material";import s from"@mui/lab/LocalizationProvider";import m from"@date-io/date-fns";import f from"@mui/icons-material/Clear";import{DatePicker as d,TimePicker as g,DateTimePicker as v}from"@mui/lab";import y from"@fullcalendar/react";import b from"@fullcalendar/daygrid";import h from"@mui/styles/makeStyles";import{useSearchParams as O,useNavigate as w}from"react-router-dom";import C from"@fullcalendar/list";function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},V=T(4),x=T(2),I=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,A=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=V(e.getFullYear()),r=x(e.getMonth()+1),n=x(e.getDate()),o=x(e.getHours()),a=x(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(o,":").concat(a)},F=function(e){return null==e||""===e?"":e instanceof Date?A(e):I.test(e)?e:A(new Date(e))},B=function(e){return e?new Date(e):""},L=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],M=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],R=function(r){var l=r.PickerComponent,u=r.format,p=void 0===u?F:u,d=r.label,g=r.options,v=r.source,y=r.resource,b=r.helperText,h=r.margin,O=void 0===h?"dense":h,w=r.onBlur,C=r.onChange,E=r.onFocus,D=r.parse,T=void 0===D?B:D,V=r.validate,x=r.variant,I=void 0===x?"filled":x;r.defaultValue;var A,R=r.providerOptions,q=R.utils,z=R.locale,N=r.pickerVariant,U=void 0===N?"dialog":N,Y=r.stringFormat,$=void 0===Y?"ISO":Y,_=r.allowClear,G=S(r,M),H=n(),J=o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:p,onBlur:w,onChange:C,onFocus:E,parse:T,resource:y,source:v,validate:V},G)),K=J.id,Q=J.input,W=J.isRequired,X=J.meta,Z=X.error,ee=X.isTouched,te=t((function(e){Date.parse(e)?Q.onChange("ISO"===$?e.toISOString():e.toString()):Q.onChange(null)}),[]),re=t((function(e){e.stopPropagation(),Q.onChange(null)}),[]);return e.createElement(s,{utils:q||m,locale:z},e.createElement(l,j({id:K,InputLabelProps:{shrink:!0},InputProps:{endAdornment:_?e.createElement(c,{onClick:re,size:"large"},e.createElement(f,null)):void 0},label:e.createElement(a,{label:d,source:v,resource:y,isRequired:W}),variant:U,inputVariant:I,margin:O,error:!(!ee||!Z),helperText:e.createElement(i,{touched:ee,error:Z,helperText:b}),clearLabel:H("ra.action.clear_input_value"),cancelLabel:H("ra.action.cancel")},g,((A=G).allowEmpty,A.alwaysOn,A.basePath,A.component,A.defaultValue,A.format,A.formClassName,A.initialValue,A.initializeForm,A.input,A.isRequired,A.label,A.limitChoicesToValue,A.locale,A.meta,A.options,A.optionText,A.optionValue,A.parse,A.record,A.resource,A.source,A.textAlign,A.translate,A.translateChoice,A.labelTime,S(A,L)),{value:Q.value?new Date(Q.value):null,onChange:te,onBlur:function(){return Q.onBlur(Q.value?"ISO"===$?new Date(Q.value).toISOString():new Date(Q.value).toString():null)}})))};R.defaultProps={isRequired:!1,meta:{isTouched:!1,error:!1},options:{},providerOptions:{utils:m,locale:void 0},parse:function(e){return""===e?null:e}};var q=function(e){var n=e.label,o=e.startDate,a=e.endDate,i=e.linkType,c=l(),p=c.data,s=c.isLoading,m=c.resource,f=E(O(),2);f[0];var d=f[1],g=w(),v=u(),y=new URLSearchParams(location.search),b=t((function(e){var t=e.event;e.jsEvent.preventDefault(),g(t.url)}),[]),h=t((function(e){var t=e.view;d({month:t.currentStart.getMonth()+1,year:t.currentStart.getFullYear()})}),[d]),C=r((function(){return!s&&p.filter((function(e){return e})).map((function(e){return{id:e.id,title:"string"==typeof n?e[n]:n(e),start:"string"==typeof o?e[o]:o(e),end:"string"==typeof a?e[a]:a(e),url:v({resource:m,id:e.id,type:i})}}))}),[s,p,m,v]);return{initialDate:y.has("month")?new Date(y.get("year"),y.get("month")-1):new Date,events:C,datesSet:h,eventClick:b}},z=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),N=function(t){var r=p(),n=q(t);return z(),e.createElement(y,j({plugins:[b],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};N.defaultProps={linkType:"edit"};var U=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),Y=function(t){var r=q(t);return U(),e.createElement(y,j({plugins:[C],locale:t.locale,initialView:"listMonth"},r))};Y.defaultProps={linkType:"edit"};var $=function(t){return e.createElement(R,j({PickerComponent:d},t))},_=function(t){return e.createElement(R,j({PickerComponent:g},t))},G=function(t){return e.createElement(R,j({PickerComponent:v},t))},H=function(t){return e.createElement(R,j({PickerComponent:d},t))},J=function(t){return e.createElement(R,j({PickerComponent:v},t))},K=function(t){return e.createElement(R,j({PickerComponent:g},t))};export{N as CalendarList,$ as DateInput,G as DateTimeInput,Y as DaysList,H as KeyboardDateInput,J as KeyboardDateTimeInput,K as KeyboardTimeInput,_ as TimeInput,q as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
