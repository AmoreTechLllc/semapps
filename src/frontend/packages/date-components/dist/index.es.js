import e,{useCallback as t,useMemo as r}from"react";import{useTranslate as n,useInput as o,FieldTitle as a,InputHelperText as i,useListContext as l,useCreatePath as u}from"react-admin";import{IconButton as c,useTheme as p}from"@mui/material";import s from"@mui/lab/LocalizationProvider";import m from"@date-io/date-fns";import f from"@mui/icons-material/Clear";import{DatePicker as d,TimePicker as g,DateTimePicker as v}from"@mui/lab";import y from"@fullcalendar/react";import b from"@fullcalendar/daygrid";import h from"@mui/styles/makeStyles";import{useSearchParams as O,useNavigate as w}from"react-router-dom";import C from"@fullcalendar/list";function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},x=V(4),I=V(2),A=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,F=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=x(e.getFullYear()),r=I(e.getMonth()+1),n=I(e.getDate()),o=I(e.getHours()),a=I(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(o,":").concat(a)},B=function(e){return null==e||""===e?"":e instanceof Date?F(e):A.test(e)?e:F(new Date(e))},L=function(e){return e?new Date(e):""},M=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],R=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],q=function(r){var l=r.PickerComponent,u=r.format,p=void 0===u?B:u,d=r.label,g=r.options,v=r.source,y=r.resource,b=r.helperText,h=r.margin,O=void 0===h?"dense":h,w=r.onBlur,C=r.onChange,P=r.onFocus,j=r.parse,D=void 0===j?L:j,T=r.validate,V=r.variant,x=void 0===V?"filled":V;r.defaultValue;var I,A=r.providerOptions,F=A.utils,q=A.locale,z=r.pickerVariant,N=void 0===z?"dialog":z,U=r.stringFormat,Y=void 0===U?"ISO":U,$=r.allowClear,_=E(r,R),G=n(),H=o(k({format:p,onBlur:w,onChange:C,onFocus:P,parse:D,resource:y,source:v,validate:T},_)),J=H.id,K=H.input,Q=H.isRequired,W=H.meta,X=W.error,Z=W.isTouched,ee=t((function(e){Date.parse(e)?K.onChange("ISO"===Y?e.toISOString():e.toString()):K.onChange(null)}),[]),te=t((function(e){e.stopPropagation(),K.onChange(null)}),[]);return e.createElement(s,{utils:F||m,locale:q},e.createElement(l,S({id:J,InputLabelProps:{shrink:!0},InputProps:{endAdornment:$?e.createElement(c,{onClick:te,size:"large"},e.createElement(f,null)):void 0},label:e.createElement(a,{label:d,source:v,resource:y,isRequired:Q}),variant:N,inputVariant:x,margin:O,error:!(!Z||!X),helperText:e.createElement(i,{touched:Z,error:X,helperText:b}),clearLabel:G("ra.action.clear_input_value"),cancelLabel:G("ra.action.cancel")},g,((I=_).allowEmpty,I.alwaysOn,I.basePath,I.component,I.defaultValue,I.format,I.formClassName,I.initialValue,I.initializeForm,I.input,I.isRequired,I.label,I.limitChoicesToValue,I.locale,I.meta,I.options,I.optionText,I.optionValue,I.parse,I.record,I.resource,I.source,I.textAlign,I.translate,I.translateChoice,I.labelTime,E(I,M)),{value:K.value?new Date(K.value):null,onChange:ee,onBlur:function(){return K.onBlur(K.value?"ISO"===Y?new Date(K.value).toISOString():new Date(K.value).toString():null)}})))};q.defaultProps={isRequired:!1,meta:{isTouched:!1,error:!1},options:{},providerOptions:{utils:m,locale:void 0},parse:function(e){return""===e?null:e}};var z=function(e){var n=e.label,o=e.startDate,a=e.endDate,i=e.linkType,c=l(),p=c.data,s=c.isLoading,m=c.resource,f=D(O(),2);f[0];var d=f[1],g=w(),v=u(),y=new URLSearchParams(location.search),b=t((function(e){var t=e.event;e.jsEvent.preventDefault(),g(t.url)}),[]),h=t((function(e){var t=e.view;d((function(e){return k(k({},e),{},{month:t.currentStart.getMonth()+1,year:t.currentStart.getFullYear()})}))}),[d]),C=r((function(){return!s&&p.filter((function(e){return e})).map((function(e){return{id:e.id,title:"string"==typeof n?e[n]:n(e),start:"string"==typeof o?e[o]:o(e),end:"string"==typeof a?e[a]:a(e),url:v({resource:m,id:e.id,type:i})}}))}),[s,p,m,v]);return{initialDate:y.has("month")?new Date(y.get("year"),y.get("month")-1):new Date,events:C,datesSet:h,eventClick:b}},N=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),U=function(t){var r=p(),n=z(t);return N(),e.createElement(y,S({plugins:[b],locale:t.locale,initialView:"dayGridMonth",eventBackgroundColor:r.palette.primary.main},n))};U.defaultProps={linkType:"edit"};var Y=h((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),$=function(t){var r=z(t);return Y(),e.createElement(y,S({plugins:[C],locale:t.locale,initialView:"listMonth"},r))};$.defaultProps={linkType:"edit"};var _=function(t){return e.createElement(q,S({PickerComponent:d},t))},G=function(t){return e.createElement(q,S({PickerComponent:g},t))},H=function(t){return e.createElement(q,S({PickerComponent:v},t))},J=function(t){return e.createElement(q,S({PickerComponent:d},t))},K=function(t){return e.createElement(q,S({PickerComponent:v},t))},Q=function(t){return e.createElement(q,S({PickerComponent:g},t))};export{U as CalendarList,_ as DateInput,H as DateTimeInput,$ as DaysList,J as KeyboardDateInput,K as KeyboardDateTimeInput,Q as KeyboardTimeInput,G as TimeInput,z as useFullCalendarProps};
//# sourceMappingURL=index.es.js.map
