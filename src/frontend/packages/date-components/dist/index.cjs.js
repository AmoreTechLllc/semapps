"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-admin"),r=require("@mui/material"),n=require("@mui/lab/LocalizationProvider"),a=require("@date-io/date-fns"),o=require("@mui/icons-material/Clear"),i=require("@mui/lab"),l=require("@fullcalendar/react"),u=require("@fullcalendar/daygrid"),c=require("@mui/styles/makeStyles"),s=require("react-router-dom"),p=require("@fullcalendar/list");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=d(e),m=d(n),b=d(a),g=d(o),v=d(l),y=d(u),h=d(c),O=d(p);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},w=T(4),j=T(2),x=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,E=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=w(e.getFullYear()),r=j(e.getMonth()+1),n=j(e.getDate()),a=j(e.getHours()),o=j(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},S=function(e){return null==e||""===e?"":e instanceof Date?E(e):x.test(e)?e:E(new Date(e))},q=function(e){return e?new Date(e):""},I=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],V=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],F=function(n){var a=n.PickerComponent,o=n.format,i=void 0===o?S:o,l=n.label,u=n.options,c=n.source,s=n.resource,p=n.helperText,d=n.margin,v=void 0===d?"dense":d,y=n.onBlur,h=n.onChange,O=n.onFocus,T=n.parse,w=void 0===T?q:T,j=n.validate,x=n.variant,E=void 0===x?"filled":x;n.defaultValue;var F,L=n.providerOptions,B=L.utils,M=L.locale,R=n.pickerVariant,N=void 0===R?"dialog":R,z=n.stringFormat,_=void 0===z?"ISO":z,A=n.allowClear,K=D(n,V),H=t.useTranslate(),Y=t.useInput(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:y,onChange:h,onFocus:O,parse:w,resource:s,source:c,validate:j},K)),G=Y.id,U=Y.input,$=Y.isRequired,J=Y.meta,Q=J.error,W=J.touched,X=e.useCallback((function(e){Date.parse(e)?U.onChange("ISO"===_?e.toISOString():e.toString()):U.onChange(null)}),[]),Z=e.useCallback((function(e){e.stopPropagation(),U.onChange(null)}),[]);return f.default.createElement(m.default,{utils:B||b.default,locale:M},f.default.createElement(a,k({id:G,InputLabelProps:{shrink:!0},InputProps:{endAdornment:A?f.default.createElement(r.IconButton,{onClick:Z,size:"large"},f.default.createElement(g.default,null)):void 0},label:f.default.createElement(t.FieldTitle,{label:l,source:c,resource:s,isRequired:$}),variant:N,inputVariant:E,margin:v,error:!(!W||!Q),helperText:f.default.createElement(t.InputHelperText,{touched:W,error:Q,helperText:p}),clearLabel:H("ra.action.clear_input_value"),cancelLabel:H("ra.action.cancel")},u,((F=K).allowEmpty,F.alwaysOn,F.basePath,F.component,F.defaultValue,F.format,F.formClassName,F.initialValue,F.initializeForm,F.input,F.isRequired,F.label,F.limitChoicesToValue,F.locale,F.meta,F.options,F.optionText,F.optionValue,F.parse,F.record,F.resource,F.source,F.textAlign,F.translate,F.translateChoice,F.labelTime,D(F,I)),{value:U.value?new Date(U.value):null,onChange:X,onBlur:function(){return U.onBlur(U.value?"ISO"===_?new Date(U.value).toISOString():new Date(U.value).toString():null)}})))};F.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:b.default,locale:void 0},parse:function(e){return""===e?null:e}};var L=function(r){var n=r.label,a=r.startDate,o=r.endDate,i=r.linkType,l=s.useNavigate(),u=t.useListContext(),c=u.ids,p=u.data,d=u.basePath,f=new URLSearchParams(l.location.search),m=e.useCallback((function(e){var t=e.event;e.jsEvent.preventDefault(),l.push(t.url)}),[]),b=e.useCallback((function(e){var t=e.view;f.set("month",t.currentStart.getMonth()+1),f.set("year",t.currentStart.getFullYear()),l.replace({pathname:l.location.pathname,search:"?"+f.toString()})}),[f]),g=e.useMemo((function(){return c.filter((function(e){return p[e]})).map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:t.linkToRecord(d,e)+"/"+i}}))}),[p,c,d]);return{initialDate:f.has("month")?new Date(f.get("year"),f.get("month")-1):new Date,events:g,datesSet:b,eventClick:m}},B=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),M=function(e){var t=r.useTheme(),n=L(e);return B(),f.default.createElement(v.default,k({plugins:[y.default],locale:e.locale,initialView:"dayGridMonth",eventBackgroundColor:t.palette.primary.main},n))};M.defaultProps={linkType:"edit"};var R=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),N=function(e){var t=L(e);return R(),f.default.createElement(v.default,k({plugins:[O.default],locale:e.locale,initialView:"listMonth"},t))};N.defaultProps={linkType:"edit"};exports.CalendarList=M,exports.DateInput=function(e){return f.default.createElement(F,k({PickerComponent:i.DatePicker},e))},exports.DateTimeInput=function(e){return f.default.createElement(F,k({PickerComponent:i.DateTimePicker},e))},exports.DaysList=N,exports.KeyboardDateInput=function(e){return f.default.createElement(F,k({PickerComponent:i.DatePicker},e))},exports.KeyboardDateTimeInput=function(e){return f.default.createElement(F,k({PickerComponent:i.DateTimePicker},e))},exports.KeyboardTimeInput=function(e){return f.default.createElement(F,k({PickerComponent:i.TimePicker},e))},exports.TimeInput=function(e){return f.default.createElement(F,k({PickerComponent:i.TimePicker},e))},exports.useFullCalendarProps=L;
//# sourceMappingURL=index.cjs.js.map
