"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-admin"),r=require("@mui/material"),n=require("@mui/lab/LocalizationProvider"),a=require("@date-io/date-fns"),o=require("@mui/icons-material/Clear"),i=require("@mui/lab"),l=require("@fullcalendar/react"),u=require("@fullcalendar/daygrid"),c=require("@mui/styles/makeStyles"),s=require("react-router-dom"),p=require("@fullcalendar/list");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=f(e),m=f(n),b=f(a),y=f(o),g=f(l),v=f(u),h=f(c),O=f(p);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},x=S(4),E=S(2),I=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,q=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=x(e.getFullYear()),r=E(e.getMonth()+1),n=E(e.getDate()),a=E(e.getHours()),o=E(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},V=function(e){return null==e||""===e?"":e instanceof Date?q(e):I.test(e)?e:q(new Date(e))},F=function(e){return e?new Date(e):""},A=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],L=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],M=function(n){var a=n.PickerComponent,o=n.format,i=void 0===o?V:o,l=n.label,u=n.options,c=n.source,s=n.resource,p=n.helperText,f=n.margin,g=void 0===f?"dense":f,v=n.onBlur,h=n.onChange,O=n.onFocus,P=n.parse,k=void 0===P?F:P,D=n.validate,j=n.variant,S=void 0===j?"filled":j;n.defaultValue;var x,E=n.providerOptions,I=E.utils,q=E.locale,M=n.pickerVariant,B=void 0===M?"dialog":M,R=n.stringFormat,N=void 0===R?"ISO":R,z=n.allowClear,_=T(n,L),K=t.useTranslate(),H=t.useInput(C({format:i,onBlur:v,onChange:h,onFocus:O,parse:k,resource:s,source:c,validate:D},_)),U=H.id,Y=H.input,$=H.isRequired,G=H.meta,J=G.error,Q=G.isTouched,W=e.useCallback((function(e){Date.parse(e)?Y.onChange("ISO"===N?e.toISOString():e.toString()):Y.onChange(null)}),[]),X=e.useCallback((function(e){e.stopPropagation(),Y.onChange(null)}),[]);return d.default.createElement(m.default,{utils:I||b.default,locale:q},d.default.createElement(a,w({id:U,InputLabelProps:{shrink:!0},InputProps:{endAdornment:z?d.default.createElement(r.IconButton,{onClick:X,size:"large"},d.default.createElement(y.default,null)):void 0},label:d.default.createElement(t.FieldTitle,{label:l,source:c,resource:s,isRequired:$}),variant:B,inputVariant:S,margin:g,error:!(!Q||!J),helperText:d.default.createElement(t.InputHelperText,{touched:Q,error:J,helperText:p}),clearLabel:K("ra.action.clear_input_value"),cancelLabel:K("ra.action.cancel")},u,((x=_).allowEmpty,x.alwaysOn,x.basePath,x.component,x.defaultValue,x.format,x.formClassName,x.initialValue,x.initializeForm,x.input,x.isRequired,x.label,x.limitChoicesToValue,x.locale,x.meta,x.options,x.optionText,x.optionValue,x.parse,x.record,x.resource,x.source,x.textAlign,x.translate,x.translateChoice,x.labelTime,T(x,A)),{value:Y.value?new Date(Y.value):null,onChange:W,onBlur:function(){return Y.onBlur(Y.value?"ISO"===N?new Date(Y.value).toISOString():new Date(Y.value).toString():null)}})))};M.defaultProps={isRequired:!1,meta:{isTouched:!1,error:!1},options:{},providerOptions:{utils:b.default,locale:void 0},parse:function(e){return""===e?null:e}};var B=function(r){var n=r.label,a=r.startDate,o=r.endDate,i=r.linkType,l=t.useListContext(),u=l.data,c=l.isLoading,p=l.resource,f=D(s.useSearchParams(),2);f[0];var d=f[1],m=s.useNavigate(),b=t.useCreatePath(),y=new URLSearchParams(location.search),g=e.useCallback((function(e){var t=e.event;e.jsEvent.preventDefault(),m(t.url)}),[]),v=e.useCallback((function(e){var t=e.view;d((function(e){return C(C({},e),{},{month:t.currentStart.getMonth()+1,year:t.currentStart.getFullYear()})}))}),[d]),h=e.useMemo((function(){return!c&&u.filter((function(e){return e})).map((function(e){return{id:e.id,title:"string"==typeof n?e[n]:n(e),start:"string"==typeof a?e[a]:a(e),end:"string"==typeof o?e[o]:o(e),url:b({resource:p,id:e.id,type:i})}}))}),[c,u,p,b]);return{initialDate:y.has("month")?new Date(y.get("year"),y.get("month")-1):new Date,events:h,datesSet:v,eventClick:g}},R=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),N=function(e){var t=r.useTheme(),n=B(e);return R(),d.default.createElement(g.default,w({plugins:[v.default],locale:e.locale,initialView:"dayGridMonth",eventBackgroundColor:t.palette.primary.main},n))};N.defaultProps={linkType:"edit"};var z=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),_=function(e){var t=B(e);return z(),d.default.createElement(g.default,w({plugins:[O.default],locale:e.locale,initialView:"listMonth"},t))};_.defaultProps={linkType:"edit"};exports.CalendarList=N,exports.DateInput=function(e){return d.default.createElement(M,w({PickerComponent:i.DatePicker},e))},exports.DateTimeInput=function(e){return d.default.createElement(M,w({PickerComponent:i.DateTimePicker},e))},exports.DaysList=_,exports.KeyboardDateInput=function(e){return d.default.createElement(M,w({PickerComponent:i.DatePicker},e))},exports.KeyboardDateTimeInput=function(e){return d.default.createElement(M,w({PickerComponent:i.DateTimePicker},e))},exports.KeyboardTimeInput=function(e){return d.default.createElement(M,w({PickerComponent:i.TimePicker},e))},exports.TimeInput=function(e){return d.default.createElement(M,w({PickerComponent:i.TimePicker},e))},exports.useFullCalendarProps=B;
//# sourceMappingURL=index.cjs.js.map
