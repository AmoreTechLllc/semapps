"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-admin"),r=require("@mui/material"),n=require("@mui/lab/LocalizationProvider"),a=require("@date-io/date-fns"),o=require("@mui/icons-material/Clear"),i=require("@mui/lab"),l=require("@fullcalendar/react"),u=require("@fullcalendar/daygrid"),c=require("@mui/styles/makeStyles"),s=require("react-router-dom"),p=require("@fullcalendar/list");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=f(e),m=f(n),b=f(a),y=f(o),g=f(l),v=f(u),h=f(c),O=f(p);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},S=j(4),x=j(2),E=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,I=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=S(e.getFullYear()),r=x(e.getMonth()+1),n=x(e.getDate()),a=x(e.getHours()),o=x(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},q=function(e){return null==e||""===e?"":e instanceof Date?I(e):E.test(e)?e:I(new Date(e))},V=function(e){return e?new Date(e):""},F=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],A=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat","allowClear"],L=function(n){var a=n.PickerComponent,o=n.format,i=void 0===o?q:o,l=n.label,u=n.options,c=n.source,s=n.resource,p=n.helperText,f=n.margin,g=void 0===f?"dense":f,v=n.onBlur,h=n.onChange,O=n.onFocus,T=n.parse,D=void 0===T?V:T,j=n.validate,S=n.variant,x=void 0===S?"filled":S;n.defaultValue;var E,I=n.providerOptions,L=I.utils,M=I.locale,B=n.pickerVariant,R=void 0===B?"dialog":B,N=n.stringFormat,z=void 0===N?"ISO":N,_=n.allowClear,K=w(n,A),H=t.useTranslate(),U=t.useInput(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:v,onChange:h,onFocus:O,parse:D,resource:s,source:c,validate:j},K)),Y=U.id,$=U.input,G=U.isRequired,J=U.meta,Q=J.error,W=J.isTouched,X=e.useCallback((function(e){Date.parse(e)?$.onChange("ISO"===z?e.toISOString():e.toString()):$.onChange(null)}),[]),Z=e.useCallback((function(e){e.stopPropagation(),$.onChange(null)}),[]);return d.default.createElement(m.default,{utils:L||b.default,locale:M},d.default.createElement(a,k({id:Y,InputLabelProps:{shrink:!0},InputProps:{endAdornment:_?d.default.createElement(r.IconButton,{onClick:Z,size:"large"},d.default.createElement(y.default,null)):void 0},label:d.default.createElement(t.FieldTitle,{label:l,source:c,resource:s,isRequired:G}),variant:R,inputVariant:x,margin:g,error:!(!W||!Q),helperText:d.default.createElement(t.InputHelperText,{touched:W,error:Q,helperText:p}),clearLabel:H("ra.action.clear_input_value"),cancelLabel:H("ra.action.cancel")},u,((E=K).allowEmpty,E.alwaysOn,E.basePath,E.component,E.defaultValue,E.format,E.formClassName,E.initialValue,E.initializeForm,E.input,E.isRequired,E.label,E.limitChoicesToValue,E.locale,E.meta,E.options,E.optionText,E.optionValue,E.parse,E.record,E.resource,E.source,E.textAlign,E.translate,E.translateChoice,E.labelTime,w(E,F)),{value:$.value?new Date($.value):null,onChange:X,onBlur:function(){return $.onBlur($.value?"ISO"===z?new Date($.value).toISOString():new Date($.value).toString():null)}})))};L.defaultProps={isRequired:!1,meta:{isTouched:!1,error:!1},options:{},providerOptions:{utils:b.default,locale:void 0},parse:function(e){return""===e?null:e}};var M=function(r){var n=r.label,a=r.startDate,o=r.endDate,i=r.linkType,l=t.useListContext(),u=l.data,c=l.isLoading,p=l.resource,f=T(s.useSearchParams(),2);f[0];var d=f[1],m=s.useNavigate(),b=t.useCreatePath(),y=new URLSearchParams(location.search),g=e.useCallback((function(e){var t=e.event;e.jsEvent.preventDefault(),m(t.url)}),[]),v=e.useCallback((function(e){var t=e.view;d({month:t.currentStart.getMonth()+1,year:t.currentStart.getFullYear()})}),[d]),h=e.useMemo((function(){return!c&&u.filter((function(e){return e})).map((function(e){return{id:e.id,title:"string"==typeof n?e[n]:n(e),start:"string"==typeof a?e[a]:a(e),end:"string"==typeof o?e[o]:o(e),url:b({resource:p,id:e.id,type:i})}}))}),[c,u,p,b]);return{initialDate:y.has("month")?new Date(y.get("year"),y.get("month")-1):new Date,events:h,datesSet:v,eventClick:g}},B=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),R=function(e){var t=r.useTheme(),n=M(e);return B(),d.default.createElement(g.default,k({plugins:[v.default],locale:e.locale,initialView:"dayGridMonth",eventBackgroundColor:t.palette.primary.main},n))};R.defaultProps={linkType:"edit"};var N=h.default((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),z=function(e){var t=M(e);return N(),d.default.createElement(g.default,k({plugins:[O.default],locale:e.locale,initialView:"listMonth"},t))};z.defaultProps={linkType:"edit"};exports.CalendarList=R,exports.DateInput=function(e){return d.default.createElement(L,k({PickerComponent:i.DatePicker},e))},exports.DateTimeInput=function(e){return d.default.createElement(L,k({PickerComponent:i.DateTimePicker},e))},exports.DaysList=z,exports.KeyboardDateInput=function(e){return d.default.createElement(L,k({PickerComponent:i.DatePicker},e))},exports.KeyboardDateTimeInput=function(e){return d.default.createElement(L,k({PickerComponent:i.DateTimePicker},e))},exports.KeyboardTimeInput=function(e){return d.default.createElement(L,k({PickerComponent:i.TimePicker},e))},exports.TimeInput=function(e){return d.default.createElement(L,k({PickerComponent:i.TimePicker},e))},exports.useFullCalendarProps=M;
//# sourceMappingURL=index.cjs.js.map
