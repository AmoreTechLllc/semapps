"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@material-ui/pickers"),r=require("react-admin"),n=require("@date-io/date-fns"),a=require("@fullcalendar/react"),o=require("@fullcalendar/daygrid"),i=require("@material-ui/core"),l=require("react-router-dom"),u=require("@fullcalendar/list");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=c(e),p=c(n),d=c(a),f=c(o),m=c(u);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){return("0".repeat(e)+t).slice(-e)}},O=h(4),P=h(2),k=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/,C=function(e){if(!(e instanceof Date)||isNaN(e.getDate()))return"";var t=O(e.getFullYear()),r=P(e.getMonth()+1),n=P(e.getDate()),a=P(e.getHours()),o=P(e.getMinutes());return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(a,":").concat(o)},D=function(e){return null==e||""===e?"":e instanceof Date?C(e):k.test(e)?e:C(new Date(e))},T=function(e){return e?new Date(e):""},w=["allowEmpty","alwaysOn","basePath","component","defaultValue","format","formClassName","initialValue","initializeForm","input","isRequired","label","limitChoicesToValue","locale","meta","options","optionText","optionValue","parse","record","resource","source","textAlign","translate","translateChoice","labelTime"],j=["PickerComponent","format","label","options","source","resource","helperText","margin","onBlur","onChange","onFocus","parse","validate","variant","defaultValue","providerOptions","pickerVariant","stringFormat"],x=function(n){var a=n.PickerComponent,o=n.format,i=void 0===o?D:o,l=n.label,u=n.options,c=n.source,d=n.resource;n.helperText;var f=n.margin,m=void 0===f?"dense":f,h=n.onBlur,O=n.onChange,P=n.onFocus,k=n.parse,C=void 0===k?T:k,x=n.validate,S=n.variant,E=void 0===S?"filled":S;n.defaultValue;var V,q=n.providerOptions,I=q.utils,F=q.locale,M=n.pickerVariant,L=void 0===M?"dialog":M,R=n.stringFormat,B=void 0===R?"ISO":R,K=y(n,j),N=r.useTranslate(),_=r.useInput(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({format:i,onBlur:h,onChange:O,onFocus:P,parse:C,resource:d,source:c,validate:x},K)),z=_.id,A=_.input,H=_.isRequired,U=_.meta,Y=U.error,G=U.touched,$=e.useCallback((function(e){Date.parse(e)?A.onChange("ISO"===B?e.toISOString():e.toString()):A.onChange(null)}),[]);return s.default.createElement(t.MuiPickersUtilsProvider,{utils:I||p.default,locale:F},s.default.createElement(a,g({id:z,InputLabelProps:{shrink:!0},label:s.default.createElement(r.FieldTitle,{label:l,source:c,resource:d,isRequired:H}),variant:L,inputVariant:E,margin:m,error:!(!G||!Y),helperText:" ",clearLabel:N("ra.action.clear_input_value"),cancelLabel:N("ra.action.cancel")},u,((V=K).allowEmpty,V.alwaysOn,V.basePath,V.component,V.defaultValue,V.format,V.formClassName,V.initialValue,V.initializeForm,V.input,V.isRequired,V.label,V.limitChoicesToValue,V.locale,V.meta,V.options,V.optionText,V.optionValue,V.parse,V.record,V.resource,V.source,V.textAlign,V.translate,V.translateChoice,V.labelTime,y(V,w)),{value:A.value?new Date(A.value):null,onChange:function(e){return $(e)},onBlur:function(){return A.onBlur(A.value?"ISO"===B?new Date(A.value).toISOString():new Date(A.value).toString():null)}})))};x.defaultProps={isRequired:!1,meta:{touched:!1,error:!1},options:{},providerOptions:{utils:p.default,locale:void 0}};var S=function(t){var n=t.label,a=t.startDate,o=t.endDate,i=t.linkType,u=l.useHistory(),c=r.useListContext(),s=c.ids,p=c.data,d=c.basePath,f=new URLSearchParams(u.location.search),m=e.useCallback((function(e){var t=e.event;e.jsEvent.preventDefault(),u.push(t.url)}),[]),b=e.useCallback((function(e){var t=e.view;f.set("month",t.currentStart.getMonth()+1),f.set("year",t.currentStart.getFullYear()),u.replace({pathname:u.location.pathname,search:"?"+f.toString()})}),[f]),v=e.useMemo((function(){return s.map((function(e){return{id:e,title:"string"==typeof n?p[e][n]:n(p[e]),start:"string"==typeof a?p[e][a]:a(p[e]),end:"string"==typeof o?p[e][o]:o(p[e]),url:r.linkToRecord(d,e)+"/"+i}}))}),[p,s,d]);return{initialDate:f.has("month")?new Date(f.get("year"),f.get("month")-1):new Date,events:v,datesSet:b,eventClick:m}},E=i.makeStyles((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"},".fc-day-today":{backgroundColor:e.palette.secondary.light+" !important"},"a.fc-daygrid-dot-event":{color:"black !important"}}}})),V=function(e){var t=i.useTheme(),r=S(e);return E(),s.default.createElement(d.default,g({plugins:[f.default],locale:e.locale,initialView:"dayGridMonth",eventBackgroundColor:t.palette.primary.main},r))};V.defaultProps={linkType:"edit"};var q=i.makeStyles((function(e){return{"@global":{".fc-button":{backgroundColor:e.palette.primary.main+" !important",border:"none !important",opacity:"1 !important"}}}})),I=function(e){var t=S(e);return q(),s.default.createElement(d.default,g({plugins:[m.default],locale:e.locale,initialView:"listMonth"},t))};I.defaultProps={linkType:"edit"};exports.CalendarList=V,exports.DateInput=function(e){return s.default.createElement(x,g({PickerComponent:t.DatePicker},e))},exports.DateTimeInput=function(e){return s.default.createElement(x,g({PickerComponent:t.DateTimePicker},e))},exports.DaysList=I,exports.KeyboardDateInput=function(e){return s.default.createElement(x,g({PickerComponent:t.KeyboardDatePicker},e))},exports.KeyboardDateTimeInput=function(e){return s.default.createElement(x,g({PickerComponent:t.KeyboardDateTimePicker},e))},exports.KeyboardTimeInput=function(e){return s.default.createElement(x,g({PickerComponent:t.KeyboardTimePicker},e))},exports.TimeInput=function(e){return s.default.createElement(x,g({PickerComponent:t.TimePicker},e))},exports.useFullCalendarProps=S;
//# sourceMappingURL=index.cjs.js.map
