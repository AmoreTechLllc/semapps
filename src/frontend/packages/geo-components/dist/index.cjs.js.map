{"version":3,"file":"index.cjs.js","sources":["../src/DefaultPopupContent.js","../../../node_modules/autosuggest-highlight/match/index.js","../../../node_modules/autosuggest-highlight/parse/index.js","../src/LocationInput.js","../src/QueryStringUpdater.js","../src/MapList.js","../src/ChangeView.js","../src/MapField.js","../src/extractContext.js"],"sourcesContent":["import React from 'react';\nimport { ShowButton, EditButton, useResourceDefinition } from 'react-admin';\nimport { Typography } from '@material-ui/core';\n\nconst DefaultPopupContent = ({ record, basePath }) => {\n  const resourceDefinition = useResourceDefinition({});\n  return (\n    <>\n      {record.label && <Typography variant=\"h5\">{record.label}</Typography>}\n      {record.description && (\n        <Typography>\n          {record.description.length > 150 ? record.description.substring(0, 150) + '...' : record.description}\n        </Typography>\n      )}\n      {resourceDefinition.hasShow && <ShowButton basePath={basePath} record={record} />}\n      {resourceDefinition.hasEdit && <EditButton basePath={basePath} record={record} />}\n    </>\n  );\n};\n\nexport default DefaultPopupContent;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.AutosuggestHighlightMatch=t():e.AutosuggestHighlightMatch=t()}(this,(()=>{return e={772:(e,t,o)=>{const r=o(826).remove,i=/[.*+?^${}()|[\\]\\\\]/g,n=/[a-z0-9_]/i,u=/\\s+/;e.exports=function(e,t,o){var s,a;a={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},s=(s=o)||{},Object.keys(s).forEach((e=>{a[e]=!!s[e]})),o=a;const c=Array.from(e).map((e=>r(e)));let l=c.join(\"\");return(t=r(t)).trim().split(u).filter((e=>e.length>0)).reduce(((e,t)=>{const r=t.length,u=!o.insideWords&&n.test(t[0])?\"\\\\b\":\"\",s=new RegExp(u+t.replace(i,\"\\\\$&\"),\"i\");let a,A;if(a=s.exec(l),o.requireMatchAll&&null===a)return l=\"\",[];for(;a;){A=a.index;const t=r-c.slice(A,A+r).join(\"\").length,i=A-c.slice(0,A).join(\"\").length,n=[A+i,A+r+i+t];if(n[0]!==n[1]&&e.push(n),l=l.slice(0,A)+new Array(r+1).join(\" \")+l.slice(A+r),!o.findAllOccurrences)break;a=s.exec(l)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={À:\"A\",Á:\"A\",Â:\"A\",Ã:\"A\",Ä:\"A\",Å:\"A\",Ấ:\"A\",Ắ:\"A\",Ẳ:\"A\",Ẵ:\"A\",Ặ:\"A\",Æ:\"AE\",Ầ:\"A\",Ằ:\"A\",Ȃ:\"A\",Ç:\"C\",Ḉ:\"C\",È:\"E\",É:\"E\",Ê:\"E\",Ë:\"E\",Ế:\"E\",Ḗ:\"E\",Ề:\"E\",Ḕ:\"E\",Ḝ:\"E\",Ȇ:\"E\",Ì:\"I\",Í:\"I\",Î:\"I\",Ï:\"I\",Ḯ:\"I\",Ȋ:\"I\",Ð:\"D\",Ñ:\"N\",Ò:\"O\",Ó:\"O\",Ô:\"O\",Õ:\"O\",Ö:\"O\",Ø:\"O\",Ố:\"O\",Ṍ:\"O\",Ṓ:\"O\",Ȏ:\"O\",Ù:\"U\",Ú:\"U\",Û:\"U\",Ü:\"U\",Ý:\"Y\",à:\"a\",á:\"a\",â:\"a\",ã:\"a\",ä:\"a\",å:\"a\",ấ:\"a\",ắ:\"a\",ẳ:\"a\",ẵ:\"a\",ặ:\"a\",æ:\"ae\",ầ:\"a\",ằ:\"a\",ȃ:\"a\",ç:\"c\",ḉ:\"c\",è:\"e\",é:\"e\",ê:\"e\",ë:\"e\",ế:\"e\",ḗ:\"e\",ề:\"e\",ḕ:\"e\",ḝ:\"e\",ȇ:\"e\",ì:\"i\",í:\"i\",î:\"i\",ï:\"i\",ḯ:\"i\",ȋ:\"i\",ð:\"d\",ñ:\"n\",ò:\"o\",ó:\"o\",ô:\"o\",õ:\"o\",ö:\"o\",ø:\"o\",ố:\"o\",ṍ:\"o\",ṓ:\"o\",ȏ:\"o\",ù:\"u\",ú:\"u\",û:\"u\",ü:\"u\",ý:\"y\",ÿ:\"y\",Ā:\"A\",ā:\"a\",Ă:\"A\",ă:\"a\",Ą:\"A\",ą:\"a\",Ć:\"C\",ć:\"c\",Ĉ:\"C\",ĉ:\"c\",Ċ:\"C\",ċ:\"c\",Č:\"C\",č:\"c\",C̆:\"C\",c̆:\"c\",Ď:\"D\",ď:\"d\",Đ:\"D\",đ:\"d\",Ē:\"E\",ē:\"e\",Ĕ:\"E\",ĕ:\"e\",Ė:\"E\",ė:\"e\",Ę:\"E\",ę:\"e\",Ě:\"E\",ě:\"e\",Ĝ:\"G\",Ǵ:\"G\",ĝ:\"g\",ǵ:\"g\",Ğ:\"G\",ğ:\"g\",Ġ:\"G\",ġ:\"g\",Ģ:\"G\",ģ:\"g\",Ĥ:\"H\",ĥ:\"h\",Ħ:\"H\",ħ:\"h\",Ḫ:\"H\",ḫ:\"h\",Ĩ:\"I\",ĩ:\"i\",Ī:\"I\",ī:\"i\",Ĭ:\"I\",ĭ:\"i\",Į:\"I\",į:\"i\",İ:\"I\",ı:\"i\",Ĳ:\"IJ\",ĳ:\"ij\",Ĵ:\"J\",ĵ:\"j\",Ķ:\"K\",ķ:\"k\",Ḱ:\"K\",ḱ:\"k\",K̆:\"K\",k̆:\"k\",Ĺ:\"L\",ĺ:\"l\",Ļ:\"L\",ļ:\"l\",Ľ:\"L\",ľ:\"l\",Ŀ:\"L\",ŀ:\"l\",Ł:\"l\",ł:\"l\",Ḿ:\"M\",ḿ:\"m\",M̆:\"M\",m̆:\"m\",Ń:\"N\",ń:\"n\",Ņ:\"N\",ņ:\"n\",Ň:\"N\",ň:\"n\",ŉ:\"n\",N̆:\"N\",n̆:\"n\",Ō:\"O\",ō:\"o\",Ŏ:\"O\",ŏ:\"o\",Ő:\"O\",ő:\"o\",Œ:\"OE\",œ:\"oe\",P̆:\"P\",p̆:\"p\",Ŕ:\"R\",ŕ:\"r\",Ŗ:\"R\",ŗ:\"r\",Ř:\"R\",ř:\"r\",R̆:\"R\",r̆:\"r\",Ȓ:\"R\",ȓ:\"r\",Ś:\"S\",ś:\"s\",Ŝ:\"S\",ŝ:\"s\",Ş:\"S\",Ș:\"S\",ș:\"s\",ş:\"s\",Š:\"S\",š:\"s\",Ţ:\"T\",ţ:\"t\",ț:\"t\",Ț:\"T\",Ť:\"T\",ť:\"t\",Ŧ:\"T\",ŧ:\"t\",T̆:\"T\",t̆:\"t\",Ũ:\"U\",ũ:\"u\",Ū:\"U\",ū:\"u\",Ŭ:\"U\",ŭ:\"u\",Ů:\"U\",ů:\"u\",Ű:\"U\",ű:\"u\",Ų:\"U\",ų:\"u\",Ȗ:\"U\",ȗ:\"u\",V̆:\"V\",v̆:\"v\",Ŵ:\"W\",ŵ:\"w\",Ẃ:\"W\",ẃ:\"w\",X̆:\"X\",x̆:\"x\",Ŷ:\"Y\",ŷ:\"y\",Ÿ:\"Y\",Y̆:\"Y\",y̆:\"y\",Ź:\"Z\",ź:\"z\",Ż:\"Z\",ż:\"z\",Ž:\"Z\",ž:\"z\",ſ:\"s\",ƒ:\"f\",Ơ:\"O\",ơ:\"o\",Ư:\"U\",ư:\"u\",Ǎ:\"A\",ǎ:\"a\",Ǐ:\"I\",ǐ:\"i\",Ǒ:\"O\",ǒ:\"o\",Ǔ:\"U\",ǔ:\"u\",Ǖ:\"U\",ǖ:\"u\",Ǘ:\"U\",ǘ:\"u\",Ǚ:\"U\",ǚ:\"u\",Ǜ:\"U\",ǜ:\"u\",Ứ:\"U\",ứ:\"u\",Ṹ:\"U\",ṹ:\"u\",Ǻ:\"A\",ǻ:\"a\",Ǽ:\"AE\",ǽ:\"ae\",Ǿ:\"O\",ǿ:\"o\",Þ:\"TH\",þ:\"th\",Ṕ:\"P\",ṕ:\"p\",Ṥ:\"S\",ṥ:\"s\",X́:\"X\",x́:\"x\",Ѓ:\"Г\",ѓ:\"г\",Ќ:\"К\",ќ:\"к\",A̋:\"A\",a̋:\"a\",E̋:\"E\",e̋:\"e\",I̋:\"I\",i̋:\"i\",Ǹ:\"N\",ǹ:\"n\",Ồ:\"O\",ồ:\"o\",Ṑ:\"O\",ṑ:\"o\",Ừ:\"U\",ừ:\"u\",Ẁ:\"W\",ẁ:\"w\",Ỳ:\"Y\",ỳ:\"y\",Ȁ:\"A\",ȁ:\"a\",Ȅ:\"E\",ȅ:\"e\",Ȉ:\"I\",ȉ:\"i\",Ȍ:\"O\",ȍ:\"o\",Ȑ:\"R\",ȑ:\"r\",Ȕ:\"U\",ȕ:\"u\",B̌:\"B\",b̌:\"b\",Č̣:\"C\",č̣:\"c\",Ê̌:\"E\",ê̌:\"e\",F̌:\"F\",f̌:\"f\",Ǧ:\"G\",ǧ:\"g\",Ȟ:\"H\",ȟ:\"h\",J̌:\"J\",ǰ:\"j\",Ǩ:\"K\",ǩ:\"k\",M̌:\"M\",m̌:\"m\",P̌:\"P\",p̌:\"p\",Q̌:\"Q\",q̌:\"q\",Ř̩:\"R\",ř̩:\"r\",Ṧ:\"S\",ṧ:\"s\",V̌:\"V\",v̌:\"v\",W̌:\"W\",w̌:\"w\",X̌:\"X\",x̌:\"x\",Y̌:\"Y\",y̌:\"y\",A̧:\"A\",a̧:\"a\",B̧:\"B\",b̧:\"b\",Ḑ:\"D\",ḑ:\"d\",Ȩ:\"E\",ȩ:\"e\",Ɛ̧:\"E\",ɛ̧:\"e\",Ḩ:\"H\",ḩ:\"h\",I̧:\"I\",i̧:\"i\",Ɨ̧:\"I\",ɨ̧:\"i\",M̧:\"M\",m̧:\"m\",O̧:\"O\",o̧:\"o\",Q̧:\"Q\",q̧:\"q\",U̧:\"U\",u̧:\"u\",X̧:\"X\",x̧:\"x\",Z̧:\"Z\",z̧:\"z\"},o=Object.keys(t).join(\"|\"),r=new RegExp(o,\"g\"),i=new RegExp(o,\"\"),n=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=n,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=n}},t={},function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(772);var e,t}));","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.AutosuggestHighlightParse=e():t.AutosuggestHighlightParse=e()}(this,(()=>{return t={705:t=>{t.exports=function(t,e){const h=[];return 0===e.length?h.push({text:t,highlight:!1}):e[0][0]>0&&h.push({text:t.slice(0,e[0][0]),highlight:!1}),e.forEach(((i,o)=>{const s=i[0],r=i[1];h.push({text:t.slice(s,r),highlight:!0}),o===e.length-1?r<t.length&&h.push({text:t.slice(r,t.length),highlight:!1}):r<e[o+1][0]&&h.push({text:t.slice(r,e[o+1][0]),highlight:!1})})),h}}},e={},function h(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,h),s.exports}(705);var t,e}));","import React, { useState, useMemo, useEffect } from 'react';\nimport { FieldTitle, InputHelperText, useInput, useTranslate, useLocale } from 'react-admin';\nimport { TextField, Typography, Grid, makeStyles } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport { default as highlightMatch } from 'autosuggest-highlight/match';\nimport { default as highlightParse } from 'autosuggest-highlight/parse';\nimport throttle from 'lodash.throttle';\n\nconst useStyles = makeStyles(theme => ({\n  icon: {\n    color: theme.palette.text.secondary,\n    marginRight: theme.spacing(2)\n  }\n}));\n\nconst selectOptionText = (option, optionText) => {\n  if (option.place_name) {\n    return option.place_name;\n  } else if (typeof optionText === 'string') {\n    return option[optionText];\n  } else if (typeof optionText === 'function') {\n    return optionText(option);\n  }\n};\n\nconst LocationInput = ({\n  mapboxConfig,\n  record,\n  resource,\n  source,\n  label,\n  basePath,\n  parse,\n  optionText,\n  helperText,\n  ...rest\n}) => {\n  if (!mapboxConfig) {\n    throw new Error('@semapps/geo-components : No mapbox configuration');\n  }\n  if (!mapboxConfig.access_token) {\n    throw new Error('@semapps/geo-components : No access token in mapbox configuration');\n  }\n\n  const classes = useStyles();\n  const locale = useLocale();\n  const translate = useTranslate();\n\n  const [keyword, setKeyword] = useState(''); // Typed keywords\n  const [options, setOptions] = useState([]); // Options returned by MapBox\n\n  // Do not pass the `parse` prop to useInput, as we manually call it on the onChange prop below\n  const {\n    input: { value, onChange, onBlur, onFocus },\n    isRequired,\n    meta: { error, submitError, touched }\n  } = useInput({ resource, source, ...rest });\n\n  const fetchMapbox = useMemo(\n    () =>\n      throttle((keyword, callback) => {\n        const fetchUrl = new URL(`https://api.mapbox.com/geocoding/v5/mapbox.places/${keyword}.json`);\n\n        // Use locale as default language\n        if (!mapboxConfig.language) mapboxConfig.language = locale;\n\n        // All options available at https://docs.mapbox.com/api/search/geocoding/#forward-geocoding\n        Object.entries(mapboxConfig).forEach(([key, value]) => {\n          if (Array.isArray(value)) {\n            value = value.join(',');\n          } else if (typeof value === 'boolean') {\n            value = value ? 'true' : 'false';\n          }\n          fetchUrl.searchParams.set(key, value);\n        });\n\n        fetch(fetchUrl.toString())\n          .then(res => res.json())\n          .then(json => callback(json));\n      }, 200),\n    [mapboxConfig, locale]\n  );\n\n  useEffect(() => {\n    // Do not trigger search if text input is empty or if it is the same as the current value\n    if (!keyword || keyword === selectOptionText(value, optionText)) {\n      return undefined;\n    } else {\n      fetchMapbox(keyword, results => setOptions(results.features));\n    }\n  }, [value, keyword, fetchMapbox]);\n\n  return (\n    <Autocomplete\n      autoComplete\n      value={value || null}\n      // We must include the current value as an option, to avoid this error\n      // https://github.com/mui-org/material-ui/issues/18514#issuecomment-636096386\n      options={value ? [value, ...options] : options}\n      // Do not show the current value as an option (this would break renderOptions)\n      filterSelectedOptions\n      // For some reasons, this prop has to be passed\n      filterOptions={x => x}\n      getOptionLabel={option => selectOptionText(option, optionText)}\n      getOptionSelected={(option, value) =>\n        selectOptionText(option, optionText) === selectOptionText(value, optionText)\n      }\n      // This function is called when the user selects an option\n      onChange={(event, newValue) => {\n        // Parse only if the value is not null (happens if the user clears the value)\n        if (newValue && parse) newValue = parse(newValue);\n        onChange(newValue);\n        setOptions([]);\n      }}\n      onInputChange={(event, newKeyword) => setKeyword(newKeyword)}\n      noOptionsText={translate('ra.navigation.no_results')}\n      renderInput={params => {\n        // Autocomplete=off doesn't work anymore in modern browsers\n        // https://stackoverflow.com/a/40791726/7900695\n        params.inputProps.autoComplete = 'new-password';\n        return (\n          <TextField\n            {...params}\n            inputProps={{\n              ...params.inputProps,\n              onBlur: e => {\n                onBlur(e);\n                if (params.inputProps.onBlur) {\n                  params.inputProps.onBlur(e);\n                }\n              },\n              onFocus: e => {\n                onFocus(e);\n                if (params.inputProps.onFocus) {\n                  params.inputProps.onFocus(e);\n                }\n              }\n            }}\n            label={\n              label !== '' &&\n              label !== false && (\n                <FieldTitle label={label} source={source} resource={resource} isRequired={isRequired} />\n              )\n            }\n            error={!!(touched && (error || submitError))}\n            helperText={<InputHelperText touched={touched} error={error || submitError} helperText={helperText} />}\n            {...rest}\n          />\n        );\n      }}\n      renderOption={option => {\n        const matches = highlightMatch(option.text, keyword);\n        const parts = highlightParse(option.text, matches);\n\n        return (\n          <Grid container alignItems=\"center\">\n            <Grid item>\n              <LocationOnIcon className={classes.icon} />\n            </Grid>\n            <Grid item xs>\n              {typeof parts === 'string'\n                ? parts\n                : parts.map((part, index) => (\n                    <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                      {part.text}\n                    </span>\n                  ))}\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {option.place_name}\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }}\n    />\n  );\n};\n\nLocationInput.defaultProps = {\n  variant: 'filled',\n  margin: 'dense'\n};\n\nexport default LocationInput;\n","import React from 'react';\nimport { useHistory } from 'react-router';\nimport { useMapEvents } from 'react-leaflet';\n\n// Keep the zoom and center in query string, so that when we navigate back to the page, it stays focused on the same area\nconst QueryStringUpdater = () => {\n  const history = useHistory();\n  const query = new URLSearchParams(history.location.search);\n\n  useMapEvents({\n    moveend: test => {\n      query.set('lat', test.target.getCenter().lat);\n      query.set('lng', test.target.getCenter().lng);\n      history.replace({ pathname: history.location.pathname, search: '?' + query.toString() });\n    },\n    zoomend: test => {\n      query.set('zoom', test.target.getZoom());\n      history.replace({ pathname: history.location.pathname, search: '?' + query.toString() });\n    }\n  });\n  return null;\n};\n\nexport default QueryStringUpdater;\n","import React, { useState } from 'react';\nimport { useListContext } from 'react-admin';\nimport { useLocation } from 'react-router';\nimport { useMediaQuery, Drawer, Box, IconButton, makeStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport DefaultPopupContent from './DefaultPopupContent';\nimport QueryStringUpdater from './QueryStringUpdater';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles(() => ({\n  loading: {\n    zIndex: 1000,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  closeButton: {\n    position: 'absolute',\n    zIndex: 1400,\n    top: 0,\n    right: 0\n  }\n}));\n\nconst MapList = ({\n  latitude,\n  longitude,\n  label,\n  description,\n  popupContent,\n  height,\n  center,\n  zoom,\n  groupClusters,\n  boundToMarkers,\n  connectMarkers,\n  ...otherProps\n}) => {\n  const { ids, data, basePath, loading } = useListContext();\n  const xs = useMediaQuery(theme => theme.breakpoints.down('xs'), { noSsr: true });\n  const [drawerRecord, setDrawerRecord] = useState(null);\n  const [map, setMap] = useState(null);\n  const classes = useStyles();\n\n  // Get the zoom and center from query string, if available\n  const query = new URLSearchParams(useLocation().search);\n  center = query.has('lat') && query.has('lng') ? [query.get('lat'), query.get('lng')] : center;\n  zoom = query.has('zoom') ? query.get('zoom') : zoom;\n\n  let previousRecord;\n\n  const records = ids\n    .filter(id => data[id])\n    .map(id => ({\n      ...data[id],\n      latitude: latitude && latitude(data[id]),\n      longitude: longitude && longitude(data[id]),\n      label: label && label(data[id]),\n      description: description && description(data[id])\n    }))\n    .filter(record => record.latitude && record.longitude);\n\n  const bounds =\n    boundToMarkers && records.length > 0 ? records.map(record => [record.latitude, record.longitude]) : undefined;\n\n  // Do not display anything if the bounds are not ready, otherwise the MapContainer will not be initialized correctly\n  if (boundToMarkers && !bounds) return null;\n\n  const markers = records.map((record, i) => {\n    const marker = (\n      <React.Fragment key={i}>\n        <Marker\n          position={[record.latitude, record.longitude]}\n          eventHandlers={\n            xs\n              ? {\n                  click: () => {\n                    map.setView([record.latitude, record.longitude]);\n                    setDrawerRecord(record);\n                  }\n                }\n              : undefined\n          }\n        >\n          {!xs && <Popup>{React.createElement(popupContent, { record, basePath })}</Popup>}\n        </Marker>\n        {connectMarkers && previousRecord && (\n          <Polyline\n            positions={[\n              [previousRecord.latitude, previousRecord.longitude],\n              [record.latitude, record.longitude]\n            ]}\n          />\n        )}\n      </React.Fragment>\n    );\n\n    // Save record so that we can trace lines\n    previousRecord = record;\n\n    return marker;\n  });\n\n  return (\n    <MapContainer\n      style={{ height }}\n      center={!boundToMarkers ? center : undefined}\n      zoom={!boundToMarkers ? zoom : undefined}\n      bounds={bounds}\n      whenCreated={setMap}\n      {...otherProps}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {loading && (\n        <Box alignItems=\"center\" className={classes.loading}>\n          <CircularProgress size={60} thickness={6} />\n        </Box>\n      )}\n      {groupClusters ? <MarkerClusterGroup showCoverageOnHover={false}>{markers}</MarkerClusterGroup> : markers}\n      <QueryStringUpdater />\n      <Drawer anchor=\"bottom\" open={!!drawerRecord} onClose={() => setDrawerRecord(null)}>\n        <Box p={1} position=\"relative\">\n          <IconButton onClick={() => setDrawerRecord(null)} className={classes.closeButton}>\n            <CloseIcon />\n          </IconButton>\n          {drawerRecord && React.createElement(popupContent, { record: drawerRecord, basePath })}\n        </Box>\n      </Drawer>\n    </MapContainer>\n  );\n};\n\nMapList.defaultProps = {\n  height: 700,\n  center: [47, 2.213749],\n  zoom: 6,\n  groupClusters: true,\n  connectMarkers: false,\n  scrollWheelZoom: false,\n  popupContent: DefaultPopupContent\n};\n\nexport default MapList;\n","import React from 'react';\nimport { useMap } from 'react-leaflet';\n\nconst ChangeView = ({ center, zoom }) => {\n  const map = useMap();\n  map.setView(center, zoom);\n  return null;\n};\n\nexport default ChangeView;\n","import React from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport { Box, Typography } from '@material-ui/core';\nimport ChangeView from './ChangeView';\n\nconst MapField = ({ record, latitude, longitude, address, height, addLabel, typographyProps, ...rest }) => {\n  // Do not display the component if it has no latitude or longitude\n  const position = [latitude(record), longitude(record)];\n  if (!position[0] || !position[1]) return null;\n\n  return (\n    <Box>\n      {address && (\n        <Box mt={1} mb={1}>\n          <Typography {...typographyProps}>{address(record)}</Typography>\n        </Box>\n      )}\n      <MapContainer style={{ height }} center={position} {...rest}>\n        <ChangeView center={position} />\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <Marker position={position} />\n      </MapContainer>\n    </Box>\n  );\n};\n\nMapField.defaultProps = {\n  height: 400,\n  zoom: 11,\n  addLabel: true\n};\n\nexport default MapField;\n","const extractContext = (context, key) => {\n  const property = context.find(property => property.id.startsWith(key + '.'));\n  if (property) return property.text;\n};\n\nexport default extractContext;\n"],"names":["DefaultPopupContent","_ref","record","basePath","resourceDefinition","useResourceDefinition","React","label","Typography","variant","description","length","substring","hasShow","ShowButton","hasEdit","EditButton","e","t","module","exports","772","o","r","remove","i","n","u","s","a","insideWords","findAllOccurrences","requireMatchAll","Object","keys","forEach","c","Array","from","map","l","join","trim","split","filter","reduce","test","RegExp","replace","A","exec","index","slice","push","sort","826","À","Á","Â","Ã","Ä","Å","Ấ","Ắ","Ẳ","Ẵ","Ặ","Æ","Ầ","Ằ","Ȃ","Ç","Ḉ","È","É","Ê","Ë","Ế","Ḗ","Ề","Ḕ","Ḝ","Ȇ","Ì","Í","Î","Ï","Ḯ","Ȋ","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ố","Ṍ","Ṓ","Ȏ","Ù","Ú","Û","Ü","Ý","à","á","â","ã","ä","å","ấ","ắ","ẳ","ẵ","ặ","æ","ầ","ằ","ȃ","ç","ḉ","è","é","ê","ë","ế","ḗ","ề","ḕ","ḝ","ȇ","ì","í","î","ï","ḯ","ȋ","ð","ñ","ò","ó","ô","õ","ö","ø","ố","ṍ","ṓ","ȏ","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","C̆","c̆","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","Ǵ","ĝ","ǵ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ḫ","ḫ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ḱ","ḱ","K̆","k̆","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ḿ","ḿ","M̆","m̆","Ń","ń","Ņ","ņ","Ň","ň","ŉ","N̆","n̆","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","P̆","p̆","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","R̆","r̆","Ȓ","ȓ","Ś","ś","Ŝ","ŝ","Ş","Ș","ș","ş","Š","š","Ţ","ţ","ț","Ț","Ť","ť","Ŧ","ŧ","T̆","t̆","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ȗ","ȗ","V̆","v̆","Ŵ","ŵ","Ẃ","ẃ","X̆","x̆","Ŷ","ŷ","Ÿ","Y̆","y̆","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ứ","ứ","Ṹ","ṹ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","Þ","þ","Ṕ","ṕ","Ṥ","ṥ","X́","x́","Ѓ","ѓ","Ќ","ќ","A̋","a̋","E̋","e̋","I̋","i̋","Ǹ","ǹ","Ồ","ồ","Ṑ","ṑ","Ừ","ừ","Ẁ","ẁ","Ỳ","ỳ","Ȁ","ȁ","Ȅ","ȅ","Ȉ","ȉ","Ȍ","ȍ","Ȑ","ȑ","Ȕ","ȕ","B̌","b̌","Č̣","č̣","Ê̌","ê̌","F̌","f̌","Ǧ","ǧ","Ȟ","ȟ","J̌","ǰ","Ǩ","ǩ","M̌","m̌","P̌","p̌","Q̌","q̌","Ř̩","ř̩","Ṧ","ṧ","V̌","v̌","W̌","w̌","X̌","x̌","Y̌","y̌","A̧","a̧","B̧","b̧","Ḑ","ḑ","Ȩ","ȩ","Ɛ̧","ɛ̧","Ḩ","ḩ","I̧","i̧","Ɨ̧","ɨ̧","M̧","m̧","O̧","o̧","Q̧","q̧","U̧","u̧","X̧","x̧","Z̧","z̧","has","match","705","h","text","highlight","useStyles","makeStyles","theme","icon","color","palette","secondary","marginRight","spacing","selectOptionText","option","optionText","place_name","LocationInput","mapboxConfig","resource","source","parse","helperText","rest","_objectWithoutProperties","_excluded","Error","access_token","classes","locale","useLocale","translate","useTranslate","_useState2","_slicedToArray","useState","keyword","setKeyword","_useState4","options","setOptions","_useInput","useInput","_objectSpread","_useInput$input","input","value","onChange","onBlur","onFocus","isRequired","_useInput$meta","meta","error","submitError","touched","fetchMapbox","useMemo","throttle","callback","fetchUrl","URL","language","entries","_ref2","_ref3","key","isArray","searchParams","set","fetch","toString","then","res","json","useEffect","results","features","Autocomplete","autoComplete","filterSelectedOptions","filterOptions","x","getOptionLabel","getOptionSelected","event","newValue","onInputChange","newKeyword","noOptionsText","renderInput","params","inputProps","createElement","TextField","_extends","FieldTitle","InputHelperText","renderOption","matches","highlightMatch","parts","highlightParse","Grid","container","alignItems","item","LocationOnIcon","className","xs","part","style","fontWeight","defaultProps","margin","QueryStringUpdater","history","useHistory","query","URLSearchParams","location","search","useMapEvents","moveend","target","getCenter","lat","lng","pathname","zoomend","getZoom","loading","zIndex","position","top","left","right","bottom","display","justifyContent","closeButton","MapList","previousRecord","latitude","longitude","popupContent","height","center","zoom","groupClusters","boundToMarkers","connectMarkers","otherProps","_useListContext","useListContext","ids","data","useMediaQuery","breakpoints","down","noSsr","drawerRecord","setDrawerRecord","setMap","useLocation","get","records","id","bounds","undefined","markers","marker","Fragment","Marker","eventHandlers","click","setView","Popup","Polyline","positions","MapContainer","whenCreated","TileLayer","attribution","url","Box","CircularProgress","size","thickness","MarkerClusterGroup","showCoverageOnHover","Drawer","anchor","open","onClose","p","IconButton","onClick","CloseIcon","scrollWheelZoom","ChangeView","useMap","MapField","address","addLabel","typographyProps","mt","mb","context","property","find","startsWith"],"mappings":"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,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,KAAKhb,EAAEW,OAAOC,KAAKhB,GAAGuB,KAAK,KAAKlB,EAAE,IAAIwB,OAAOzB,EAAE,KAAKG,EAAE,IAAIsB,OAAOzB,EAAE,IAAII,EAAE,SAAST,GAAG,OAAOA,EAAE+B,QAAQzB,GAAG,SAASN,GAAG,OAAOC,EAAED,OAAOA,EAAEG,QAAQM,EAAET,EAAEG,QAAQmb,IAAI,SAAStb,GAAG,QAAQA,EAAEub,MAAM/a,IAAIR,EAAEG,QAAQI,OAAOE,IAAIR,EAAE,GAAG,SAASI,EAAEC,GAAG,IAAIE,EAAEP,EAAEK,GAAG,QAAG,IAASE,EAAE,OAAOA,EAAEL,QAAQ,IAAIM,EAAER,EAAEK,GAAG,CAACH,QAAQ,IAAI,OAAOH,EAAEM,GAAGG,EAAEA,EAAEN,QAAQE,GAAGI,EAAEN,QAA7G,CAAsH,4DCAljH,IAA2gBF,EAAED,EAAzrBE,EAAAC,SAAwLF,EAAE,CAACub,IAAIvb,IAAIA,EAAEE,QAAQ,SAASF,EAAED,GAAG,MAAMyb,EAAE,GAAG,OAAO,IAAIzb,EAAEN,OAAO+b,EAAErZ,KAAK,CAACsZ,KAAKzb,EAAE0b,WAAU,IAAK3b,EAAE,GAAG,GAAG,GAAGyb,EAAErZ,KAAK,CAACsZ,KAAKzb,EAAEkC,MAAM,EAAEnC,EAAE,GAAG,IAAI2b,WAAU,IAAK3b,EAAEkB,QAAS,CAACV,EAAEH,KAAK,MAAMM,EAAEH,EAAE,GAAGF,EAAEE,EAAE,GAAGib,EAAErZ,KAAK,CAACsZ,KAAKzb,EAAEkC,MAAMxB,EAAEL,GAAGqb,WAAU,IAAKtb,IAAIL,EAAEN,OAAO,EAAEY,EAAEL,EAAEP,QAAQ+b,EAAErZ,KAAK,CAACsZ,KAAKzb,EAAEkC,MAAM7B,EAAEL,EAAEP,QAAQic,WAAU,IAAKrb,EAAEN,EAAEK,EAAE,GAAG,IAAIob,EAAErZ,KAAK,CAACsZ,KAAKzb,EAAEkC,MAAM7B,EAAEN,EAAEK,EAAE,GAAG,IAAIsb,WAAU,MAAQF,KAAKzb,EAAE,GAAG,SAASyb,EAAEjb,GAAG,IAAIH,EAAEL,EAAEQ,GAAG,QAAG,IAASH,EAAE,OAAOA,EAAEF,QAAQ,IAAIQ,EAAEX,EAAEQ,GAAG,CAACL,QAAQ,IAAI,OAAOF,EAAEO,GAAGG,EAAEA,EAAER,QAAQsb,GAAG9a,EAAER,QAA7G,CAAsH,8ICSzuByb,EAAYC,EAAAA,YAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAOF,EAAMG,QAAQP,KAAKQ,UAC1BC,YAAaL,EAAMM,QAAQ,QAIzBC,EAAmB,SAACC,EAAQC,GAChC,OAAID,EAAOE,WACFF,EAAOE,WACiB,iBAAfD,EACTD,EAAOC,GACiB,mBAAfA,EACTA,EAAWD,QADb,GAKHG,EAAgB,SAWhBzd,GAVJ0d,IAAAA,IAAAA,eACAzd,WACA0d,IAAAA,SACAC,IAAAA,OACAtd,IAAAA,QACAJ,aACA2d,IAAAA,MACAN,IAAAA,WACAO,IAAAA,WACGC,EACCC,EAAAhe,EAAAie,GACJ,IAAKP,EACH,MAAM,IAAIQ,MAAM,qDAElB,IAAKR,EAAaS,aAChB,MAAM,IAAID,MAAM,qEAGlB,IAAME,EAAUxB,IACVyB,EAASC,EAAAA,YACTC,EAAYC,EAAAA,eAElBC,EAAAC,EAA8BC,EAAQA,SAAC,IAAvC,GAAOC,EAAPH,EAAA,GAAgBI,OAChBC,EAAAJ,EAA8BC,EAAQA,SAAC,IAAvC,GAAOI,EAAPD,EAAA,GAAgBE,OAGhBC,EAIIC,EAAQA,SAAAC,EAAA,CAAGxB,SAAAA,EAAUC,OAAAA,GAAWG,IAJpCqB,EAAAH,EACEI,MAASC,IAAAA,MAAOC,IAAAA,SAAUC,IAAAA,OAAQC,IAAAA,QAClCC,IAAAA,WAFFC,EAAAV,EAGEW,KAAQC,IAAAA,MAAOC,IAAAA,YAAaC,IAAAA,QAGxBC,EAAcC,EAAAA,SAClB,WAAA,OACEC,EAAQ,SAAC,SAACtB,EAASuB,GACjB,IAAMC,EAAW,IAAIC,gEAAyDzB,EAA7D,UAGZlB,EAAa4C,WAAU5C,EAAa4C,SAAWjC,GAGpDrc,OAAOue,QAAQ7C,GAAcxb,SAAQ,SAAkBse,GAAA,IAAAC,EAAA/B,EAAA8B,EAAA,GAAhBE,EAAgBD,EAAA,GAAXnB,EAAWmB,EAAA,GACjDre,MAAMue,QAAQrB,GAChBA,EAAQA,EAAM9c,KAAK,KACO,kBAAV8c,IAChBA,EAAQA,EAAQ,OAAS,SAE3Bc,EAASQ,aAAaC,IAAIH,EAAKpB,MAGjCwB,MAAMV,EAASW,YACZC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GAAI,OAAIf,EAASe,QACxB,OACL,CAACxD,EAAcW,IAYjB,OATA8C,EAAAA,WAAU,WAEHvC,GAAWA,IAAYvB,EAAiBiC,EAAO/B,IAGlDyC,EAAYpB,GAAS,SAAAwC,GAAO,OAAIpC,EAAWoC,EAAQC,eAEpD,CAAC/B,EAAOV,EAASoB,IAGlB3f,wBAACihB,UAAD,CACEC,cADF,EAEEjC,MAAOA,GAAS,KAGhBP,QAASO,EAASA,CAAAA,YAAUP,IAAWA,EAEvCyC,yBAEAC,cAAe,SAAAC,GAAC,OAAIA,GACpBC,eAAgB,SAAArE,GAAM,OAAID,EAAiBC,EAAQC,IACnDqE,kBAAmB,SAACtE,EAAQgC,GAAT,OACjBjC,EAAiBC,EAAQC,KAAgBF,EAAiBiC,EAAO/B,IAGnEgC,SAAU,SAACsC,EAAOC,GAEZA,GAAYjE,IAAOiE,EAAWjE,EAAMiE,IACxCvC,EAASuC,GACT9C,EAAW,KAEb+C,cAAe,SAACF,EAAOG,GAAR,OAAuBnD,EAAWmD,IACjDC,cAAe1D,EAAU,4BACzB2D,YAAa,SAAAC,GAIX,OADAA,EAAOC,WAAWb,aAAe,eAE/BlhB,EAAAA,QAAAgiB,cAACC,EAAAA,UAADC,EAAA,GACMJ,EADN,CAEEC,WAAUjD,EAAAA,EAAA,GACLgD,EAAOC,YADF,GAAA,CAER5C,OAAQ,SAAAxe,GACNwe,EAAOxe,GACHmhB,EAAOC,WAAW5C,QACpB2C,EAAOC,WAAW5C,OAAOxe,IAG7Bye,QAAS,SAAAze,GACPye,EAAQze,GACJmhB,EAAOC,WAAW3C,SACpB0C,EAAOC,WAAW3C,QAAQze,MAIhCV,MACY,KAAVA,IACU,IAAVA,GACED,EAAA,QAAAgiB,cAACG,aAAD,CAAYliB,MAAOA,EAAOsd,OAAQA,EAAQD,SAAUA,EAAU+B,WAAYA,IAG9EG,SAAUE,IAAYF,IAASC,GAC/BhC,WAAYzd,EAAAA,sBAACoiB,kBAAD,CAAiB1C,QAASA,EAASF,MAAOA,GAASC,EAAahC,WAAYA,KACpFC,KAIV2E,aAAc,SAAApF,GACZ,IAAMqF,EAAUC,EAAetF,EAAOZ,KAAMkC,GACtCiE,EAAQC,EAAexF,EAAOZ,KAAMiG,GAE1C,OACEtiB,wBAAC0iB,OAAD,CAAMC,WAAN,EAAgBC,WAAW,UACzB5iB,wBAAC0iB,OAAD,CAAMG,MAAI,GACR7iB,wBAAC8iB,UAAD,CAAgBC,UAAWhF,EAAQrB,QAErC1c,EAAAA,QAAAgiB,cAACU,OAAD,CAAMG,MAAN,EAAWG,IAAE,GACO,iBAAVR,EACJA,EACAA,EAAMvgB,KAAI,SAACghB,EAAMpgB,GAAP,OACR7C,EAAA,QAAAgiB,cAAA,OAAA,CAAM3B,IAAKxd,EAAOqgB,MAAO,CAAEC,WAAYF,EAAK3G,UAAY,IAAM,MAC3D2G,EAAK5G,SAGdrc,EAAAA,QAAAgiB,cAAC9hB,aAAD,CAAYC,QAAQ,QAAQwc,MAAM,iBAC/BM,EAAOE,kBAUxBC,EAAcgG,aAAe,CAC3BjjB,QAAS,SACTkjB,OAAQ,SChLV,IAAMC,EAAqB,WACzB,IAAMC,EAAUC,EAAAA,aACVC,EAAQ,IAAIC,gBAAgBH,EAAQI,SAASC,QAanD,OAXAC,eAAa,CACXC,QAAS,SAAAthB,GACPihB,EAAMjD,IAAI,MAAOhe,EAAKuhB,OAAOC,YAAYC,KACzCR,EAAMjD,IAAI,MAAOhe,EAAKuhB,OAAOC,YAAYE,KACzCX,EAAQ7gB,QAAQ,CAAEyhB,SAAUZ,EAAQI,SAASQ,SAAUP,OAAQ,IAAMH,EAAM/C,cAE7E0D,QAAS,SAAA5hB,GACPihB,EAAMjD,IAAI,OAAQhe,EAAKuhB,OAAOM,WAC9Bd,EAAQ7gB,QAAQ,CAAEyhB,SAAUZ,EAAQI,SAASQ,SAAUP,OAAQ,IAAMH,EAAM/C,gBAGxE,iJCTHnE,EAAYC,EAAUA,YAAC,WAAA,MAAO,CAClC8H,QAAS,CACPC,OAAQ,IACRC,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,QAAS,OACTjC,WAAY,SACZkC,eAAgB,UAElBC,YAAa,CACXP,SAAU,WACVD,OAAQ,KACRE,IAAK,EACLE,MAAO,OAILK,EAAU,SAaVrlB,GAAA,IAYAslB,EAxBJC,IAAAA,SACAC,IAAAA,UACAllB,IAAAA,MACAG,IAAAA,YACAglB,IAAAA,aACAC,IAAAA,OACAC,IAAAA,OACAC,IAAAA,KACAC,IAAAA,cACAC,IAAAA,eACAC,IAAAA,eACGC,EACChI,EAAAhe,EAAAie,GACJgI,EAAyCC,EAAAA,iBAAjCC,IAAAA,IAAKC,IAAAA,KAAMlmB,IAAAA,SAAUykB,IAAAA,QACvBtB,EAAKgD,iBAAc,SAAAvJ,GAAK,OAAIA,EAAMwJ,YAAYC,KAAK,QAAO,CAAEC,OAAO,IACzE/H,EAAAC,EAAwCC,EAAQA,SAAC,MAAjD,GAAO8H,EAAPhI,EAAA,GAAqBiI,EAArBjI,EAAA,GACAK,EAAAJ,EAAsBC,EAAQA,SAAC,MAA/B,GAAOrc,EAAPwc,EAAA,GAAY6H,EAAZ7H,EAAA,GACMV,EAAUxB,IAGVkH,EAAQ,IAAIC,gBAAgB6C,EAAAA,cAAc3C,QAChD0B,EAAS7B,EAAMxH,IAAI,QAAUwH,EAAMxH,IAAI,OAAS,CAACwH,EAAM+C,IAAI,OAAQ/C,EAAM+C,IAAI,QAAUlB,EACvFC,EAAO9B,EAAMxH,IAAI,QAAUwH,EAAM+C,IAAI,QAAUjB,EAI/C,IAAMkB,EAAUX,EACbxjB,QAAO,SAAAokB,GAAE,OAAIX,EAAKW,MAClBzkB,KAAI,SAAAykB,GAAE,OACFX,EAAAA,EAAAA,GAAAA,EAAKW,IADH,GAAA,CAELxB,SAAUA,GAAYA,EAASa,EAAKW,IACpCvB,UAAWA,GAAaA,EAAUY,EAAKW,IACvCzmB,MAAOA,GAASA,EAAM8lB,EAAKW,IAC3BtmB,YAAaA,GAAeA,EAAY2lB,EAAKW,SAE9CpkB,QAAO,SAAA1C,GAAM,OAAIA,EAAOslB,UAAYtlB,EAAOulB,aAExCwB,EACJlB,GAAkBgB,EAAQpmB,OAAS,EAAIomB,EAAQxkB,KAAI,SAAArC,GAAM,MAAI,CAACA,EAAOslB,SAAUtlB,EAAOulB,mBAAcyB,EAGtG,GAAInB,IAAmBkB,EAAQ,OAAO,KAEtC,IAAME,EAAUJ,EAAQxkB,KAAI,SAACrC,EAAQuB,GACnC,IAAM2lB,EACJ9mB,EAAC,QAAAgiB,cAAAhiB,EAAAA,QAAM+mB,SAAP,CAAgB1G,IAAKlf,GACnBnB,wBAACgnB,SAAD,CACExC,SAAU,CAAC5kB,EAAOslB,SAAUtlB,EAAOulB,WACnC8B,cACEjE,EACI,CACEkE,MAAO,WACLjlB,EAAIklB,QAAQ,CAACvnB,EAAOslB,SAAUtlB,EAAOulB,YACrCkB,EAAgBzmB,UAGpBgnB,IAGJ5D,GAAMhjB,EAAAA,QAACgiB,cAAAoF,EAADA,MAAQpnB,KAAAA,EAAAA,QAAMgiB,cAAcoD,EAAc,CAAExlB,OAAAA,EAAQC,SAAAA,MAE7D6lB,GAAkBT,GACjBjlB,EAAA,QAAAgiB,cAACqF,WAAD,CACEC,UAAW,CACT,CAACrC,EAAeC,SAAUD,EAAeE,WACzC,CAACvlB,EAAOslB,SAAUtlB,EAAOulB,eAUnC,OAFAF,EAAiBrlB,EAEVknB,KAGT,OACE9mB,wBAACunB,EAADA,aAAArF,EAAA,CACEgB,MAAO,CAAEmC,OAAAA,GACTC,OAASG,OAA0BmB,EAATtB,EAC1BC,KAAOE,OAAwBmB,EAAPrB,EACxBoB,OAAQA,EACRa,YAAalB,GACTX,GAEJ3lB,UAAAgiB,cAACyF,EAAAA,UAAD,CACEC,YAAY,sEACZC,IAAI,uDAELrD,GACCtkB,UAAAgiB,cAAC4F,EAAAA,IAAD,CAAKhF,WAAW,SAASG,UAAWhF,EAAQuG,SAC1CtkB,wBAAC6nB,UAAD,CAAkBC,KAAM,GAAIC,UAAW,KAG1CvC,EAAgBxlB,wBAACgoB,EAAAA,QAAD,CAAoBC,qBAAqB,GAAQpB,GAAgCA,EAClG7mB,EAAAA,sBAACsjB,EAAD,MACAtjB,EAAAA,QAAAgiB,cAACkG,SAAD,CAAQC,OAAO,SAASC,OAAQhC,EAAciC,QAAS,WAAA,OAAMhC,EAAgB,QAC3ErmB,wBAAC4nB,MAAD,CAAKU,EAAG,EAAG9D,SAAS,YAClBxkB,wBAACuoB,aAAD,CAAYC,QAAS,WAAA,OAAMnC,EAAgB,OAAOtD,UAAWhF,EAAQgH,aACnE/kB,EAAC,QAAAgiB,cAAAyG,EAAAA,QADH,OAGCrC,GAAgBpmB,EAAAA,QAAMgiB,cAAcoD,EAAc,CAAExlB,OAAQwmB,EAAcvmB,SAAAA,QAOrFmlB,EAAQ5B,aAAe,CACrBiC,OAAQ,IACRC,OAAQ,CAAC,GAAI,UACbC,KAAM,EACNC,eAAe,EACfE,gBAAgB,EAChBgD,iBAAiB,EACjBtD,aAAc1lB,GClJhB,IAAMipB,EAAa,SAAsBhpB,GAAA,IAAnB2lB,IAAAA,OAAQC,IAAAA,KAG5B,OAFYqD,EAAAA,SACRzB,QAAQ7B,EAAQC,GACb,0FCDHsD,EAAW,SAA0FlpB,GAAvFC,IAAAA,IAAAA,OAAQslB,IAAAA,SAAUC,IAAAA,UAAW2D,IAAAA,QAASzD,IAAAA,SAAQ0D,aAAUC,IAAAA,gBAAoBtL,EAAWC,EAAAhe,EAAAie,GAEnG4G,EAAW,CAACU,EAAStlB,GAASulB,EAAUvlB,IAC9C,OAAK4kB,EAAS,IAAOA,EAAS,GAG5BxkB,wBAAC4nB,MAAD,KACGkB,GACC9oB,wBAAC4nB,MAAD,CAAKqB,GAAI,EAAGC,GAAI,GACdlpB,UAACgiB,cAAA9hB,EAADA,WAAgB8oB,EAAkBF,EAAQlpB,KAG9CI,wBAACunB,EAAAA,aAADrF,EAAA,CAAcgB,MAAO,CAAEmC,OAAAA,GAAUC,OAAQd,GAAc9G,GACrD1d,UAAAgiB,cAAC2G,EAAD,CAAYrD,OAAQd,IACpBxkB,EAAAA,sBAACynB,YAAD,CACEC,YAAY,sEACZC,IAAI,uDAEN3nB,EAAAA,sBAACgnB,SAAD,CAAQxC,SAAUA,MAfiB,MAqB3CqE,EAASzF,aAAe,CACtBiC,OAAQ,IACRE,KAAM,GACNwD,UAAU,kJChCW,SAACI,EAAS9I,GAC/B,IAAM+I,EAAWD,EAAQE,MAAK,SAAAD,GAAQ,OAAIA,EAAS1C,GAAG4C,WAAWjJ,EAAM,QACvE,GAAI+I,EAAU,OAAOA,EAAS/M"}