{"version":3,"file":"index.es.js","sources":["../src/extractContext.js","../../../node_modules/autosuggest-highlight/match/index.js","../../../node_modules/autosuggest-highlight/parse/index.js","../src/LocationInput.js","../src/MapList/MarkerClusterGroup.js","../src/MapList/QueryStringUpdater.js","../src/MapList/MobileDrawer.js","../src/MapList/MapList.js","../src/MapList/DefaultPopupContent.js","../src/MapField/ChangeView.js","../src/MapField/MapField.js"],"sourcesContent":["const extractContext = (context, key) => {\n  const property = context.find(property => property.id.startsWith(key + '.'));\n  if (property) return property.text;\n};\n\nexport default extractContext;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.AutosuggestHighlightMatch=t():e.AutosuggestHighlightMatch=t()}(this,(()=>{return e={772:(e,t,o)=>{const r=o(826).remove,i=/[.*+?^${}()|[\\]\\\\]/g,n=/[a-z0-9_]/i,u=/\\s+/;e.exports=function(e,t,o){var s,a;a={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},s=(s=o)||{},Object.keys(s).forEach((e=>{a[e]=!!s[e]})),o=a;const c=Array.from(e).map((e=>r(e)));let l=c.join(\"\");return(t=r(t)).trim().split(u).filter((e=>e.length>0)).reduce(((e,t)=>{const r=t.length,u=!o.insideWords&&n.test(t[0])?\"\\\\b\":\"\",s=new RegExp(u+t.replace(i,\"\\\\$&\"),\"i\");let a,A;if(a=s.exec(l),o.requireMatchAll&&null===a)return l=\"\",[];for(;a;){A=a.index;const t=r-c.slice(A,A+r).join(\"\").length,i=A-c.slice(0,A).join(\"\").length,n=[A+i,A+r+i+t];if(n[0]!==n[1]&&e.push(n),l=l.slice(0,A)+new Array(r+1).join(\" \")+l.slice(A+r),!o.findAllOccurrences)break;a=s.exec(l)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={À:\"A\",Á:\"A\",Â:\"A\",Ã:\"A\",Ä:\"A\",Å:\"A\",Ấ:\"A\",Ắ:\"A\",Ẳ:\"A\",Ẵ:\"A\",Ặ:\"A\",Æ:\"AE\",Ầ:\"A\",Ằ:\"A\",Ȃ:\"A\",Ç:\"C\",Ḉ:\"C\",È:\"E\",É:\"E\",Ê:\"E\",Ë:\"E\",Ế:\"E\",Ḗ:\"E\",Ề:\"E\",Ḕ:\"E\",Ḝ:\"E\",Ȇ:\"E\",Ì:\"I\",Í:\"I\",Î:\"I\",Ï:\"I\",Ḯ:\"I\",Ȋ:\"I\",Ð:\"D\",Ñ:\"N\",Ò:\"O\",Ó:\"O\",Ô:\"O\",Õ:\"O\",Ö:\"O\",Ø:\"O\",Ố:\"O\",Ṍ:\"O\",Ṓ:\"O\",Ȏ:\"O\",Ù:\"U\",Ú:\"U\",Û:\"U\",Ü:\"U\",Ý:\"Y\",à:\"a\",á:\"a\",â:\"a\",ã:\"a\",ä:\"a\",å:\"a\",ấ:\"a\",ắ:\"a\",ẳ:\"a\",ẵ:\"a\",ặ:\"a\",æ:\"ae\",ầ:\"a\",ằ:\"a\",ȃ:\"a\",ç:\"c\",ḉ:\"c\",è:\"e\",é:\"e\",ê:\"e\",ë:\"e\",ế:\"e\",ḗ:\"e\",ề:\"e\",ḕ:\"e\",ḝ:\"e\",ȇ:\"e\",ì:\"i\",í:\"i\",î:\"i\",ï:\"i\",ḯ:\"i\",ȋ:\"i\",ð:\"d\",ñ:\"n\",ò:\"o\",ó:\"o\",ô:\"o\",õ:\"o\",ö:\"o\",ø:\"o\",ố:\"o\",ṍ:\"o\",ṓ:\"o\",ȏ:\"o\",ù:\"u\",ú:\"u\",û:\"u\",ü:\"u\",ý:\"y\",ÿ:\"y\",Ā:\"A\",ā:\"a\",Ă:\"A\",ă:\"a\",Ą:\"A\",ą:\"a\",Ć:\"C\",ć:\"c\",Ĉ:\"C\",ĉ:\"c\",Ċ:\"C\",ċ:\"c\",Č:\"C\",č:\"c\",C̆:\"C\",c̆:\"c\",Ď:\"D\",ď:\"d\",Đ:\"D\",đ:\"d\",Ē:\"E\",ē:\"e\",Ĕ:\"E\",ĕ:\"e\",Ė:\"E\",ė:\"e\",Ę:\"E\",ę:\"e\",Ě:\"E\",ě:\"e\",Ĝ:\"G\",Ǵ:\"G\",ĝ:\"g\",ǵ:\"g\",Ğ:\"G\",ğ:\"g\",Ġ:\"G\",ġ:\"g\",Ģ:\"G\",ģ:\"g\",Ĥ:\"H\",ĥ:\"h\",Ħ:\"H\",ħ:\"h\",Ḫ:\"H\",ḫ:\"h\",Ĩ:\"I\",ĩ:\"i\",Ī:\"I\",ī:\"i\",Ĭ:\"I\",ĭ:\"i\",Į:\"I\",į:\"i\",İ:\"I\",ı:\"i\",Ĳ:\"IJ\",ĳ:\"ij\",Ĵ:\"J\",ĵ:\"j\",Ķ:\"K\",ķ:\"k\",Ḱ:\"K\",ḱ:\"k\",K̆:\"K\",k̆:\"k\",Ĺ:\"L\",ĺ:\"l\",Ļ:\"L\",ļ:\"l\",Ľ:\"L\",ľ:\"l\",Ŀ:\"L\",ŀ:\"l\",Ł:\"l\",ł:\"l\",Ḿ:\"M\",ḿ:\"m\",M̆:\"M\",m̆:\"m\",Ń:\"N\",ń:\"n\",Ņ:\"N\",ņ:\"n\",Ň:\"N\",ň:\"n\",ŉ:\"n\",N̆:\"N\",n̆:\"n\",Ō:\"O\",ō:\"o\",Ŏ:\"O\",ŏ:\"o\",Ő:\"O\",ő:\"o\",Œ:\"OE\",œ:\"oe\",P̆:\"P\",p̆:\"p\",Ŕ:\"R\",ŕ:\"r\",Ŗ:\"R\",ŗ:\"r\",Ř:\"R\",ř:\"r\",R̆:\"R\",r̆:\"r\",Ȓ:\"R\",ȓ:\"r\",Ś:\"S\",ś:\"s\",Ŝ:\"S\",ŝ:\"s\",Ş:\"S\",Ș:\"S\",ș:\"s\",ş:\"s\",Š:\"S\",š:\"s\",Ţ:\"T\",ţ:\"t\",ț:\"t\",Ț:\"T\",Ť:\"T\",ť:\"t\",Ŧ:\"T\",ŧ:\"t\",T̆:\"T\",t̆:\"t\",Ũ:\"U\",ũ:\"u\",Ū:\"U\",ū:\"u\",Ŭ:\"U\",ŭ:\"u\",Ů:\"U\",ů:\"u\",Ű:\"U\",ű:\"u\",Ų:\"U\",ų:\"u\",Ȗ:\"U\",ȗ:\"u\",V̆:\"V\",v̆:\"v\",Ŵ:\"W\",ŵ:\"w\",Ẃ:\"W\",ẃ:\"w\",X̆:\"X\",x̆:\"x\",Ŷ:\"Y\",ŷ:\"y\",Ÿ:\"Y\",Y̆:\"Y\",y̆:\"y\",Ź:\"Z\",ź:\"z\",Ż:\"Z\",ż:\"z\",Ž:\"Z\",ž:\"z\",ſ:\"s\",ƒ:\"f\",Ơ:\"O\",ơ:\"o\",Ư:\"U\",ư:\"u\",Ǎ:\"A\",ǎ:\"a\",Ǐ:\"I\",ǐ:\"i\",Ǒ:\"O\",ǒ:\"o\",Ǔ:\"U\",ǔ:\"u\",Ǖ:\"U\",ǖ:\"u\",Ǘ:\"U\",ǘ:\"u\",Ǚ:\"U\",ǚ:\"u\",Ǜ:\"U\",ǜ:\"u\",Ứ:\"U\",ứ:\"u\",Ṹ:\"U\",ṹ:\"u\",Ǻ:\"A\",ǻ:\"a\",Ǽ:\"AE\",ǽ:\"ae\",Ǿ:\"O\",ǿ:\"o\",Þ:\"TH\",þ:\"th\",Ṕ:\"P\",ṕ:\"p\",Ṥ:\"S\",ṥ:\"s\",X́:\"X\",x́:\"x\",Ѓ:\"Г\",ѓ:\"г\",Ќ:\"К\",ќ:\"к\",A̋:\"A\",a̋:\"a\",E̋:\"E\",e̋:\"e\",I̋:\"I\",i̋:\"i\",Ǹ:\"N\",ǹ:\"n\",Ồ:\"O\",ồ:\"o\",Ṑ:\"O\",ṑ:\"o\",Ừ:\"U\",ừ:\"u\",Ẁ:\"W\",ẁ:\"w\",Ỳ:\"Y\",ỳ:\"y\",Ȁ:\"A\",ȁ:\"a\",Ȅ:\"E\",ȅ:\"e\",Ȉ:\"I\",ȉ:\"i\",Ȍ:\"O\",ȍ:\"o\",Ȑ:\"R\",ȑ:\"r\",Ȕ:\"U\",ȕ:\"u\",B̌:\"B\",b̌:\"b\",Č̣:\"C\",č̣:\"c\",Ê̌:\"E\",ê̌:\"e\",F̌:\"F\",f̌:\"f\",Ǧ:\"G\",ǧ:\"g\",Ȟ:\"H\",ȟ:\"h\",J̌:\"J\",ǰ:\"j\",Ǩ:\"K\",ǩ:\"k\",M̌:\"M\",m̌:\"m\",P̌:\"P\",p̌:\"p\",Q̌:\"Q\",q̌:\"q\",Ř̩:\"R\",ř̩:\"r\",Ṧ:\"S\",ṧ:\"s\",V̌:\"V\",v̌:\"v\",W̌:\"W\",w̌:\"w\",X̌:\"X\",x̌:\"x\",Y̌:\"Y\",y̌:\"y\",A̧:\"A\",a̧:\"a\",B̧:\"B\",b̧:\"b\",Ḑ:\"D\",ḑ:\"d\",Ȩ:\"E\",ȩ:\"e\",Ɛ̧:\"E\",ɛ̧:\"e\",Ḩ:\"H\",ḩ:\"h\",I̧:\"I\",i̧:\"i\",Ɨ̧:\"I\",ɨ̧:\"i\",M̧:\"M\",m̧:\"m\",O̧:\"O\",o̧:\"o\",Q̧:\"Q\",q̧:\"q\",U̧:\"U\",u̧:\"u\",X̧:\"X\",x̧:\"x\",Z̧:\"Z\",z̧:\"z\"},o=Object.keys(t).join(\"|\"),r=new RegExp(o,\"g\"),i=new RegExp(o,\"\"),n=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=n,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=n}},t={},function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(772);var e,t}));","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.AutosuggestHighlightParse=e():t.AutosuggestHighlightParse=e()}(this,(()=>{return t={705:t=>{t.exports=function(t,e){const h=[];return 0===e.length?h.push({text:t,highlight:!1}):e[0][0]>0&&h.push({text:t.slice(0,e[0][0]),highlight:!1}),e.forEach(((i,o)=>{const s=i[0],r=i[1];h.push({text:t.slice(s,r),highlight:!0}),o===e.length-1?r<t.length&&h.push({text:t.slice(r,t.length),highlight:!1}):r<e[o+1][0]&&h.push({text:t.slice(r,e[o+1][0]),highlight:!1})})),h}}},e={},function h(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,h),s.exports}(705);var t,e}));","import React, { useState, useMemo, useEffect } from 'react';\nimport { FieldTitle, InputHelperText, useInput, useTranslate, useLocale, useTheme } from 'react-admin';\nimport { TextField, Typography, Grid } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\nimport { default as highlightMatch } from 'autosuggest-highlight/match';\nimport { default as highlightParse } from 'autosuggest-highlight/parse';\nimport throttle from 'lodash.throttle';\n\nconst useStyles = makeStyles(() => { const [theme] = useTheme(); return ({\n  icon: {\n    color: theme.palette.text.secondary,\n    marginRight: theme.spacing(2)\n  }\n})});\n\nconst selectOptionText = (option, optionText) => {\n  if (option.place_name) {\n    return option.place_name;\n  } else if (typeof optionText === 'string') {\n    return option[optionText];\n  } else if (typeof optionText === 'function') {\n    return optionText(option);\n  }\n};\n\nconst LocationInput = ({\n  mapboxConfig,\n  record,\n  resource,\n  source,\n  label,\n  basePath,\n  parse,\n  optionText,\n  helperText,\n  ...rest\n}) => {\n  if (!mapboxConfig) {\n    throw new Error('@semapps/geo-components : No mapbox configuration');\n  }\n  if (!mapboxConfig.access_token) {\n    throw new Error('@semapps/geo-components : No access token in mapbox configuration');\n  }\n\n  const classes = useStyles();\n  const locale = useLocale();\n  const translate = useTranslate();\n\n  const [keyword, setKeyword] = useState(''); // Typed keywords\n  const [options, setOptions] = useState([]); // Options returned by MapBox\n\n  // Do not pass the `parse` prop to useInput, as we manually call it on the onChange prop below\n  const {\n    input: { value, onChange, onBlur, onFocus },\n    isRequired,\n    meta: { error, submitError, isTouched }\n  } = useInput({ resource, source, ...rest });\n\n  const fetchMapbox = useMemo(\n    () =>\n      throttle((keyword, callback) => {\n        const fetchUrl = new URL(`https://api.mapbox.com/geocoding/v5/mapbox.places/${keyword}.json`);\n\n        // Use locale as default language\n        if (!mapboxConfig.language) mapboxConfig.language = locale;\n\n        // All options available at https://docs.mapbox.com/api/search/geocoding/#forward-geocoding\n        Object.entries(mapboxConfig).forEach(([key, value]) => {\n          if (Array.isArray(value)) {\n            value = value.join(',');\n          } else if (typeof value === 'boolean') {\n            value = value ? 'true' : 'false';\n          }\n          fetchUrl.searchParams.set(key, value);\n        });\n\n        fetch(fetchUrl.toString())\n          .then(res => res.json())\n          .then(json => callback(json));\n      }, 200),\n    [mapboxConfig, locale]\n  );\n\n  useEffect(() => {\n    // Do not trigger search if text input is empty or if it is the same as the current value\n    if (!keyword || keyword === selectOptionText(value, optionText)) {\n      return undefined;\n    } else {\n      fetchMapbox(keyword, results => setOptions(results.features));\n    }\n  }, [value, keyword, fetchMapbox]);\n\n  return (\n    <Autocomplete\n      autoComplete\n      value={value || null}\n      // We must include the current value as an option, to avoid this error\n      // https://github.com/mui-org/material-ui/issues/18514#issuecomment-636096386\n      options={value ? [value, ...options] : options}\n      // Do not show the current value as an option (this would break renderOptions)\n      filterSelectedOptions\n      // For some reasons, this prop has to be passed\n      filterOptions={x => x}\n      getOptionLabel={option => selectOptionText(option, optionText)}\n      isOptionEqualToValue={(option, value) =>\n        selectOptionText(option, optionText) === selectOptionText(value, optionText)\n      }\n      // This function is called when the user selects an option\n      onChange={(event, newValue) => {\n        // Parse only if the value is not null (happens if the user clears the value)\n        if (newValue && parse) newValue = parse(newValue);\n        onChange(newValue);\n        setOptions([]);\n      }}\n      onInputChange={(event, newKeyword) => setKeyword(newKeyword)}\n      noOptionsText={translate('ra.navigation.no_results')}\n      renderInput={params => {\n        // Autocomplete=off doesn't work anymore in modern browsers\n        // https://stackoverflow.com/a/40791726/7900695\n        params.inputProps.autoComplete = 'new-password';\n        return (\n          <TextField\n            {...params}\n            inputProps={{\n              ...params.inputProps,\n              onBlur: e => {\n                onBlur(e);\n                if (params.inputProps.onBlur) {\n                  params.inputProps.onBlur(e);\n                }\n              },\n              onFocus: e => {\n                onFocus(e);\n                if (params.inputProps.onFocus) {\n                  params.inputProps.onFocus(e);\n                }\n              }\n            }}\n            label={\n              label !== '' &&\n              label !== false && (\n                <FieldTitle label={label} source={source} resource={resource} isRequired={isRequired} />\n              )\n            }\n            error={!!(isTouched && (error || submitError))}\n            helperText={<InputHelperText touched={isTouched} error={error || submitError} helperText={helperText} />}\n            {...rest}\n          />\n        );\n      }}\n      renderOption={option => {\n        const matches = highlightMatch(option.text, keyword);\n        const parts = highlightParse(option.text, matches);\n\n        return (\n          <Grid container alignItems=\"center\">\n            <Grid item>\n              <LocationOnIcon className={classes.icon} />\n            </Grid>\n            <Grid item xs>\n              {typeof parts === 'string'\n                ? parts\n                : parts.map((part, index) => (\n                    <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                      {part.text}\n                    </span>\n                  ))}\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {option.place_name}\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }}\n    />\n  );\n};\n\nLocationInput.defaultProps = {\n  variant: 'filled',\n  margin: 'dense'\n};\n\nexport default LocationInput;\n","import L from 'leaflet'\nimport { createPathComponent } from '@react-leaflet/core'\nimport 'leaflet.markercluster';\n\n// Taken from https://github.com/changey/react-leaflet-markercluster/blob/60992857087c181ada1e8e6659a6666a13c1f868/src/react-leaflet-markercluster.js\nfunction createMarkerCluster({ children: _c, ...props }, context) {\n  const clusterProps = {}\n  const clusterEvents = {}\n  // Splitting props and events to different objects\n  Object.entries(props).forEach(([propName, prop]) =>\n    propName.startsWith('on')\n      ? (clusterEvents[propName] = prop)\n      : (clusterProps[propName] = prop)\n  )\n\n  const instance = new L.MarkerClusterGroup(clusterProps)\n\n  // Initializing event listeners\n  Object.entries(clusterEvents).forEach(([eventAsProp, callback]) => {\n    const clusterEvent = `cluster${eventAsProp.substring(2).toLowerCase()}`\n    instance.on(clusterEvent, callback)\n  })\n  return {\n    instance,\n    context: {\n      ...context,\n      layerContainer: instance,\n    },\n  }\n}\n\nconst MarkerClusterGroup = createPathComponent(createMarkerCluster)\n\nexport default MarkerClusterGroup;\n","import React from 'react';\nimport { useNavigate } from 'react-router';\nimport { useMapEvents } from 'react-leaflet';\n\n// Keep the zoom and center in query string, so that when we navigate back to the page, it stays focused on the same area\nconst QueryStringUpdater = () => {\n  const navigate = useNavigate();\n  const query = new URLSearchParams(navigate.location.search);\n\n  useMapEvents({\n    moveend: test => {\n      query.set('lat', test.target.getCenter().lat);\n      query.set('lng', test.target.getCenter().lng);\n      navigate.replace({ pathname: navigate.location.pathname, search: '?' + query.toString() });\n    },\n    zoomend: test => {\n      query.set('zoom', test.target.getZoom());\n      navigate.replace({ pathname: navigate.location.pathname, search: '?' + query.toString() });\n    }\n  });\n  return null;\n};\n\nexport default QueryStringUpdater;\n","import React, { useEffect } from 'react';\nimport { useMap } from \"react-leaflet\";\nimport { Drawer, Box, IconButton } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport ClearIcon from '@mui/icons-material/Clear';\n\nconst useStyles = makeStyles(() => ({\n  closeButton: {\n    position: 'absolute',\n    zIndex: 1400,\n    top: 0,\n    right: 0\n  }\n}));\n\nconst MobileDrawer = ({ record, basePath, popupContent, onClose }) => {\n  const classes = useStyles();\n  const map = useMap();\n  useEffect(() => {\n    if (record) {\n      map.setView([record.latitude, record.longitude]);\n    }\n  }, [record, map])\n\n  return (\n    <Drawer anchor=\"bottom\" open={!!record} onClose={onClose}>\n      <Box p={1} position=\"relative\">\n        <IconButton onClick={onClose} className={classes.closeButton} size=\"large\">\n          <ClearIcon />\n        </IconButton>\n        {record && React.createElement(popupContent, { record, basePath })}\n      </Box>\n    </Drawer>\n  );\n};\n\nexport default MobileDrawer;\n","import React, { useState } from 'react';\nimport { useListContext } from 'react-admin';\nimport { useLocation } from 'react-router';\nimport { useMediaQuery, Box } from '@mui/material';\nimport makeStyles from '@mui/styles/makeStyles';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport 'leaflet-defaulticon-compatibility';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet';\nimport MarkerClusterGroup from './MarkerClusterGroup';\nimport DefaultPopupContent from './DefaultPopupContent';\nimport QueryStringUpdater from './QueryStringUpdater';\nimport MobileDrawer from \"./MobileDrawer\";\nimport { useTheme } from 'react-admin';\n\nconst useStyles = makeStyles(() => ({\n  isLoading: {\n    zIndex: 1000,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}));\n\nconst MapList = ({\n  latitude,\n  longitude,\n  label,\n  description,\n  popupContent,\n  height,\n  center,\n  zoom,\n  groupClusters,\n  boundToMarkers,\n  connectMarkers,\n  ...otherProps\n}) => {\n  const { ids, data, basePath, isLoading } = useListContext();\n  const { theme } = useTheme();\n  const xs = useMediaQuery(() => theme.breakpoints.down('sm'), { noSsr: true });\n  const [drawerRecord, setDrawerRecord] = useState(null);\n  const classes = useStyles();\n\n  // Get the zoom and center from query string, if available\n  const query = new URLSearchParams(useLocation().search);\n  center = query.has('lat') && query.has('lng') ? [query.get('lat'), query.get('lng')] : center;\n  zoom = query.has('zoom') ? query.get('zoom') : zoom;\n\n  let previousRecord;\n\n  const records = ids\n    .filter(id => data[id])\n    .map(id => ({\n      ...data[id],\n      latitude: latitude && latitude(data[id]),\n      longitude: longitude && longitude(data[id]),\n      label: label && label(data[id]),\n      description: description && description(data[id])\n    }))\n    .filter(record => record.latitude && record.longitude);\n\n  const bounds =\n    boundToMarkers && records.length > 0 ? records.map(record => [record.latitude, record.longitude]) : undefined;\n\n  // Do not display anything if the bounds are not ready, otherwise the MapContainer will not be initialized correctly\n  if (boundToMarkers && !bounds) return null;\n\n  const markers = records.map((record, i) => {\n    const marker = (\n      <React.Fragment key={i}>\n        <Marker\n          position={[record.latitude, record.longitude]}\n          eventHandlers={\n            xs\n              ? {\n                  click: () => setDrawerRecord(record)\n                }\n              : undefined\n          }\n        >\n          {!xs && <Popup>{React.createElement(popupContent, { record, basePath })}</Popup>}\n        </Marker>\n        {connectMarkers && previousRecord && (\n          <Polyline\n            positions={[\n              [previousRecord.latitude, previousRecord.longitude],\n              [record.latitude, record.longitude]\n            ]}\n          />\n        )}\n      </React.Fragment>\n    );\n\n    // Save record so that we can trace lines\n    previousRecord = record;\n\n    return marker;\n  });\n\n  return (\n    <MapContainer\n      style={{ height }}\n      center={!boundToMarkers ? center : undefined}\n      zoom={!boundToMarkers ? zoom : undefined}\n      bounds={bounds}\n      {...otherProps}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {isLoading && (\n        <Box alignItems=\"center\" className={classes.isLoading}>\n          <CircularProgress size={60} thickness={6} />\n        </Box>\n      )}\n      {groupClusters ? <MarkerClusterGroup showCoverageOnHover={false}>{markers}</MarkerClusterGroup> : markers}\n      <QueryStringUpdater />\n      <MobileDrawer\n        record={drawerRecord}\n        basePath={basePath}\n        popupContent={popupContent}\n        onClose={() => setDrawerRecord(null)}\n      />\n    </MapContainer>\n  );\n};\n\nMapList.defaultProps = {\n  height: 700,\n  center: [47, 2.213749],\n  zoom: 6,\n  groupClusters: true,\n  connectMarkers: false,\n  scrollWheelZoom: false,\n  popupContent: DefaultPopupContent\n};\n\nexport default MapList;\n","import React from 'react';\nimport { ShowButton, EditButton, useResourceDefinition } from 'react-admin';\nimport { Typography } from '@mui/material';\n\nconst DefaultPopupContent = ({ record, basePath }) => {\n  const resourceDefinition = useResourceDefinition({});\n  return (\n    <>\n      {record.label && <Typography variant=\"h5\">{record.label}</Typography>}\n      {record.description && (\n        <Typography>\n          {record.description.length > 150 ? record.description.substring(0, 150) + '...' : record.description}\n        </Typography>\n      )}\n      {resourceDefinition.hasShow && <ShowButton basePath={basePath} record={record} />}\n      {resourceDefinition.hasEdit && <EditButton basePath={basePath} record={record} />}\n    </>\n  );\n};\n\nexport default DefaultPopupContent;\n","import React from 'react';\nimport { useMap } from 'react-leaflet';\n\nconst ChangeView = ({ center, zoom }) => {\n  const map = useMap();\n  map.setView(center, zoom);\n  return null;\n};\n\nexport default ChangeView;\n","import React from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport { Box, Typography } from '@mui/material';\nimport ChangeView from './ChangeView';\n\nconst MapField = ({ record, latitude, longitude, address, height, addLabel, typographyProps, ...rest }) => {\n  // Do not display the component if it has no latitude or longitude\n  const position = [latitude(record), longitude(record)];\n  if (!position[0] || !position[1]) return null;\n\n  return (\n    <Box>\n      {address && (\n        <Box mt={1} mb={1}>\n          <Typography {...typographyProps}>{address(record)}</Typography>\n        </Box>\n      )}\n      <MapContainer style={{ height }} center={position} {...rest}>\n        <ChangeView center={position} />\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <Marker position={position} />\n      </MapContainer>\n    </Box>\n  );\n};\n\nMapField.defaultProps = {\n  height: 400,\n  zoom: 11,\n  addLabel: true\n};\n\nexport default MapField;\n"],"names":["extractContext","context","key","property","find","id","startsWith","text","e","t","module","exports","772","o","r","remove","i","n","u","s","a","insideWords","findAllOccurrences","requireMatchAll","Object","keys","forEach","c","Array","from","map","l","join","trim","split","filter","length","reduce","test","RegExp","replace","A","exec","index","slice","push","sort","826","À","Á","Â","Ã","Ä","Å","Ấ","Ắ","Ẳ","Ẵ","Ặ","Æ","Ầ","Ằ","Ȃ","Ç","Ḉ","È","É","Ê","Ë","Ế","Ḗ","Ề","Ḕ","Ḝ","Ȇ","Ì","Í","Î","Ï","Ḯ","Ȋ","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ố","Ṍ","Ṓ","Ȏ","Ù","Ú","Û","Ü","Ý","à","á","â","ã","ä","å","ấ","ắ","ẳ","ẵ","ặ","æ","ầ","ằ","ȃ","ç","ḉ","è","é","ê","ë","ế","ḗ","ề","ḕ","ḝ","ȇ","ì","í","î","ï","ḯ","ȋ","ð","ñ","ò","ó","ô","õ","ö","ø","ố","ṍ","ṓ","ȏ","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","C̆","c̆","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","Ǵ","ĝ","ǵ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ḫ","ḫ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ḱ","ḱ","K̆","k̆","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ḿ","ḿ","M̆","m̆","Ń","ń","Ņ","ņ","Ň","ň","ŉ","N̆","n̆","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","P̆","p̆","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","R̆","r̆","Ȓ","ȓ","Ś","ś","Ŝ","ŝ","Ş","Ș","ș","ş","Š","š","Ţ","ţ","ț","Ț","Ť","ť","Ŧ","ŧ","T̆","t̆","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ȗ","ȗ","V̆","v̆","Ŵ","ŵ","Ẃ","ẃ","X̆","x̆","Ŷ","ŷ","Ÿ","Y̆","y̆","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ứ","ứ","Ṹ","ṹ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","Þ","þ","Ṕ","ṕ","Ṥ","ṥ","X́","x́","Ѓ","ѓ","Ќ","ќ","A̋","a̋","E̋","e̋","I̋","i̋","Ǹ","ǹ","Ồ","ồ","Ṑ","ṑ","Ừ","ừ","Ẁ","ẁ","Ỳ","ỳ","Ȁ","ȁ","Ȅ","ȅ","Ȉ","ȉ","Ȍ","ȍ","Ȑ","ȑ","Ȕ","ȕ","B̌","b̌","Č̣","č̣","Ê̌","ê̌","F̌","f̌","Ǧ","ǧ","Ȟ","ȟ","J̌","ǰ","Ǩ","ǩ","M̌","m̌","P̌","p̌","Q̌","q̌","Ř̩","ř̩","Ṧ","ṧ","V̌","v̌","W̌","w̌","X̌","x̌","Y̌","y̌","A̧","a̧","B̧","b̧","Ḑ","ḑ","Ȩ","ȩ","Ɛ̧","ɛ̧","Ḩ","ḩ","I̧","i̧","Ɨ̧","ɨ̧","M̧","m̧","O̧","o̧","Q̧","q̧","U̧","u̧","X̧","x̧","Z̧","z̧","has","match","705","h","highlight","useStyles","makeStyles","theme","_slicedToArray","useTheme","icon","color","palette","secondary","marginRight","spacing","selectOptionText","option","optionText","place_name","LocationInput","_ref","mapboxConfig","record","resource","source","label","basePath","parse","helperText","rest","_objectWithoutProperties","_excluded","Error","access_token","classes","locale","useLocale","translate","useTranslate","_useState2","useState","keyword","setKeyword","_useState4","options","setOptions","_useInput","useInput","_objectSpread","_useInput$input","input","value","onChange","onBlur","onFocus","isRequired","_useInput$meta","meta","error","submitError","isTouched","fetchMapbox","useMemo","throttle","callback","fetchUrl","URL","language","entries","_ref2","_ref3","isArray","searchParams","set","fetch","toString","then","res","json","useEffect","results","features","React","Autocomplete","autoComplete","filterSelectedOptions","filterOptions","x","getOptionLabel","isOptionEqualToValue","event","newValue","onInputChange","newKeyword","noOptionsText","renderInput","params","inputProps","createElement","TextField","_extends","FieldTitle","InputHelperText","touched","renderOption","matches","highlightMatch","parts","highlightParse","Grid","container","alignItems","item","LocationOnIcon","className","xs","part","style","fontWeight","Typography","variant","defaultProps","margin","MarkerClusterGroup","createPathComponent","children","props","clusterProps","clusterEvents","propName","prop","instance","L","_ref4","_ref5","eventAsProp","clusterEvent","substring","toLowerCase","on","layerContainer","QueryStringUpdater","navigate","useNavigate","query","URLSearchParams","location","search","useMapEvents","moveend","target","getCenter","lat","lng","pathname","zoomend","getZoom","closeButton","position","zIndex","top","right","MobileDrawer","popupContent","onClose","useMap","setView","latitude","longitude","Drawer","anchor","open","Box","p","IconButton","onClick","size","ClearIcon","isLoading","left","bottom","display","justifyContent","MapList","previousRecord","description","height","center","zoom","groupClusters","boundToMarkers","connectMarkers","otherProps","_useListContext","useListContext","ids","data","useMediaQuery","breakpoints","down","noSsr","drawerRecord","setDrawerRecord","useLocation","get","records","bounds","undefined","markers","marker","Fragment","Marker","eventHandlers","click","Popup","Polyline","positions","MapContainer","TileLayer","attribution","url","CircularProgress","thickness","showCoverageOnHover","scrollWheelZoom","resourceDefinition","useResourceDefinition","hasShow","ShowButton","hasEdit","EditButton","ChangeView","MapField","address","addLabel","typographyProps","mt","mb"],"mappings":"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IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,KAAKC,IAAE,KAAKC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,IAAE,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KAAG,IAAIC,KA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"}