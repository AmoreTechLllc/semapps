{"version":3,"file":"index.es.js","sources":["../src/ChipList.js"],"sourcesContent":["import React from 'react';\nimport {\n  ChipField,\n  useResourceContext,\n  useListContext,\n  sanitizeListRestProps,\n  linkToRecord,\n  RecordContextProvider,\n  Link\n} from 'react-admin';\nimport { makeStyles, LinearProgress } from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  link: {},\n  addIcon: {\n    cursor: 'pointer',\n    fontSize: 35,\n    position: 'relative',\n    top: -2,\n    left: -2\n  }\n}));\n\nconst stopPropagation = e => e.stopPropagation();\n\n// Our handleClick does nothing as we wrap the children inside a Link but it is\n// required by ChipField, which uses a Chip from material-ui.\n// The material-ui Chip requires an onClick handler to behave like a clickable element.\nconst handleClick = () => {};\n\nconst ChipList = props => {\n  const {\n    classes: classesOverride,\n    className,\n    children,\n    linkType = 'edit',\n    component = 'div',\n    primaryText,\n    appendLink,\n    ...rest\n  } = props;\n  const { ids, data, loaded, basePath } = useListContext(props);\n  const resource = useResourceContext(props);\n\n  const classes = useStyles(props);\n  const Component = component;\n\n  if (loaded === false) {\n    return <LinearProgress />;\n  }\n\n  return (\n    <Component className={classes.root} {...sanitizeListRestProps(rest)}>\n      {ids.map(id => {\n        if( !data[id] ) return null;\n        const resourceLinkPath = !linkType ? false : linkToRecord(basePath, id, linkType);\n\n        if (resourceLinkPath) {\n          return (\n            <RecordContextProvider value={data[id]} key={id}>\n              <Link className={classes.link} key={id} to={resourceLinkPath} onClick={stopPropagation}>\n                <ChipField\n                  record={data[id]}\n                  resource={resource}\n                  basePath={basePath}\n                  source={primaryText}\n                  color=\"secondary\"\n                  // Workaround to force ChipField to be clickable\n                  onClick={handleClick}\n                />\n              </Link>\n            </RecordContextProvider>\n          );\n        }\n\n        return (\n          <RecordContextProvider value={data[id]} key={id}>\n            <ChipField\n              record={data[id]}\n              resource={resource}\n              basePath={basePath}\n              source={primaryText}\n              color=\"secondary\"\n              // Workaround to force ChipField to be clickable\n              onClick={handleClick}\n            />\n          </RecordContextProvider>\n        );\n      })}\n      {appendLink && <AddCircleIcon color=\"primary\" className={classes.addIcon} onClick={appendLink} />}\n    </Component>\n  );\n};\n\nexport default ChipList;\n"],"names":["useStyles","makeStyles","theme","root","display","flexWrap","link","addIcon","cursor","fontSize","position","top","left","stopPropagation","e","handleClick","ChipList","props","classes","className","children","linkType","component","primaryText","appendLink","rest","useListContext","ids","data","loaded","basePath","resource","useResourceContext","Component","React","LinearProgress","sanitizeListRestProps","map","id","resourceLinkPath","linkToRecord","RecordContextProvider","value","key","Link","to","onClick","ChipField","record","source","color","AddCircleIcon"],"mappings":"w8BAaMA,EAAYC,GAAW,SAAAC,SAAU,CACrCC,KAAM,CACJC,QAAS,OACTC,SAAU,QAEZC,KAAM,GACNC,QAAS,CACPC,OAAQ,UACRC,SAAU,GACVC,SAAU,WACVC,KAAM,EACNC,MAAO,OAILC,EAAkB,SAAAC,UAAKA,EAAED,mBAKzBE,EAAc,aAEdC,EAAW,SAAAC,GAUXA,EARFC,QAQED,EAPFE,UAOEF,EANFG,eAMEH,EALFI,SAAAA,aAAW,WAKTJ,EAJFK,UAAAA,aAAY,QACZC,EAGEN,EAHFM,YACAC,EAEEP,EAFFO,WACGC,IACDR,OACoCS,EAAeT,GAA/CU,IAAAA,IAAKC,IAAAA,KAAMC,IAAAA,OAAQC,IAAAA,SACrBC,EAAWC,EAAmBf,GAE9BC,EAAUlB,EAAUiB,GACpBgB,EAAYX,SAEH,IAAXO,EACKK,gBAACC,QAIRD,gBAACD,KAAUd,UAAWD,EAAQf,MAAUiC,EAAsBX,IAC3DE,EAAIU,KAAI,SAAAC,OACFV,EAAKU,GAAM,OAAO,SACjBC,IAAoBlB,GAAmBmB,EAAaV,EAAUQ,EAAIjB,UAEpEkB,EAEAL,gBAACO,GAAsBC,MAAOd,EAAKU,GAAKK,IAAKL,GAC3CJ,gBAACU,GAAKzB,UAAWD,EAAQZ,KAAMqC,IAAKL,EAAIO,GAAIN,EAAkBO,QAASjC,GACrEqB,gBAACa,GACCC,OAAQpB,EAAKU,GACbP,SAAUA,EACVD,SAAUA,EACVmB,OAAQ1B,EACR2B,MAAM,YAENJ,QAAS/B,MAQjBmB,gBAACO,GAAsBC,MAAOd,EAAKU,GAAKK,IAAKL,GAC3CJ,gBAACa,GACCC,OAAQpB,EAAKU,GACbP,SAAUA,EACVD,SAAUA,EACVmB,OAAQ1B,EACR2B,MAAM,YAENJ,QAAS/B,QAKhBS,GAAcU,gBAACiB,GAAcD,MAAM,UAAU/B,UAAWD,EAAQX,QAASuC,QAAStB"}