"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-admin"),r=require("@semapps/semantic-data-provider"),n=require("react-hook-form");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=o(e);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=function(e){var r=e.optionText,n=e.dataServers,o=t.useRecordContext(),a=n&&Object.values(n).find((function(e){return o.id.startsWith(e.baseUrl)}));return u.default.createElement("span",null,o[r],a&&u.default.createElement("em",{className:"serverName",style:{color:"grey"}},"Â (",a.name,")"))},f=["optionText"],s=["optionText"],p=["children"],m=function(e){return e&&"object"===a(e)?e.id||e["@id"]:e};exports.ImageInput=function(e){return u.default.createElement(t.ImageInput,i({},e,{format:function(e){return"string"==typeof e?{src:e}:e}}))},exports.MultiLinesInput=function(e){return u.default.createElement(t.TextInput,i({multiline:!0,minRows:2,format:function(e){return e?Array.isArray(e)?e.join("\n"):e:""},parse:function(e){return e.split(/\r?\n/)}},e))},exports.MultiServerAutocompleteArrayInput=function(n){var o=n.optionText,a=l(n,f),s=r.useDataServers(),p=e.useCallback((function(e,t){return t[o].toLowerCase().match(e.toLowerCase())}),[o]);return u.default.createElement(t.AutocompleteArrayInput,i({matchSuggestion:p,optionText:u.default.createElement(c,{optionText:o,dataServers:s}),inputText:function(e){return e[o]}},a))},exports.MultiServerAutocompleteInput=function(n){var o=n.optionText,a=l(n,s),c=r.useDataServers(),f=e.useCallback((function(e){if(e&&c){var t=Object.values(c).find((function(t){return e.id.startsWith(t.baseUrl)}));return e[o]+(t?" (".concat(t.name,")"):"")}}),[o,c]);return u.default.createElement(t.AutocompleteInput,i({optionText:f},a))},exports.ReferenceArrayInput=function(r){var o=n.useController({name:r.source}).field,a=o.value,i=o.onChange;return e.useEffect((function(){a&&!Array.isArray(a)&&i([a])}),[a,i]),a&&!Array.isArray(a)?null:u.default.createElement(t.ReferenceArrayInput,r)},exports.ReferenceInput=function(e){var r=e.children,n=l(e,p),o=u.default.Children.only(r);return u.default.createElement(t.ReferenceInput,n,u.default.cloneElement(o,{format:m}))};
//# sourceMappingURL=index.cjs.js.map
