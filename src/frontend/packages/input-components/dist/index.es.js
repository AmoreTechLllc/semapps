import e,{useCallback as t}from"react";import{ImageInput as r,useRecordContext as n,AutocompleteArrayInput as o,AutocompleteInput as c,TextInput as a,useResourceContext as i,ReferenceArrayInput as u,ReferenceInput as f}from"react-admin";import{useDataServers as s}from"@semapps/semantic-data-provider";function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=["source"],d=function(t){var n=t.source,o=O(t,v),c=useRecordContext(),a=c[n]&&"string"==typeof c[n]?l(l({},c),{},y({},n,{src:c[n]})):c;return e.createElement(RecordContextProvider,{value:a},e.createElement(r,b({source:n},o)))},j=function(t){var r=t.optionText,o=t.dataServers,c=n(),a=o&&Object.values(o).find((function(e){return c.id.startsWith(e.baseUrl)}));return e.createElement("span",null,c[r],a&&e.createElement("em",{className:"serverName",style:{color:"grey"}},"Â (",a.name,")"))},g=["optionText"],x=function(r){var n=r.optionText,c=O(r,g),a=s(),i=t((function(e,t){return t[n].toLowerCase().match(e.toLowerCase())}),[n]);return e.createElement(o,b({matchSuggestion:i,optionText:e.createElement(j,{optionText:n,dataServers:a}),inputText:function(e){return e[n]}},c))},h=["optionText"],w=function(r){var n=r.optionText,o=O(r,h),a=s(),i=t((function(e){if(e&&a){var t=Object.values(a).find((function(t){return e.id.startsWith(t.baseUrl)}));return e[n]+(t?" (".concat(t.name,")"):"")}}),[n,a]);return e.createElement(c,b({optionText:i},o))},E=function(t){return e.createElement(a,b({multiline:!0,minRows:2,format:function(e){return e?Array.isArray(e)?e.join("\n"):e:""},parse:function(e){return e.split(/\r?\n/)}},t))},P=function(t){var r=i({}),o=n();if(o&&o[t.source]){var c=o[t.source];Array.isArray(c)||(c=[c]),t.format&&(c=t.format(c)),c=c.map((function(e){return"object"===m(e)?e.id||e["@id"]:e})),o[t.source]=c}return e.createElement(u,b({},t,{resource:r,record:o}))},S=function(t){var r=i({});return e.createElement(f,b({},t,{resource:r,format:function(e){return e?(t.format&&(e=t.format(e)),"object"===m(e)?e.id||e["@id"]:e):e}}))};export{d as ImageInput,E as MultiLinesInput,x as MultiServerAutocompleteArrayInput,w as MultiServerAutocompleteInput,P as ReferenceArrayInput,S as ReferenceInput};
//# sourceMappingURL=index.es.js.map
