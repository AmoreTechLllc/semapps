import*as e from"react";import t,{forwardRef as r,useState as n,useMemo as i,useEffect as o,useCallback as a}from"react";import{useResourceContext as u,useLocale as c,useTranslate as s,useNotify as l,useInput as f,FieldTitle as d,InputHelperText as m,useCreateSuggestionContext as v,useCreate as p,useDataProvider as h,useRedirect as b,useTheme as y,SimpleForm as g,useSaveContext as S,required as E}from"react-admin";import{TextField as O,Grid as w,Typography as x,Dialog as j,DialogContent as k,DialogActions as F,Button as L,Toolbar as A,Box as V,useMediaQuery as P,Tabs as I,Tab as U,Divider as C}from"@mui/material";import N from"@mui/styles/makeStyles";import T from"@mui/material/Autocomplete";import R from"@mui/icons-material/Language";import W from"@mui/icons-material/Add";import _ from"@mui/icons-material/SaveAlt";import{useContainers as q,useDataModel as D}from"@semapps/semantic-data-provider";import"@semapps/input-components";import{styled as B}from"@mui/system";import M from"@mui/icons-material/StarBorder";function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
G=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new w(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return j()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===l)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function f(){}function d(){}function m(){}var v={};u(v,i,(function(){return this}));var p=Object.getPrototypeOf,h=p&&p(p(x([])));h&&h!==t&&r.call(h,i)&&(v=h);var b=m.prototype=f.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=s(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=m,u(b,"constructor",m),u(m,"constructor",d),d.displayName=u(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,o,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new g(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(b),u(b,a,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Y(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Y(o,n,i,a,u,"next",e)}function u(e){Y(o,n,i,a,u,"throw",e)}a(void 0)}))}}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ne(e,t){return e(t={exports:{}},t.exports),t.exports}var ie=ne((function(e,t){var r,n;e.exports=(r={772:(e,t,r)=>{const n=r(826).remove,i=/[.*+?^${}()|[\]\\]/g,o=/[a-z0-9_]/i,a=/\s+/;e.exports=function(e,t,r){var u,c;c={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},u=(u=r)||{},Object.keys(u).forEach(e=>{c[e]=!!u[e]}),r=c;const s=Array.from(e).map(e=>n(e));let l=s.join("");return(t=n(t)).trim().split(a).filter(e=>e.length>0).reduce((e,t)=>{const n=t.length,a=!r.insideWords&&o.test(t[0])?"\\b":"",u=new RegExp(a+t.replace(i,"\\$&"),"i");let c,f;if(c=u.exec(l),r.requireMatchAll&&null===c)return l="",[];for(;c;){f=c.index;const t=n-s.slice(f,f+n).join("").length,i=f-s.slice(0,f).join("").length,o=[f+i,f+n+i+t];if(o[0]!==o[1]&&e.push(o),l=l.slice(0,f)+new Array(n+1).join(" ")+l.slice(f+n),!r.findAllOccurrences)break;c=u.exec(l)}return e},[]).sort((e,t)=>e[0]-t[0])}},826:e=>{var t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z"},r=Object.keys(t).join("|"),n=new RegExp(r,"g"),i=new RegExp(r,""),o=function(e){return e.replace(n,(function(e){return t[e]}))};e.exports=o,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=o}},n={},function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return r[t](o,o.exports,e),o.exports}(772))}));ie.AutosuggestHighlightMatch;var oe=ne((function(e,t){var r,n;e.exports=(r={705:e=>{e.exports=function(e,t){const r=[];return 0===t.length?r.push({text:e,highlight:!1}):t[0][0]>0&&r.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach((n,i)=>{const o=n[0],a=n[1];r.push({text:e.slice(o,a),highlight:!0}),i===t.length-1?a<e.length&&r.push({text:e.slice(a,e.length),highlight:!1}):a<t[i+1][0]&&r.push({text:e.slice(a,t[i+1][0]),highlight:!1})}),r}}},n={},function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return r[t](o,o.exports,e),o.exports}(705))}));oe.AutosuggestHighlightParse;var ae=/^\s+|\s+$/g,ue=/^[-+]0x[0-9a-f]+$/i,ce=/^0b[01]+$/i,se=/^0o[0-7]+$/i,le=parseInt,fe="object"==typeof re&&re&&re.Object===Object&&re,de="object"==typeof self&&self&&self.Object===Object&&self,me=fe||de||Function("return this")(),ve=Object.prototype.toString,pe=Math.max,he=Math.min,be=function(){return me.Date.now()};function ye(e,t,r){var n,i,o,a,u,c,s=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=n,o=i;return n=i=void 0,s=t,a=e.apply(o,r)}function v(e){return s=e,u=setTimeout(h,t),l?m(e):a}function p(e){var r=e-c;return void 0===c||r>=t||r<0||f&&e-s>=o}function h(){var e=be();if(p(e))return b(e);u=setTimeout(h,function(e){var r=t-(e-c);return f?he(r,o-(e-s)):r}(e))}function b(e){return u=void 0,d&&n?m(e):(n=i=void 0,a)}function y(){var e=be(),r=p(e);if(n=arguments,i=this,c=e,r){if(void 0===u)return v(c);if(f)return u=setTimeout(h,t),m(c)}return void 0===u&&(u=setTimeout(h,t)),a}return t=Se(t)||0,ge(r)&&(l=!!r.leading,o=(f="maxWait"in r)?pe(Se(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==u&&clearTimeout(u),s=0,n=c=i=u=void 0},y.flush=function(){return void 0===u?a:b(be())},y}function ge(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Se(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==ve.call(e)}(e))return NaN;if(ge(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ge(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ae,"");var r=ce.test(e);return r||se.test(e)?le(e.slice(2),r?2:8):ue.test(e)?NaN:+e}var Ee=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ge(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ye(e,t,{leading:n,maxWait:t,trailing:i})},Oe=["fetchLexicon","source","defaultValue","label","parse","optionText","helperText"],we=N((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}})),xe=function(e,t){return"string"==typeof e?e:e.label?e.label:"string"==typeof t?e[t]:"function"==typeof t?t(e):void 0},je=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)},ke=r((function(e,r){var a=e.fetchLexicon,v=e.source,p=e.defaultValue,h=e.label,b=e.parse,y=e.optionText,g=e.helperText,S=Z(e,Oe),E=u(),j=we(),k=c(),F=s(),L=l(),A=f($({source:v,defaultValue:p},S)),V=A.field,P=V.value,I=V.onChange,U=V.onBlur,C=A.fieldState,N=C.isTouched,_=C.error,q=A.formState.submitError,D=A.isRequired,B=J(n(p),2),M=B[0],z=B[1],G=J(n([]),2),Y=G[0],H=G[1],X=i((function(){return Ee((function(e,t){a({keyword:e,locale:k}).then((function(e){return t(e)})).catch((function(e){return L(e.message,{type:"error"})}))}),200)}),[k,a,L]);return o((function(){M&&X(M,(function(e){return H(e)}))}),[P,M,X]),t.createElement(T,{fullWidth:!0,freeSolo:!0,autoComplete:!0,value:P||null,ref:r,openOnFocus:!!p,options:P?[P].concat(Q(Y)):Y,filterSelectedOptions:!0,filterOptions:function(e,t){return M&&e.push({label:je(M),summary:'Ajouter "'.concat(je(M),'" au dictionnaire'),icon:W}),e},clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,getOptionLabel:function(e){return xe(e,y)},isOptionEqualToValue:function(e,t){return xe(e,y)===xe(t,y)},onChange:function(e,t){t&&b&&(t=b(t)),I(t),H([])},onInputChange:function(e,t){return z(t)},noOptionsText:F("ra.navigation.no_results"),renderInput:function(e){return e.inputProps.autoComplete="new-password",t.createElement(O,K({},e,{autoFocus:!0,inputProps:$($({},e.inputProps),{},{onBlur:function(t){U(t),e.inputProps.onBlur&&e.inputProps.onBlur(t)},onFocus:function(t){e.inputProps.onFocus&&e.inputProps.onFocus(t)}}),label:""!==h&&!1!==h&&t.createElement(d,{label:h,source:v,resource:E,isRequired:D}),error:!(!N||!_&&!q),helperText:t.createElement(m,{touched:N,error:_||q,helperText:g})}))},renderOption:function(e,r){var n=ie(r.label,M),i=oe(r.label,n);return t.createElement(w,K({container:!0,alignItems:"center"},e,{key:r.uri||"create"}),t.createElement(w,{item:!0},t.createElement(r.icon||R,{className:j.icon})),t.createElement(w,{item:!0,xs:!0},"string"==typeof i?i:i.map((function(e,r){return t.createElement("span",{key:r,style:{fontWeight:e.highlight?700:400}},e.text)})),t.createElement(x,{variant:"body2",color:"textSecondary"},r.summary)))}})}));ke.defaultProps={optionText:"label"};var Fe=function(e){var r=e.fetchLexicon,i=e.selectData,o=v(),c=o.filter,s=o.onCancel,l=o.onCreate,f=u(),d=J(n(c||""),2),m=d[0],h=d[1],b=J(p(),1)[0],y=a((function(){h(""),s()}),[h,s]),g=a((function(){m.uri||delete m.summary,b(f,{data:i(m)},{onSuccess:function(e){console.log("onSuccess",e),h(""),l(e)}})}),[b,l,i,m,h,f]);return t.createElement(j,{open:!0,onClose:y,fullWidth:!0,maxWidth:"sm"},t.createElement(k,null,t.createElement(ke,{source:"lexicon",label:"Titre",fetchLexicon:r,defaultValue:c,value:m,onChange:h})),t.createElement(F,null,t.createElement(L,{onClick:y},"Annuler"),t.createElement(L,{variant:"contained",color:"primary",onClick:g},"Ajouter")))};function Le(){return(Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ae(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ve=".".charCodeAt(0),Pe=/\\(\\)?/g,Ie=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),Ue={},Ce=/[.[\]]+/,Ne=function(e){if(null==e||!e.length)return[];if("string"!=typeof e)throw new Error("toPath() expects a string");var t,r;return null==Ue[e]&&(e.endsWith("[]")?Ue[e]=e.split(Ce).filter(Boolean):Ue[e]=(r=[],(t=e).charCodeAt(0)===Ve&&r.push(""),t.replace(Ie,(function(e,t,n,i){var o=e;n?o=i.replace(Pe,"$1"):t&&(o=t.trim()),r.push(o)})),r)),Ue[e]},Te=function(e,t){for(var r=Ne(t),n=e,i=0;i<r.length;i++){var o=r[i];if(null==n||"object"!=typeof n||Array.isArray(n)&&isNaN(o))return;n=n[o]}return n};function Re(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var We=function(e,t,r,n){if(void 0===n&&(n=!1),null==e)throw new Error("Cannot call setIn() with "+String(e)+" state");if(null==t)throw new Error("Cannot call setIn() with "+String(t)+" key");return function e(t,r,n,i,o){if(r>=n.length)return i;var a=n[r];if(isNaN(a)){var u;if(null==t){var c,s=e(void 0,r+1,n,i,o);return void 0===s?void 0:((c={})[a]=s,c)}if(Array.isArray(t))throw new Error("Cannot set a non-numeric property on an array");var l=e(t[a],r+1,n,i,o);if(void 0===l){var f=Object.keys(t).length;if(void 0===t[a]&&0===f)return;return void 0!==t[a]&&f<=1?isNaN(n[r-1])||o?void 0:{}:(t[a],Ae(t,[a].map(Re)))}return Le({},t,((u={})[a]=l,u))}var d=Number(a);if(null==t){var m=e(void 0,r+1,n,i,o);if(void 0===m)return;var v=[];return v[d]=m,v}if(!Array.isArray(t))throw new Error("Cannot set a numeric property on an object");var p=e(t[d],r+1,n,i,o),h=[].concat(t);if(o&&void 0===p){if(h.splice(d,1),0===h.length)return}else h[d]=p;return h}(e,0,Ne(t),r,n)},_e="FINAL_FORM/array-error";function qe(e,t){var r=e.errors,n=e.initialValues,i=e.lastSubmittedValues,o=e.submitErrors,a=e.submitFailed,u=e.submitSucceeded,c=e.submitting,s=e.values,l=t.active,f=t.blur,d=t.change,m=t.data,v=t.focus,p=t.modified,h=t.modifiedSinceLastSubmit,b=t.name,y=t.touched,g=t.validating,S=t.visited,E=Te(s,b),O=Te(r,b);O&&O[_e]&&(O=O[_e]);var w=o&&Te(o,b),x=n&&Te(n,b),j=t.isEqual(x,E),k=!O&&!w;return{active:l,blur:f,change:d,data:m,dirty:!j,dirtySinceLastSubmit:!(!i||t.isEqual(Te(i,b),E)),error:O,focus:v,initial:x,invalid:!k,length:Array.isArray(E)?E.length:void 0,modified:p,modifiedSinceLastSubmit:h,name:b,pristine:j,submitError:w,submitFailed:a,submitSucceeded:u,submitting:c,touched:y,valid:k,value:E,visited:S,validating:g}}var De=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],Be=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),o=0;o<r.length;o++){var a=r[o];if(!i(a)||e[a]!==t[a])return!1}return!0};function Me(e,t,r,n,i,o){var a=!1;return i.forEach((function(i){n[i]&&(e[i]=t[i],r&&(~o.indexOf(i)?Be(t[i],r[i]):t[i]===r[i])||(a=!0))})),a}var ze=["data"],$e=function(e,t,r,n){var i={blur:e.blur,change:e.change,focus:e.focus,name:e.name};return Me(i,e,t,r,De,ze)||!t||n?i:void 0},Ge=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],Ye=["touched","visited"];function He(e,t,r,n){var i={};return Me(i,e,t,r,Ge,Ye)||!t||n?i:void 0}var Xe=function(e){var t,r;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t&&i.length===t.length&&!i.some((function(e,r){return!Be(t[r],e)}))||(t=i,r=e.apply(void 0,i)),r}},Ke=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then},Ze=function(e,t){return e===t},Je=function e(t){return Object.keys(t).some((function(r){var n=t[r];return!n||"object"!=typeof n||n instanceof Error?void 0!==n:e(n)}))};function Qe(e,t,r,n,i,o){var a=i(r,n,t,o);return!!a&&(e(a),!0)}function et(e,t,r,n,i){var o=e.entries;Object.keys(o).forEach((function(e){var a=o[Number(e)];if(a){var u=a.subscription,c=a.subscriber,s=a.notified;Qe(c,u,t,r,n,i||!s)&&(a.notified=!0)}}))}function tt(e){if(!e)throw new Error("No config specified");var t=e.debug,r=e.destroyOnUnregister,n=e.keepDirtyOnReinitialize,i=e.initialValues,o=e.mutators,a=e.onSubmit,u=e.validate,c=e.validateOnBlur;if(!a)throw new Error("No onSubmit function specified");var s={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:i&&Le({},i),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:i?Le({},i):{}},lastFormState:void 0},l=0,f=!1,d=!1,m=!1,v=0,p={},h=function(e,t,r){var n=r(Te(e.formState.values,t));e.formState.values=We(e.formState.values,t,n)||{}},b=function(e,t,r){if(e.fields[t]){var n,i;e.fields=Le({},e.fields,((n={})[r]=Le({},e.fields[t],{name:r,blur:function(){return A.blur(r)},change:function(e){return A.change(r,e)},focus:function(){return A.focus(r)},lastFieldState:void 0}),n)),delete e.fields[t],e.fieldSubscribers=Le({},e.fieldSubscribers,((i={})[r]=e.fieldSubscribers[t],i)),delete e.fieldSubscribers[t];var o=Te(e.formState.values,t);e.formState.values=We(e.formState.values,t,void 0)||{},e.formState.values=We(e.formState.values,r,o),delete e.lastFormState}},y=function(e){return function(){if(o){for(var t={formState:s.formState,fields:s.fields,fieldSubscribers:s.fieldSubscribers,lastFormState:s.lastFormState},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=o[e](n,t,{changeValue:h,getIn:Te,renameField:b,resetFieldState:A.resetFieldState,setIn:We,shallowEqual:Be});return s.formState=t.formState,s.fields=t.fields,s.fieldSubscribers=t.fieldSubscribers,s.lastFormState=t.lastFormState,E(void 0,(function(){O(),F()})),a}}},g=o?Object.keys(o).reduce((function(e,t){return e[t]=y(t),e}),{}):{},S=function(e){return Object.keys(e.validators).reduce((function(t,r){var n=e.validators[Number(r)]();return n&&t.push(n),t}),[])},E=function(e,t){if(f)return d=!0,void t();var r=s.fields,n=s.formState,i=Le({},r),o=Object.keys(i);if(u||o.some((function(e){return S(i[e]).length}))){var a=!1;if(e){var c=i[e];if(c){var l=c.validateFields;l&&(a=!0,o=l.length?l.concat(e):[e])}}var m,h={},b={},y={},g=[].concat(function(e){var t=[];if(u){var r=u(Le({},s.formState.values));Ke(r)?t.push(r.then((function(t){return e(t,!0)}))):e(r,!1)}return t}((function(e,t){t?b=e||{}:h=e||{}})),o.reduce((function(e,t){return e.concat(function(e,t){var r,n=[],i=S(e);i.length&&(i.forEach((function(i){var o=i(Te(s.formState.values,e.name),s.formState.values,0===i.length||3===i.length?qe(s.formState,s.fields[e.name]):void 0);if(o&&Ke(o)){e.validating=!0;var a=o.then((function(r){s.fields[e.name]&&(s.fields[e.name].validating=!1,t(r))}));n.push(a)}else r||(r=o)})),t(r));return n}(r[t],(function(e){y[t]=e})))}),[])),E=g.length>0,O=++v,w=Promise.all(g).then((m=O,function(e){return delete p[m],e}));E&&(p[O]=w);var x=function(e){var t=Le({},a?n.errors:{},h,e?b:n.asyncErrors),c=function(e){o.forEach((function(n){if(r[n]){var o=Te(h,n),c=Te(t,n),s=S(i[n]).length,l=y[n];e(n,s&&l||u&&o||(o||a?void 0:c))}}))};c((function(e,r){t=We(t,e,r)||{}})),c((function(e,r){if(r&&r[_e]){var n=Te(t,e),i=[].concat(n);i[_e]=r[_e],t=We(t,e,i)}})),Be(n.errors,t)||(n.errors=t),e&&(n.asyncErrors=b),n.error=h["FINAL_FORM/form-error"]};if(E&&(s.formState.validating++,t()),x(!1),t(),E){var j=function(){s.formState.validating--,t()};w.then((function(){v>O||x(!0)})).then(j,j)}}else t()},O=function(e){if(!l){var t=s.fields,r=s.fieldSubscribers,n=s.formState,i=Le({},t),o=function(e){var t=i[e],o=qe(n,t),a=t.lastFieldState;t.lastFieldState=o;var u=r[e];u&&et(u,o,a,$e,void 0===a)};e?o(e):Object.keys(i).forEach(o)}},w=function(){Object.keys(s.fields).forEach((function(e){s.fields[e].touched=!0}))},x=function(){var e=s.fields,t=s.formState,r=s.lastFormState,n=Le({},e),i=Object.keys(n),o=!1,a=i.reduce((function(e,r){return!n[r].isEqual(Te(t.values,r),Te(t.initialValues||{},r))&&(o=!0,e[r]=!0),e}),{}),u=i.reduce((function(e,r){var i=t.lastSubmittedValues||{};return n[r].isEqual(Te(t.values,r),Te(i,r))||(e[r]=!0),e}),{});t.pristine=!o,t.dirtySinceLastSubmit=!(!t.lastSubmittedValues||!Object.values(u).some((function(e){return e}))),t.modifiedSinceLastSubmit=!(!t.lastSubmittedValues||!Object.keys(n).some((function(e){return n[e].modifiedSinceLastSubmit}))),t.valid=!(t.error||t.submitError||Je(t.errors)||t.submitErrors&&Je(t.submitErrors));var c=function(e){var t=e.active,r=e.dirtySinceLastSubmit,n=e.modifiedSinceLastSubmit,i=e.error,o=e.errors,a=e.initialValues,u=e.pristine,c=e.submitting,s=e.submitFailed,l=e.submitSucceeded,f=e.submitError,d=e.submitErrors,m=e.valid,v=e.validating,p=e.values;return{active:t,dirty:!u,dirtySinceLastSubmit:r,modifiedSinceLastSubmit:n,error:i,errors:o,hasSubmitErrors:!!(f||d&&Je(d)),hasValidationErrors:!(!i&&!Je(o)),invalid:!m,initialValues:a,pristine:u,submitting:c,submitFailed:s,submitSucceeded:l,submitError:f,submitErrors:d,valid:m,validating:v>0,values:p}}(t),l=i.reduce((function(e,t){return e.modified[t]=n[t].modified,e.touched[t]=n[t].touched,e.visited[t]=n[t].visited,e}),{modified:{},touched:{},visited:{}}),f=l.modified,d=l.touched,m=l.visited;return c.dirtyFields=r&&Be(r.dirtyFields,a)?r.dirtyFields:a,c.dirtyFieldsSinceLastSubmit=r&&Be(r.dirtyFieldsSinceLastSubmit,u)?r.dirtyFieldsSinceLastSubmit:u,c.modified=r&&Be(r.modified,f)?r.modified:f,c.touched=r&&Be(r.touched,d)?r.touched:d,c.visited=r&&Be(r.visited,m)?r.visited:m,r&&Be(r,c)?r:c},j=!1,k=!1,F=function e(){if(j)k=!0;else{if(j=!0,t&&t(x(),Object.keys(s.fields).reduce((function(e,t){return e[t]=s.fields[t],e}),{})),!(l||f&&m)){var r=s.lastFormState,n=x();n!==r&&(s.lastFormState=n,et(s.subscribers,n,r,He))}j=!1,k&&(k=!1,e())}},L=function(){return Object.keys(s.fields).forEach((function(e){return s.fields[e].modifiedSinceLastSubmit=!1}))};E(void 0,(function(){F()}));var A={batch:function(e){l++,e(),l--,O(),F()},blur:function(e){var t=s.fields,r=s.formState,n=t[e];n&&(delete r.active,t[e]=Le({},n,{active:!1,touched:!0}),c?E(e,(function(){O(),F()})):(O(),F()))},change:function(e,t){var r=s.fields,n=s.formState;if(Te(n.values,e)!==t){h(s,e,(function(){return t}));var i=r[e];i&&(r[e]=Le({},i,{modified:!0,modifiedSinceLastSubmit:!!n.lastSubmittedValues})),c?(O(),F()):E(e,(function(){O(),F()}))}},get destroyOnUnregister(){return!!r},set destroyOnUnregister(e){r=e},focus:function(e){var t=s.fields[e];t&&!t.active&&(s.formState.active=e,t.active=!0,t.visited=!0,O(),F())},mutators:g,getFieldState:function(e){var t=s.fields[e];return t&&t.lastFieldState},getRegisteredFields:function(){return Object.keys(s.fields)},getState:function(){return x()},initialize:function(e){var t=s.fields,r=s.formState,i=Le({},t),o="function"==typeof e?e(r.values):e;n||(r.values=o);var a=n?Object.keys(i).reduce((function(e,t){return i[t].isEqual(Te(r.values,t),Te(r.initialValues||{},t))||(e[t]=Te(r.values,t)),e}),{}):{};r.initialValues=o,r.values=o,Object.keys(a).forEach((function(e){r.values=We(r.values,e,a[e])||{}})),E(void 0,(function(){O(),F()}))},isValidationPaused:function(){return f},pauseValidation:function(e){void 0===e&&(e=!0),f=!0,m=e},registerField:function(e,t,n,i){void 0===n&&(n={}),s.fieldSubscribers[e]||(s.fieldSubscribers[e]={index:0,entries:{}});var o=s.fieldSubscribers[e].index++;s.fieldSubscribers[e].entries[o]={subscriber:Xe(t),subscription:n,notified:!1};var a=s.fields[e]||{active:!1,afterSubmit:i&&i.afterSubmit,beforeSubmit:i&&i.beforeSubmit,data:i&&i.data||{},isEqual:i&&i.isEqual||Ze,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:e,touched:!1,valid:!0,validateFields:i&&i.validateFields,validators:{},validating:!1,visited:!1};a.blur=a.blur||function(){return A.blur(e)},a.change=a.change||function(t){return A.change(e,t)},a.focus=a.focus||function(){return A.focus(e)},s.fields[e]=a;var u=!1,c=i&&i.silent,l=function(){c?O(e):(F(),O())};if(i){u=!(!i.getValidator||!i.getValidator()),i.getValidator&&(s.fields[e].validators[o]=i.getValidator);var f=void 0===Te(s.formState.values,e);void 0===i.initialValue||!f&&Te(s.formState.values,e)!==Te(s.formState.initialValues,e)||(s.formState.initialValues=We(s.formState.initialValues||{},e,i.initialValue),s.formState.values=We(s.formState.values,e,i.initialValue),E(void 0,l)),void 0!==i.defaultValue&&void 0===i.initialValue&&void 0===Te(s.formState.initialValues,e)&&f&&(s.formState.values=We(s.formState.values,e,i.defaultValue))}return u?E(void 0,l):l(),function(){var t=!1;s.fields[e]&&(t=!(!s.fields[e].validators[o]||!s.fields[e].validators[o]()),delete s.fields[e].validators[o]);var n=!!s.fieldSubscribers[e];n&&delete s.fieldSubscribers[e].entries[o];var i=n&&!Object.keys(s.fieldSubscribers[e].entries).length;i&&(delete s.fieldSubscribers[e],delete s.fields[e],t&&(s.formState.errors=We(s.formState.errors,e,void 0)||{}),r&&(s.formState.values=We(s.formState.values,e,void 0,!0)||{})),c||(t?E(void 0,(function(){F(),O()})):i&&F())}},reset:function(e){void 0===e&&(e=s.formState.initialValues),s.formState.submitting&&(s.formState.resetWhileSubmitting=!0),s.formState.submitFailed=!1,s.formState.submitSucceeded=!1,delete s.formState.submitError,delete s.formState.submitErrors,delete s.formState.lastSubmittedValues,A.initialize(e||{})},resetFieldState:function(e){s.fields[e]=Le({},s.fields[e],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),E(void 0,(function(){O(),F()}))},restart:function(e){void 0===e&&(e=s.formState.initialValues),A.batch((function(){for(var t in s.fields)A.resetFieldState(t),s.fields[t]=Le({},s.fields[t],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});A.reset(e)}))},resumeValidation:function(){f=!1,m=!1,d&&E(void 0,(function(){O(),F()})),d=!1},setConfig:function(e,i){switch(e){case"debug":t=i;break;case"destroyOnUnregister":r=i;break;case"initialValues":A.initialize(i);break;case"keepDirtyOnReinitialize":n=i;break;case"mutators":o=i,i?(Object.keys(g).forEach((function(e){e in i||delete g[e]})),Object.keys(i).forEach((function(e){g[e]=y(e)}))):Object.keys(g).forEach((function(e){delete g[e]}));break;case"onSubmit":a=i;break;case"validate":u=i,E(void 0,(function(){O(),F()}));break;case"validateOnBlur":c=i;break;default:throw new Error("Unrecognised option "+e)}},submit:function(){var e=s.formState;if(!e.submitting){if(delete e.submitErrors,delete e.submitError,e.lastSubmittedValues=Le({},e.values),s.formState.error||Je(s.formState.errors))return w(),L(),s.formState.submitFailed=!0,F(),void O();var t=Object.keys(p);if(t.length)Promise.all(t.map((function(e){return p[Number(e)]}))).then(A.submit,console.error);else if(!Object.keys(s.fields).some((function(e){return s.fields[e].beforeSubmit&&!1===s.fields[e].beforeSubmit()}))){var r,n=!1,i=function(t){e.submitting=!1;var i=e.resetWhileSubmitting;return i&&(e.resetWhileSubmitting=!1),t&&Je(t)?(e.submitFailed=!0,e.submitSucceeded=!1,e.submitErrors=t,e.submitError=t["FINAL_FORM/form-error"],w()):(i||(e.submitFailed=!1,e.submitSucceeded=!0),Object.keys(s.fields).forEach((function(e){return s.fields[e].afterSubmit&&s.fields[e].afterSubmit()}))),F(),O(),n=!0,r&&r(t),t};e.submitting=!0,e.submitFailed=!1,e.submitSucceeded=!1,e.lastSubmittedValues=Le({},e.values),L();var o=a(e.values,A,i);if(!n){if(o&&Ke(o))return F(),O(),o.then(i,(function(e){throw i(),e}));if(a.length>=3)return F(),O(),new Promise((function(e){r=e}));i(o)}}}},subscribe:function(e,t){if(!e)throw new Error("No callback given.");if(!t)throw new Error("No subscription provided. What values do you want to listen to?");var r=Xe(e),n=s.subscribers,i=n.index++;n.entries[i]={subscriber:r,subscription:t,notified:!1};var o=x();return Qe(r,t,o,o,He,!0),function(){delete n.entries[i]}}};return A}var rt=["render","children","component"];function nt(e,r,n){void 0===n&&(n=function(e,t){return e===t});var i=t.useRef(e);t.useEffect((function(){n(e,i.current)||(r(),i.current=e)}))}var it=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),o=0;o<r.length;o++){var a=r[o];if(!i(a)||e[a]!==t[a])return!1}return!0},ot=e.createContext();var at=function(e,t){return function(e,t,r){r.forEach((function(r){Object.defineProperty(e,r,{get:function(){return t[r]},enumerable:!0})}))}(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},ut=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],ct={"final-form":"4.20.8","react-final-form":"6.5.8"},st=Ge.reduce((function(e,t){return e[t]=!0,e}),{});function lt(r){var n,i,o=r.debug,a=r.decorators,u=void 0===a?[]:a,c=r.destroyOnUnregister,s=r.form,l=r.initialValues,f=r.initialValuesEqual,d=r.keepDirtyOnReinitialize,m=r.mutators,v=r.onSubmit,p=r.subscription,h=void 0===p?st:p,b=r.validate,y=r.validateOnBlur,g=Ae(r,ut),S={debug:o,destroyOnUnregister:c,initialValues:l,keepDirtyOnReinitialize:d,mutators:m,onSubmit:v,validate:b,validateOnBlur:y},E=(n=function(){var e=s||tt(S);return e.pauseValidation(),e},(i=t.useRef()).current||(i.current=n()),i.current),O=e.useState((function(){var e={};return E.subscribe((function(t){e=t}),h)(),e})),w=O[0],x=O[1],j=function(e){var r=t.useRef(e);return t.useEffect((function(){r.current=e})),r}(w);e.useEffect((function(){E.isValidationPaused()&&E.resumeValidation();var e=[E.subscribe((function(e){it(e,j.current)||x(e)}),h)].concat(u?u.map((function(e){return e(E)})):[]);return function(){E.pauseValidation(),e.reverse().forEach((function(e){return e()}))}}),u),nt(o,(function(){E.setConfig("debug",o)})),nt(c,(function(){E.destroyOnUnregister=!!c})),nt(d,(function(){E.setConfig("keepDirtyOnReinitialize",d)})),nt(l,(function(){E.setConfig("initialValues",l)}),f||it),nt(m,(function(){E.setConfig("mutators",m)})),nt(v,(function(){E.setConfig("onSubmit",v)})),nt(b,(function(){E.setConfig("validate",b)})),nt(y,(function(){E.setConfig("validateOnBlur",y)}));var k={form:Le({},E,{reset:function(e){var t;(t=e)&&"function"==typeof t.stopPropagation?E.reset():E.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),E.submit()}};return at(k,w),e.createElement(ot.Provider,{value:E},function(t,r,n){var i=t.render,o=t.children,a=t.component,u=Ae(t,rt);if(a)return e.createElement(a,Object.assign(r,u,{children:o,render:i}));if(i)return i(void 0===o?Object.assign(r,u):Object.assign(r,u,{children:o}));if("function"!=typeof o)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+n);return o(Object.assign(r,u))}(Le({},g,{__versions:ct}),k,"ReactFinalForm"))}De.reduce((function(e,t){return e[t]=!0,e}),{});var ft=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then},dt=function(e,t){return e===t},mt=function(e){var t=h(),r=b(),n=l();return a(function(){var i=H(G().mark((function i(o){var a,u,c,s,l,f,d=arguments;return G().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:[],i.next=3,t.getOne(e,{id:o});case 3:return u=i.sent,c=u.data,(s=$({},c))["http://www.w3.org/ns/prov#wasDerivedFrom"]=s.id,delete s.id,delete s["@context"],a.forEach((function(e){delete s[e]})),i.next=12,t.create(e,{data:s});case 12:l=i.sent,f=l.data,r("/"+e+"/"+encodeURIComponent(f.id)+"/show"),n("La ressource a bien été copiée",{type:"success"});case 16:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),[e,t,r,n])},vt=function(e){var t=h(),r=l(),n=b();return a(function(){var i=H(G().mark((function i(o){return G().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.create(e,{id:o});case 2:n("/"+e+"/"+encodeURIComponent(o)+"/show"),r("La ressource a bien été importée",{type:"success"});case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),[t,n,r])},pt=B(A)((function(){var e=J(y(),1)[0];return{backgroundColor:"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900],marginTop:e.spacing(2)}})),ht=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r={};return e.subscribe((function(n){var i=n.values;e.batch((function(){var n=function(t,n,o){var a=i&&Te(i,t),u=r&&Te(r,t);if(!n(a,u))if("function"==typeof o){var c=o(a,t,i,r);ft(c)?c.then((function(t){Object.keys(t).forEach((function(r){e.change(r,t[r])}))})):Object.keys(c).forEach((function(t){e.change(t,c[t])}))}else Object.keys(o).forEach((function(t){var n=(0,o[t])(a,i,r);ft(n)?n.then((function(r){e.change(t,r)})):e.change(t,n)}))},o=e.getRegisteredFields();t.forEach((function(e){var t=e.field,r=e.isEqual,i=e.updates;if("string"==typeof t)n(t,r||dt,i);else{var a=Array.isArray(t)?function(e){return~t.indexOf(e)||-1!==t.findIndex((function(t){return t instanceof RegExp&&t.test(e)}))}:function(e){return t.test(e)};o.forEach((function(e){a(e)&&n(e,r||dt,i)}))}})),r=i}))}),{values:!0})}}({field:"remoteUri",updates:function(e){return e?{plainUri:e}:{}}},{field:"plainUri",updates:function(e,t,r){return e!==r.remoteUri?{remoteUri:null}:{}}}),bt=function(e){e.basePath,e.record;var r=e.resource,n=e.stripProperties;q(r,"@remote");var i=D(r),o=mt(r),u=vt(r),c=a(function(){var e=H(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.plainUri,"fork"!==t.method){e.next=6;break}return e.next=4,o(r,n);case 4:e.next=8;break;case 6:return e.next=8,u(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,u,n]);return i?t.createElement(lt,{onSubmit:c,decorators:[ht],initialValues:{method:"sync"},render:function(e){var r=e.handleSubmit,n=e.dirtyFields;return t.createElement("form",{onSubmit:r},t.createElement(V,{m:"1em"}),t.createElement(pt,null,t.createElement(L,{type:"submit",startIcon:t.createElement(_,null),variant:"contained",color:"primary",disabled:!n.plainUri},"Importer")))}}):null},yt=["stripProperties"],gt=N((function(){return{tab:{maxWidth:"unset",padding:"6px 24px"}}})),St=function(e){var r=e.stripProperties,i=Z(e,yt),o=J(n(0),2),a=o[0],u=o[1],c=gt(),s=P((function(e){return e.breakpoints.down("sm")}),{noSsr:!0});return t.createElement(t.Fragment,null,t.createElement(V,{pb:2,fullWidth:!0},t.createElement(I,{value:a,onChange:function(e,t){return u(t)},indicatorColor:"primary"},t.createElement(U,{className:c.tab,label:"Créer"}),t.createElement(U,{className:c.tab,label:s?"Importer":"Importer une ressource distante"})),t.createElement(C,null)),0===a&&t.createElement(g,i),1===a&&t.createElement(bt,K({stripProperties:r||[]},i)))},Et=function(e){var r=e.fetchLexicon,n=e.selectData,i=S().save,o=a(function(){var e=H(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.lexicon).uri||delete r.summary,"string"==typeof r&&(r={label:r}),e.next=5,i(n(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,i]);return t.createElement(g,{onSubmit:o},t.createElement(ke,{label:"Titre",source:"lexicon",fetchLexicon:r,validate:E()}))},Ot=function(e){return e&&e[0].toUpperCase()+e.slice(1)||""},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://www.wikidata.org/w/api.php";return function(){var t=H(G().mark((function t(r){var n,i,o,a;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.keyword,i=r.locale,t.next=3,fetch("".concat(e,"?action=wbsearchentities&format=json&language=").concat(i,"&uselang=").concat(i,"&type=item&limit=10&origin=*&search=").concat(encodeURIComponent(n)));case 3:if(!(o=t.sent).ok){t.next=11;break}return t.next=7,o.json();case 7:return a=t.sent,t.abrupt("return",a.search.map((function(e){return{uri:e.concepturi,label:Ot(e.match.text),summary:Ot(e.description),icon:R}})));case 11:throw new Error("Failed to fetch Wikidata server");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xt=ne((function(e){var t,r;t=re,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(n>0&&(i=i.replace(/^[\/]+/,"")),i=n<e.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),t.push(i))}var o=t.join("/"),a=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=a.shift()+(a.length>0?"?":"")+a.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),jt=function(e){return e&&e[0].toUpperCase()+e.slice(1)||""},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://ec.europa.eu/esco/api",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"skill";return function(){var r=H(G().mark((function r(n){var i,o,a,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.keyword,o=n.locale,r.next=3,fetch(xt(e,"suggest2?text=".concat(encodeURIComponent(i),"&language=").concat(o,"&type=").concat(t,"&isInScheme=&facet=&offset=&limit=&full=&selectedVersion=&viewObsolete=")));case 3:if(!(a=r.sent).ok){r.next=11;break}return r.next=7,a.json();case 7:return u=r.sent,r.abrupt("return",u._embedded.results.map((function(e){return{uri:e.uri,label:jt(e.title.replace("’","'")),icon:M}})));case 11:throw new Error("Failed to fetch ESCO server");case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};export{St as CreateOrImportForm,bt as ImportForm,ke as LexiconAutocompleteInput,Fe as LexiconCreateDialog,Et as LexiconImportForm,kt as fetchESCO,wt as fetchWikidata,mt as useFork,vt as useSync};
//# sourceMappingURL=index.es.js.map
