"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=e(t),n=require("react-admin"),a=require("@material-ui/core/styles"),i=e(require("jsonld")),s=e(require("speakingurl")),o=e(require("crypto")),u=e(require("fs")),c=e(require("path"));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){p(i,n,a,s,o,"next",e)}function o(e){p(i,n,a,s,o,"throw",e)}s(void 0)}))}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=m(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}var k=function(e){var t=e.record,a=e.source,i=v(e,["record","source"]);return(null==t?void 0:t[a])&&(Array.isArray(t[a])||(t[a]=[t[a]]),t[a]=t[a].map((function(e){return e["@id"]||e.id||e}))),r.createElement(n.ReferenceArrayField,d({record:t,source:a},i))};k.defaultProps={addLabel:!0};var _=function(e){var t=e.record,a=e.source,i=v(e,["record","source"]);return t[a]&&"object"===l(t[a])&&(t[a]=t[a]["@id"]||t[a].id),r.createElement(n.ReferenceField,d({record:t,source:a},i))};_.defaultProps={addLabel:!0};var A=function(e){var n=e.children,a=e.record,i=e.filter,s=e.source,o=v(e,["children","record","filter","source"]),u=g(t.useState(),2),c=u[0],l=u[1];return t.useEffect((function(){if(a&&s&&Array.isArray(null==a?void 0:a[s])){var e=null==a?void 0:a[s].filter((function(e){var t=!0;for(var r in i){var n=e[r];Array.isArray(n)?n.includes(i[r])||(t=!1):n!==i[r]&&(t=!1)}return t})),t=b({},a);t[s]=e.length>0?e:void 0,l(t)}}),[a,s,i]),r.createElement(r.Fragment,null,r.Children.map(n,(function(e,t){return r.cloneElement(e,b(b({},o),{},{record:c,addLabel:!0,source:s}))})))},D=function(e){var t=n.useResourceContext({});return r.createElement(n.ReferenceArrayInput,d({},e,{resource:t,format:function(t){return t?(Array.isArray(t)||(t=[t]),e.format&&(t=e.format(t)),t.map((function(e){return"object"===l(e)?e.id||e["@id"]:e}))):t}}))},S=a.makeStyles({form:{display:"flex"},input:{paddingRight:"20px"}}),N=a.makeStyles({root:{display:"none"}}),w=function(e,t){return Object.keys(t).find((function(r){return t[r][e]}))},C=function(e,t){return Object.keys(t).find((function(r){return e.startsWith(t[r].baseUrl)}))},x=function(){var e=h(regeneratorRuntime.mark((function e(t,r){var n,a,s,o,u,c,l,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.dataServers,o=r.httpClient,u=r.jsonContext,c=w("authServer",s),(l=C(t,s))===c||!(null===(n=s[c])||void 0===n?void 0:n.proxyUrl)||!0===(null===(a=s[l])||void 0===a?void 0:a.noProxy)){e.next=9;break}return e.next=6,o(s[c].proxyUrl,{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams({id:t})});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,o(t,{noToken:l!==c});case 11:e.t0=e.sent;case 12:if(p=e.t0,(h=p.json).id=h.id||h["@id"],h["@context"]===u){e.next=19;break}return e.next=18,i.compact(h,u);case 18:h=e.sent;case 19:return e.abrupt("return",h);case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s,o,u,c,l,p,h,f,d,y,b,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.resources,o=s[r]){t.next=4;break}throw new Error("Resource ".concat(r," is not mapped in resources file"));case 4:return t.next=6,x(n.id,e);case 6:if(u=t.sent,null===(a=o.list)||void 0===a?void 0:a.forceArray){l=T(null===(c=o.list)||void 0===c?void 0:c.forceArray);try{for(l.s();!(p=l.n()).done;)h=p.value,u[h]&&!Array.isArray(u[h])&&(u[h]=[u[h]])}catch(e){l.e(e)}finally{l.f()}}if(!(null===(i=o.list)||void 0===i?void 0:i.dereference)){t.next=35;break}d=T(null===(f=o.list)||void 0===f?void 0:f.dereference),t.prev=10,d.s();case 12:if((y=d.n()).done){t.next=27;break}if(b=y.value,!u[b]||"string"!=typeof u[b]||!u[b].startsWith("http")){t.next=25;break}return t.prev=15,t.next=18,x(u[b],e);case 18:delete(v=t.sent)["@context"],u[b]=v,t.next=25;break;case 23:t.prev=23,t.t0=t.catch(15);case 25:t.next=12;break;case 27:t.next=32;break;case 29:t.prev=29,t.t1=t.catch(10),d.e(t.t1);case 32:return t.prev=32,d.f(),t.finish(32);case 35:return t.abrupt("return",{data:u});case 36:case"end":return t.stop()}}),t,null,[[10,29,32,35],[15,23]])})));return function(e,r){return t.apply(this,arguments)}}()},O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function R(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function L(e,t){return e(t={exports:{}},t.exports),t.exports}var j=L((function(e){var t,r;t=O,r=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var r=e.shift();e[0]=r+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<e.length;n++){var a=e[n];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(n>0&&(a=a.replace(/^[\/]+/,"")),a=n<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var i=t.join("/"),s=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i=s.shift()+(s.length>0?"?":"")+s.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=r():t.urljoin=r()})),$=function(e){return e&&e.rawFile&&e.rawFile instanceof File},U=function(e){var t=Object.keys(e.dataServers).find((function(t){return e.dataServers[t].uploadsContainer}));if(t)return j(e.dataServers[t].baseUrl,e.dataServers[t].uploadsContainer)},G=function(){var e=h(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=U(r)){e.next=3;break}throw new Error("You must define an uploadsContainer in one of the server's configuration");case 3:return e.next=5,r.httpClient(n,{method:"POST",body:t,headers:new Headers({Slug:(i=t.name,o=void 0,u=void 0,o="",u=i.split("."),u.length>1&&(o=u.pop(),i=u.join(".")),s(i,{lang:"fr"})+"."+o),"Content-Type":t.type})});case 5:if(201!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",a.headers.get("Location"));case 8:case"end":return e.stop()}var i,o,u}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){var e=h(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=22;break}if(n=e.t1.value,!t.hasOwnProperty(n)){e.next=20;break}if(!Array.isArray(t[n])){e.next=16;break}a=0;case 6:if(!(a<t[n].length)){e.next=14;break}if(!$(t[n][a])){e.next=11;break}return e.next=10,G(t[n][a].rawFile,r);case 10:t[n][a]=e.sent;case 11:a++,e.next=6;break;case 14:e.next=20;break;case 16:if(!$(t[n])){e.next=20;break}return e.next=19,G(t[n].rawFile,r);case 19:t[n]=e.sent;case 20:e.next=1;break;case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),q=function(e,t,r){var n={},a=[];return Object.keys(r).forEach((function(i){Object.keys(r[i].containers).forEach((function(s){t&&!(Array.isArray(t)?t.includes(s):t===s)||Object.keys(r[i].containers[s]).forEach((function(t){e.includes(t)&&r[i].containers[s][t].map((function(e){var t=j(r[s].baseUrl,e);a.includes(t)||(a.push(t),n[i]||(n[i]=[]),n[i].push(t))}))}))}))})),n},M=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s,o,u,c,l,p,h,f,d,y,v,g,F,m,E,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.dataServers,o=e.resources,u=e.httpClient,c=e.jsonContext,l=o[r],p=new Headers,(null===(a=l.fieldsMapping)||void 0===a?void 0:a.title)&&p.set("Slug",n.data[null===(h=l.fieldsMapping)||void 0===h?void 0:h.title]),!(null===(i=l.create)||void 0===i?void 0:i.container)){t.next=10;break}f=null===(y=l.create)||void 0===y?void 0:y.container,d=C(f,s),t.next=20;break;case 10:if(d=(null===(v=l.create)||void 0===v?void 0:v.server)||Object.keys(e.dataServers).find((function(t){return!0===e.dataServers[t].default}))){t.next=13;break}throw new Error("You must define a server for the creation, or a container, or a default server");case 13:if(g=q(l.types,[d],s),(F=Object.keys(g))&&0!==F.length){t.next=17;break}throw new Error("No container with types ".concat(JSON.stringify(l.types)," found on server ").concat(d));case 17:if(!(F.length>1||g[F[0]].length>1)){t.next=19;break}throw new Error("More than one container detected with types ".concat(JSON.stringify(l.types)," on server ").concat(d));case 19:f=g[F[0]][0];case 20:return t.next=22,B(n.data,e);case 22:return n.data=t.sent,t.next=25,u(f,{method:"POST",headers:p,body:JSON.stringify(b({"@context":c,"@type":l.types},n.data)),noToken:!0!==s[d].authServer});case 25:return m=t.sent,E=m.headers,T=E.get("Location"),t.next=30,I(e)(r,{id:T});case 30:return t.abrupt("return",t.sent);case 31:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dataServers,i=e.httpClient,s=C(n.id,a),t.next=4,i(n.id,{method:"DELETE",noToken:!s||!0!==a[s].authServer});case 4:return t.abrupt("return",{data:{id:n.id}});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},Q=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.httpClient,i=[],s=T(n.ids),t.prev=3,s.s();case 5:if((o=s.n()).done){t.next=17;break}return u=o.value,t.prev=7,t.next=10,a(u,{method:"DELETE"});case 10:i.push(u),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(7);case 15:t.next=5;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(3),s.e(t.t1);case 22:return t.prev=22,s.f(),t.finish(22);case 25:return t.abrupt("return",{data:i});case 26:case"end":return t.stop()}}),t,null,[[3,19,22,25],[7,13]])})));return function(e,r){return t.apply(this,arguments)}}()},H=function(e,t,r){var n=[];if(Object.keys(r[t].containers[t]).forEach((function(a){e.includes(a)&&r[t].containers[t][a].map((function(e){var a=j(r[t].baseUrl,e);n.includes(a)||n.push(a)}))})),0===n.length)throw new Error("No container found matching with types ".concat(JSON.stringify(e),". You can set explicitely the create.container property of the resource."));if(n.length>1)throw new Error("More than one container found matching with types ".concat(JSON.stringify(e),". You must set the create.server or create.container property for the resource."));return n[0]},W=function(e){return function(t){var r,n,a,i,s=e.dataServers,o=e.resources[t];if(!o)throw new Error("Resource ".concat(t," is not mapped in resources file"));if(null===(r=o.create)||void 0===r?void 0:r.container)return null===(a=o.create)||void 0===a?void 0:a.container;if(null===(n=o.create)||void 0===n?void 0:n.server)return H(o.types,null===(i=o.create)||void 0===i?void 0:i.server,s);var u=w("default",s);return H(o.types,u,s)}},z=function(){var e=h(regeneratorRuntime.mark((function e(t,r,n,a){var s,o,u,c,l,p,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.dataServers,o=a.httpClient,u=a.jsonContext,c=Object.keys(t).reduce((function(e,r){return b(b({},e),Object.fromEntries(t[r].map((function(e){return[e,r]}))))}),{}),l=Object.keys(c).map((function(e){return o(e,{noToken:!c[e]||!0!==s[c[e]].authServer}).then((function(e){var t=e.json;return t["@context"]!==u?i.compact(t,u):t})).then((function(t){if(r="ldp:Container",a=(n=t).type||n["@type"],Array.isArray(a)?a.includes(r):a===r)return t["ldp:contains"];throw new Error(e+" is not a LDP container");var r,n,a}))})),e.next=5,Promise.all(l);case 5:if(0!==(p=e.sent).length){e.next=10;break}return e.abrupt("return",{data:[],total:0});case 10:return p=(h=[].concat).apply.apply(h,F(p)),f=p.map((function(e){return e.id=e.id||e["@id"],e})),n.filter&&(n.filter.a&&(n.filter.type=n.filter.a,delete n.filter.a),n.filter.q&&delete n.filter.q,Object.keys(n.filter).length>0&&(f=f.filter((function(e){return Object.entries(n.filter).some((function(t){var r=g(t,2),n=r[0],a=r[1];return Array.isArray(e[n])?e[n].includes(a):e[n]===a}))})))),n.sort&&(f=f.sort((function(e,t){return!e[n.sort.field]||!t[n.sort.field]||("ASC"===n.sort.order?e[n.sort.field].localeCompare(t[n.sort.field]):t[n.sort.field].localeCompare(e[n.sort.field]))}))),n.pagination&&(f=f.slice((n.pagination.page-1)*n.pagination.perPage,n.pagination.page*n.pagination.perPage)),e.abrupt("return",{data:f,total:p.length});case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Y=function(e){var t,r={};if(e){var n,a=T(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;t=i.includes("/")?i.split("/").reverse():[i],r=b(b({},r),t.reduce((function(e,t){return f({},t,b({"@embed":"@last"},e))}),{}))}}catch(e){a.e(e)}finally{a.f()}return r}};class X{constructor(e){this.value=e||"b"+ ++X.nextId}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}X.prototype.termType="BlankNode",X.nextId=0;var Z=X;class J{equals(e){return!!e&&e.termType===this.termType}}J.prototype.termType="DefaultGraph",J.prototype.value="";var K=J;var ee=function(e){if(!e)return null;if("BlankNode"===e.termType)return this.blankNode(e.value);if("DefaultGraph"===e.termType)return this.defaultGraph();if("Literal"===e.termType)return this.literal(e.value,e.language||this.namedNode(e.datatype.value));if("NamedNode"===e.termType)return this.namedNode(e.value);if("Quad"===e.termType){const t=this.fromTerm(e.subject),r=this.fromTerm(e.predicate),n=this.fromTerm(e.object),a=this.fromTerm(e.graph);return this.quad(t,r,n,a)}if("Variable"===e.termType)return this.variable(e.value);throw new Error("unknown termType "+e.termType)};class te{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}te.prototype.termType="NamedNode";var re=te;class ne{constructor(e,t,r){this.value=e,this.datatype=ne.stringDatatype,this.language="",t?(this.language=t,this.datatype=ne.langStringDatatype):r&&(this.datatype=r)}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}ne.prototype.termType="Literal",ne.langStringDatatype=new re("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),ne.stringDatatype=new re("http://www.w3.org/2001/XMLSchema#string");var ae=ne;class ie{constructor(e,t,r,n){this.subject=e,this.predicate=t,this.object=r,this.graph=n||new K}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}ie.prototype.termType="Quad",ie.prototype.value="";var se=ie;class oe{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}oe.prototype.termType="Variable";var ue=oe;const ce={namedNode:function(e){return new re(e)},blankNode:function(e){return new Z(e)},literal:function(e,t){return"string"==typeof t?-1===t.indexOf(":")?new ae(e,t):new ae(e,null,ce.namedNode(t)):new ae(e,null,t)},variable:function(e){return new ue(e)},defaultGraph:function(){return ce.defaultGraphInstance},triple:function(e,t,r){return ce.quad(e,t,r)},quad:function(e,t,r,n){return new se(e,t,r,n||ce.defaultGraphInstance)},fromTerm:function(e){return ee.call(ce,e)},fromQuad:function(e){return ee.call(ce,e)},defaultGraphInstance:new K};var le=ce,pe=function(e){var t=[];if(e){var r,n=T(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.includes("/"))for(var i=a.split("/"),s=1;s<=i.length;s++)t.push(i.slice(0,s).join("/"));else t.push(a)}}catch(e){n.e(e)}finally{n.f()}}return t},he=function(e){return o.createHash("md5").update(e).digest("hex")},fe=function(e){return e.includes("/")&&e.split("/")[0]},de=function(e){return e.includes("/")?e.split("/")[1]:e},ye=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.filter((function(e){return e.parentNode===r})).map((function(r){return"\n      OPTIONAL { \n        ".concat(r.query,"\n        ").concat(r.filter,"\n        ").concat(e(t,r.node),"\n      }\n    ")})).join("\n")},be=function(e){var t=[],r=pe(e);if(r){var n,a=T(r);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=fe(i),o=de(i),u=he(i),c=s?he(s):"1";t.push({node:i,parentNode:s,query:"?s".concat(c," ").concat(o," ?s").concat(u," .\n?s").concat(u," ?p").concat(u," ?o").concat(u," ."),filter:""})}}catch(e){a.e(e)}finally{a.f()}return{construct:t.map((function(e){return e.query})).join("\n"),where:ye(t)}}return{construct:"",where:""}},ve=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.filter((function(e){return e.parentNode===r})).map((function(r){return{type:"optional",patterns:[{type:"bgp",triples:r.query},e(t,r.node)]}}))},ge=function(e,t){var r=[],n=pe(e);if(n&&t&&t.length>0){var a,i=T(n);try{var s=function(){var e=a.value,n=fe(e),i=de(e),s=he(e),o=n?he(n):"1",u=i.split(":")[0],c=i.split(":")[1],l=t.find((function(e){return e.prefix===u})),p=[{subject:le.variable("s"+o),predicate:le.namedNode(l.url+c),object:le.variable("s"+s)},{subject:le.variable("s"+s),predicate:le.variable("p"+s),object:le.variable("o"+s)}];r.push({node:e,parentNode:n,query:p,filter:""})};for(i.s();!(a=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}return{construct:r.length>0?r.reduce((function(e,t){return e.concat(t)})):null,where:ve(r)}}return{construct:"",where:""}},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?ge(e,r):be(e)};class me{constructor(){return Ee||this}equals(e){return e&&this.termType===e.termType}}Object.defineProperty(me.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(me.prototype,"termType",{enumerable:!0,value:"Wildcard"});var Ee=new me,Te={Wildcard:me},ke=L((function(e,t){var r=function(){var e=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},t=[6,12,15,28,41,50,55,107,117,120,122,123,132,133,138,322,323,324,325,326],r=[2,209],n=[107,117,120,122,123,132,133,138,322,323,324,325,326],a=[1,20],i=[1,29],s=[6,90],o=[45,46,58],u=[45,58],c=[1,58],l=[1,60],p=[1,56],h=[1,59],f=[1,65],d=[1,66],y=[26,34,35],b=[13,16,312],v=[119,141,320,327],g=[13,16,119,141,312],F=[1,88],m=[1,92],E=[1,94],T=[119,141,320,321,327],k=[13,16,119,141,312,321],_=[1,100],A=[2,251],D=[1,99],S=[13,16,34,35,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],N=[6,45,46,58,68,75,78,86,88,90],w=[6,13,16,34,45,46,58,68,75,78,86,88,90,312],C=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,330,331,333,334,335,336,337,338,339,340],x=[34,35,45,46,58],I=[13,16,34,35,87,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,340,341,342,343,344,345],O=[2,454],R=[1,123],P=[1,117],L=[1,124],j=[1,125],$=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],U=[2,310],G=[1,142],B=[1,140],q=[6,191],M=[2,327],V=[2,315],Q=[45,135],H=[6,48,78,86,88,90],W=[2,255],z=[1,156],Y=[1,158],X=[6,48,75,78,86,88,90],Z=[2,253],J=[1,164],K=[1,176],ee=[1,174],te=[1,184],re=[1,182],ne=[1,175],ae=[1,180],ie=[1,181],se=[1,185],oe=[1,186],ue=[1,189],ce=[1,190],le=[1,191],pe=[1,192],he=[1,193],fe=[1,194],de=[1,195],ye=[1,196],be=[1,197],ve=[1,198],ge=[1,199],Fe=[6,68,75,78,86,88,90],me=[37,38,191,250,278],Ee=[37,38,191,250,254,278],ke=[37,38,191,250,254,258,273,278,295,306,307,308,309,310,311,334,335,336,337,338,339,340],_e=[26,37,38,191,250,254,258,273,278,295,306,307,308,309,310,311,331,334,335,336,337,338,339,340],Ae=[1,229],De=[1,230],Se=[1,232],Ne=[1,233],we=[1,234],Ce=[1,235],xe=[1,237],Ie=[1,238],Oe=[2,461],Re=[1,240],Pe=[1,241],Le=[1,242],je=[1,248],$e=[1,243],Ue=[1,244],Ge=[1,245],Be=[1,246],qe=[1,247],Me=[13,16,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Ve=[48,93],Qe=[34,38],He=[6,116,191],We=[48,119],ze=[6,48,86,88,90],Ye=[2,339],Xe=[2,331],Ze=[1,293],Je=[1,295],Ke=[48,119,328],et=[13,16,34,195,312],tt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],rt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340],nt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,273,278,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340],at=[13,16,34,35,87,219,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,334,340,341,342,343,344,345],it=[1,329],st=[1,330],ot=[1,332],ut=[1,331],ct=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344,345],lt=[1,340],pt=[1,339],ht=[35,93],ft=[1,353],dt=[1,354],yt=[1,367],bt=[6,48,90],vt=[6,13,16,35,48,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,340,341,342,343,344,345],gt=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,226,231,245,246,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,340,341,342,343,344,345],Ft=[46,48,90,119,167,168,170,173,174],mt=[1,386],Et=[1,387],Tt=[1,393],kt=[1,392],_t=[48,119,191,227,328],At=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Dt=[13,16,34,35,38,48,87,93,119,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],St=[13,16,26,34,35,87,219,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,334,340,341,342,343,344,345],Nt=[13,16,38,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],wt=[35,48],Ct=[2,330],xt=[1,451],It=[1,448],Ot=[1,449],Rt=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,329,331,334,335,336,337,338,339,340,341,342,343,344,345],Pt=[13,16,35,195,219,224,312],Lt=[2,387],jt=[1,469],$t=[46,48,90,119,167,168,170,173,174,328],Ut=[13,16,34,35,195,219,224,312],Gt=[6,13,16,34,35,48,75,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,340,341,342,343,344,345],Bt=[13,16,34,35,38,48,87,93,119,191,195,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],qt=[6,13,16,34,35,48,81,83,86,88,90,275,276,277,279,281,282,284,285,288,290,312,340,341,342,343,344,345],Mt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Vt=[13,16,34,312],Qt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Ht=[2,342],Wt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],zt=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Yt=[2,337],Xt=[13,16,35,195,219,312],Zt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Jt=[13,16,38,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Kt=[46,48,90,119,167,168,170,173,174,191,227,328],er=[13,16,34,38,48,87,100,195,231,235,299,300,301,302,303,304,305,306,307,308,309,310,311,312],tr=[13,16,34,35,48,87,93,119,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],rr=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331],nr=[13,16,26,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331,333,334],ar=[1,630],ir=[1,631],sr=[2,325],or=[13,16,38,195,224,312],ur={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,ObjectListPath:198,ObjectListPath_repetition0:199,GraphNodePath:200,TriplesSameSubjectPath_group0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,PropertyListPathNotEmpty_group0:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmpty_repetition1:207,PropertyListPathNotEmptyTail:208,PropertyListPathNotEmptyTail_group0:209,Path:210,Path_repetition0:211,PathSequence:212,PathSequence_repetition0:213,PathEltOrInverse:214,PathElt:215,PathPrimary:216,PathElt_option0:217,PathEltOrInverse_option0:218,"!":219,PathNegatedPropertySet:220,PathOneInPropertySet:221,PathNegatedPropertySet_repetition0:222,PathNegatedPropertySet_option0:223,"^":224,TriplesNode_repetition_plus0:225,"[":226,"]":227,TriplesNodePath_repetition_plus0:228,GraphNode_group0:229,GraphNodePath_group0:230,"<<":231,VarTriple_group0:232,VarTriple_group1:233,VarTriple_group2:234,">>":235,VarTriple_group3:236,VarTriple_group4:237,ConstTriple_group0:238,ConstTriple_group1:239,ConstTriple_group2:240,ConstTriple_group3:241,ConstTriple_group4:242,VarOrTerm:243,Term:244,BLANK_NODE_LABEL:245,ANON:246,ConditionalAndExpression:247,Expression_repetition0:248,ExpressionTail:249,"||":250,RelationalExpression:251,ConditionalAndExpression_repetition0:252,ConditionalAndExpressionTail:253,"&&":254,AdditiveExpression:255,RelationalExpression_group0:256,RelationalExpression_option0:257,IN:258,MultiplicativeExpression:259,AdditiveExpression_repetition0:260,AdditiveExpressionTail:261,AdditiveExpressionTail_group0:262,NumericLiteralPositive:263,AdditiveExpressionTail_repetition0:264,NumericLiteralNegative:265,AdditiveExpressionTail_repetition1:266,UnaryExpression:267,MultiplicativeExpression_repetition0:268,MultiplicativeExpressionTail:269,MultiplicativeExpressionTail_group0:270,UnaryExpression_option0:271,PrimaryExpression:272,"-":273,Aggregate:274,FUNC_ARITY0:275,FUNC_ARITY1:276,FUNC_ARITY2:277,",":278,IF:279,BuiltInCall_group0:280,BOUND:281,BNODE:282,BuiltInCall_option0:283,EXISTS:284,COUNT:285,Aggregate_option0:286,Aggregate_group0:287,FUNC_AGGREGATE:288,Aggregate_option1:289,GROUP_CONCAT:290,Aggregate_option2:291,Aggregate_option3:292,GroupConcatSeparator:293,SEPARATOR:294,"=":295,String:296,LANGTAG:297,"^^":298,DECIMAL:299,DOUBLE:300,BOOLEAN:301,STRING_LITERAL1:302,STRING_LITERAL2:303,STRING_LITERAL_LONG1:304,STRING_LITERAL_LONG2:305,INTEGER_POSITIVE:306,DECIMAL_POSITIVE:307,DOUBLE_POSITIVE:308,INTEGER_NEGATIVE:309,DECIMAL_NEGATIVE:310,DOUBLE_NEGATIVE:311,PNAME_LN:312,QueryOrUpdate_group0_option0:313,Prologue_repetition0_group0:314,SelectClauseBase_option0_group0:315,DISTINCT:316,REDUCED:317,DescribeQuery_group0_repetition_plus0_group0:318,DescribeQuery_group0_repetition_plus0:319,NAMED:320,SILENT:321,CLEAR:322,DROP:323,ADD:324,MOVE:325,COPY:326,ALL:327,".":328,UNION:329,"|":330,"/":331,PathElt_option0_group0:332,"?":333,"+":334,"!=":335,"<":336,">":337,"<=":338,">=":339,NOT:340,CONCAT:341,COALESCE:342,SUBSTR:343,REGEX:344,REPLACE:345,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",219:"!",224:"^",226:"[",227:"]",231:"<<",235:">>",245:"BLANK_NODE_LABEL",246:"ANON",250:"||",254:"&&",258:"IN",273:"-",275:"FUNC_ARITY0",276:"FUNC_ARITY1",277:"FUNC_ARITY2",278:",",279:"IF",281:"BOUND",282:"BNODE",284:"EXISTS",285:"COUNT",288:"FUNC_AGGREGATE",290:"GROUP_CONCAT",294:"SEPARATOR",295:"=",297:"LANGTAG",298:"^^",299:"DECIMAL",300:"DOUBLE",301:"BOOLEAN",302:"STRING_LITERAL1",303:"STRING_LITERAL2",304:"STRING_LITERAL_LONG1",305:"STRING_LITERAL_LONG2",306:"INTEGER_POSITIVE",307:"DECIMAL_POSITIVE",308:"DOUBLE_POSITIVE",309:"INTEGER_NEGATIVE",310:"DECIMAL_NEGATIVE",311:"DOUBLE_NEGATIVE",312:"PNAME_LN",316:"DISTINCT",317:"REDUCED",320:"NAMED",321:"SILENT",322:"CLEAR",323:"DROP",324:"ADD",325:"MOVE",326:"COPY",327:"ALL",328:".",329:"UNION",330:"|",331:"/",333:"?",334:"+",335:"!=",336:"<",337:">",338:"<=",339:">=",340:"NOT",341:"CONCAT",342:"COALESCE",343:"SUBSTR",344:"REGEX",345:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[198,2],[164,2],[164,2],[202,4],[208,1],[208,3],[210,2],[212,2],[215,2],[214,2],[216,1],[216,1],[216,2],[216,3],[220,1],[220,1],[220,4],[221,1],[221,1],[221,2],[221,2],[185,3],[185,3],[203,3],[203,3],[197,1],[197,1],[200,1],[200,1],[39,9],[39,5],[99,9],[99,5],[243,1],[243,1],[244,1],[244,1],[244,1],[244,1],[244,1],[36,2],[249,2],[247,2],[253,2],[251,1],[251,3],[251,4],[255,2],[261,2],[261,2],[261,2],[259,2],[269,2],[267,2],[267,2],[267,2],[272,1],[272,1],[272,1],[272,1],[272,1],[272,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[274,5],[274,5],[274,6],[293,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[296,1],[296,1],[296,1],[296,1],[263,1],[263,1],[263,1],[265,1],[265,1],[265,1],[60,1],[60,1],[60,1],[313,0],[313,1],[5,1],[5,1],[314,1],[314,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[315,1],[315,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[318,1],[318,1],[319,1],[319,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[199,0],[199,3],[201,1],[201,1],[204,0],[204,1],[205,1],[205,1],[206,0],[206,3],[207,0],[207,2],[209,1],[209,1],[211,0],[211,3],[213,0],[213,3],[332,1],[332,1],[332,1],[217,0],[217,1],[218,0],[218,1],[222,0],[222,3],[223,0],[223,1],[225,1],[225,2],[228,1],[228,2],[229,1],[229,1],[230,1],[230,1],[232,1],[232,1],[233,1],[233,1],[234,1],[234,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[241,1],[241,1],[242,1],[242,1],[248,0],[248,2],[252,0],[252,2],[256,1],[256,1],[256,1],[256,1],[256,1],[256,1],[257,0],[257,1],[260,0],[260,2],[262,1],[262,1],[264,0],[264,2],[266,0],[266,2],[268,0],[268,2],[270,1],[270,1],[271,0],[271,1],[280,1],[280,1],[280,1],[280,1],[280,1],[283,0],[283,1],[286,0],[286,1],[287,1],[287,1],[289,0],[289,1],[291,0],[291,1],[292,0],[292,1]],performAction:function(e,t,r,n,a,i,s){var o,u,c,l,p=i.length-1;switch(a){case 1:if(i[p-1]=i[p-1]||{},tn.base&&(i[p-1].base=tn.base),tn.base="",i[p-1].prefixes=tn.prefixes,tn.prefixes=null,"update"===i[p-1].type){const e={};for(const t of i[p-1].updates)if("insert"===t.updateType){const r={};for(const e of t.insert)if("bgp"===e.type||"graph"===e.type)for(const t of e.triples)"BlankNode"===t.subject.termType&&(r[t.subject.value]=!0),"BlankNode"===t.predicate.termType&&(r[t.predicate.value]=!0),"BlankNode"===t.object.termType&&(r[t.object.value]=!0);for(const t of Object.keys(r)){if(e[t])throw new Error("Detected reuse blank node across different INSERT DATA clauses");e[t]=!0}}}return i[p-1];case 3:this.$=_r(i[p-1],i[p],{type:"query"});break;case 4:tn.base=Dr(i[p]);break;case 5:tn.prefixes||(tn.prefixes={}),i[p-1]=i[p-1].substr(0,i[p-1].length-1),i[p]=Dr(i[p]),tn.prefixes[i[p-1]]=i[p];break;case 6:this.$=_r(i[p-3],Ir(i[p-2]),i[p-1],i[p]);break;case 7:if(!tn.skipValidation){if(zr(i[p-3].variables.map(e=>Hr(e.expression))).some(e=>"count"===e.aggregation&&!(e.expression instanceof cr))||i[p].group)for(const e of i[p-3].variables)if("Variable"===e.termType){if(!i[p].group||!i[p].group.map(e=>Qr(e)).includes(Qr(e)))throw Error("Projection of ungrouped variable (?"+Qr(e)+")")}else if(0===Hr(e.expression).length){const t=Wr(e.expression);for(const e of t)if(!i[p].group||!i[p].group.map||!i[p].group.map(e=>Qr(e)).includes(Qr(e)))throw Error("Use of ungrouped variable in projection of operation (?"+Qr(e)+")")}}const e=i[p-1].where.filter(e=>"query"===e.type);if(e.length>0){const t=i[p-3].variables.filter(e=>e.variable&&e.variable.value).map(e=>e.variable.value),r=zr(e.map(e=>e.variables)).map(e=>e.value||e.variable.value);for(const e of t)if(r.indexOf(e)>=0)throw Error("Target id of 'AS' (?"+e+") already used in subquery")}this.$=_r(i[p-3],Ir(i[p-2]),i[p-1],i[p]);break;case 8:this.$=_r(i[p-1],{variables:[new cr]});break;case 9:const t=function(e){const t=e.slice().sort(),r=[];for(let e=0;e<t.length-1;e++)t[e+1]==t[e]&&r.push(t[e]);return r}(i[p].map(e=>e.value||e.variable.value));if(t.length>0)throw Error("Two or more of the resulting columns have the same name (?"+t[0]+")");this.$=_r(i[p-1],{variables:i[p]});break;case 10:this.$=_r({queryType:"SELECT"},i[p]&&(i[p-1]=Er(i[p]),i[p]={},i[p][i[p-1]]=!0,i[p]));break;case 11:case 12:this.$=_r(i[p-3],i[p-2],i[p-1],i[p],{type:"query"});break;case 13:case 100:case 137:case 165:this.$=Sr(i[p]);break;case 14:case 28:this.$=wr(i[p-3],{variable:Sr(i[p-1])});break;case 15:this.$=Zr(wr(i[p-3],{variable:Sr(i[p-1])}));break;case 16:this.$=_r({queryType:"CONSTRUCT",template:i[p-3]},Ir(i[p-2]),i[p-1],i[p]);break;case 17:this.$=_r({queryType:"CONSTRUCT",template:i[p-2]=i[p-2]?i[p-2].triples:[]},Ir(i[p-5]),{where:[{type:"bgp",triples:kr([],i[p-2])}]},i[p]);break;case 18:this.$=_r({queryType:"DESCRIBE",variables:"*"===i[p-3]?[new cr]:i[p-3].map(Sr)},Ir(i[p-2]),i[p-1],i[p]);break;case 19:this.$=_r({queryType:"ASK"},Ir(i[p-2]),i[p-1],i[p]);break;case 20:case 61:this.$={iri:i[p],named:!!i[p-1]};break;case 21:this.$={where:i[p].patterns};break;case 22:this.$=_r(i[p-1],i[p]);break;case 23:this.$=_r(i[p-2],i[p-1],i[p]);break;case 24:this.$={group:i[p]};break;case 25:case 26:case 32:case 34:this.$=wr(i[p]);break;case 27:this.$=wr(i[p-1]);break;case 29:case 35:this.$=wr(Sr(i[p]));break;case 30:this.$={having:i[p]};break;case 31:this.$={order:i[p]};break;case 33:this.$=wr(i[p],{descending:!0});break;case 36:this.$={limit:Or(i[p])};break;case 37:this.$={offset:Or(i[p])};break;case 38:this.$={limit:Or(i[p-2]),offset:Or(i[p])};break;case 39:this.$={limit:Or(i[p]),offset:Or(i[p-2])};break;case 40:this.$={type:"values",values:i[p]};break;case 41:this.$=i[p-1].map((function(e){var t={};return t[i[p-3]]=e,t}));break;case 42:this.$=i[p-1].map((function(){return{}}));break;case 43:var h=i[p-4].length;i[p-4]=i[p-4].map(Sr),this.$=i[p-1].map((function(e){if(e.length!==h)throw Error("Inconsistent VALUES length");for(var t={},r=0;r<h;r++)t["?"+i[p-4][r].value]=e[r];return t}));break;case 46:this.$=Zr(i[p]);break;case 47:this.$=void 0;break;case 48:case 92:case 117:case 166:this.$=i[p-1];break;case 49:this.$={type:"update",updates:Tr(i[p-2],i[p-1])};break;case 50:this.$=_r({type:"load",silent:!!i[p-2],source:i[p-1]},i[p]&&{destination:i[p]});break;case 51:this.$={type:Er(i[p-2]),silent:!!i[p-1],graph:i[p]};break;case 52:this.$={type:Er(i[p-4]),silent:!!i[p-3],source:i[p-2],destination:i[p]};break;case 53:this.$={type:"create",silent:!!i[p-2],graph:{type:"graph",name:i[p]}};break;case 54:this.$={updateType:"insert",insert:Jr(i[p])};break;case 55:this.$={updateType:"delete",delete:Kr(Jr(i[p]))};break;case 56:this.$={updateType:"deletewhere",delete:Kr(i[p])};break;case 57:this.$=_r({updateType:"insertdelete"},i[p-5],{insert:i[p-4]||[]},{delete:i[p-3]||[]},Ir(i[p-2],"using"),{where:i[p].patterns});break;case 58:this.$=_r({updateType:"insertdelete"},i[p-5],{delete:i[p-4]||[]},{insert:i[p-3]||[]},Ir(i[p-2],"using"),{where:i[p].patterns});break;case 59:this.$=Kr(i[p]);break;case 60:case 63:case 157:case 180:this.$=i[p];break;case 62:this.$={graph:i[p]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:i[p]};break;case 67:this.$={},this.$[Er(i[p])]=!0;break;case 68:this.$=i[p-2]?Ar(i[p-1],[i[p-2]]):Ar(i[p-1]);break;case 69:var f=_r(i[p-3]||{triples:[]},{type:"graph",name:Sr(i[p-5])});this.$=i[p]?[f,i[p]]:[f];break;case 70:case 75:this.$={type:"bgp",triples:Ar(i[p-2],[i[p-1]])};break;case 71:this.$={type:"group",patterns:[i[p-1]]};break;case 72:for(const e of i[p-1].filter(e=>"bind"===e.type)){const t=i[p-1].indexOf(e),r=new Set;for(const e of i[p-1].slice(0,t))"group"!==e.type&&"bgp"!==e.type||Xr(e).forEach(e=>r.add(e));if(r.has(e.variable.value))throw Error("Variable used to bind is already bound (?"+e.variable.value+")")}this.$={type:"group",patterns:i[p-1]};break;case 73:this.$=i[p-1]?Ar([i[p-1]],i[p]):Ar(i[p]);break;case 74:this.$=i[p]?[i[p-2],i[p]]:i[p-2];break;case 76:i[p-1].length?this.$={type:"union",patterns:Ar(i[p-1].map(Rr),[Rr(i[p])])}:this.$=i[p];break;case 77:this.$=_r(i[p],{type:"optional"});break;case 78:this.$=_r(i[p],{type:"minus"});break;case 79:this.$=_r(i[p],{type:"graph",name:Sr(i[p-1])});break;case 80:this.$=_r(i[p],{type:"service",name:Sr(i[p-1]),silent:!!i[p-2]});break;case 81:this.$={type:"filter",expression:i[p]};break;case 82:this.$={type:"bind",variable:Sr(i[p-1]),expression:i[p-3]};break;case 83:this.$=Zr({type:"bind",variable:Sr(i[p-1]),expression:i[p-3]});break;case 88:this.$={type:"functionCall",function:i[p-1],args:[]};break;case 89:this.$={type:"functionCall",function:i[p-5],args:Tr(i[p-2],i[p-1]),distinct:!!i[p-3]};break;case 90:case 108:case 119:case 209:case 217:case 219:case 231:case 233:case 243:case 247:case 267:case 269:case 273:case 277:case 300:case 306:case 317:case 327:case 333:case 339:case 343:case 353:case 355:case 359:case 367:case 371:case 373:case 381:case 383:case 387:case 389:case 398:case 430:case 432:case 442:case 446:case 448:case 450:this.$=[];break;case 91:this.$=Tr(i[p-2],i[p-1]);break;case 93:this.$=Ar(i[p-2],[i[p-1]]);break;case 94:case 105:this.$=i[p].map((function(e){return _r(Lr(i[p-1]),e)}));break;case 95:this.$=kr(i[p].map((function(e){return _r(Lr(i[p-1].entity),e)})),i[p-1].triples);break;case 97:this.$=Ar([i[p-1]],i[p]);break;case 98:this.$=Ar(i[p]);break;case 99:this.$=Vr(i[p-1],i[p]);break;case 102:case 115:case 122:this.$=tn.factory.namedNode(pr);break;case 103:case 104:this.$=Tr(i[p-1],i[p]);break;case 106:this.$=i[p]?kr(i[p].map((function(e){return _r(Lr(i[p-1].entity),e)})),i[p-1].triples):i[p-1].triples;break;case 107:this.$=Vr(Sr(i[p-3]),Tr(i[p-2],i[p-1]),i[p]);break;case 109:this.$=Vr(Sr(i[p-1]),i[p]);break;case 110:this.$=i[p-1].length?Cr("|",Tr(i[p-1],i[p])):i[p];break;case 111:this.$=i[p-1].length?Cr("/",Tr(i[p-1],i[p])):i[p];break;case 112:this.$=i[p]?Cr(i[p],[i[p-1]]):i[p-1];break;case 113:this.$=i[p-1]?Cr(i[p-1],[i[p]]):i[p];break;case 116:case 123:this.$=Cr(i[p-1],[i[p]]);break;case 120:this.$=Cr("|",Tr(i[p-2],i[p-1]));break;case 124:this.$=Cr(i[p-1],[tn.factory.namedNode(pr)]);break;case 125:case 127:this.$=function(e){var t=jr(),r=t,n=[],a=[];e.forEach((function(e){n.push(e.entity),kr(a,e.triples)}));for(var i=0,s=0,o=n.length,u=Array(2*o);i<o;)u[s++]=Lr(r,tn.factory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),n[i]),u[s++]=Lr(r,tn.factory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),r=++i<o?jr():tn.factory.namedNode(hr));return{entity:t,triples:kr(u,a)}}(i[p-1]);break;case 126:case 128:this.$=(c=i[p-1],{entity:l=jr(),triples:c.map((function(e){return _r(Lr(l),e)}))});break;case 129:case 131:this.$={entity:i[p],triples:[]};break;case 133:case 135:this.$=Zr(tn.factory.quad(i[p-4],i[p-3],i[p-2],Sr(i[p-6])));break;case 134:case 136:this.$=Zr(tn.factory.quad(i[p-3],i[p-2],i[p-1]));break;case 141:this.$=jr(i[p].replace(/^(_:)/,""));break;case 142:this.$=jr();break;case 143:this.$=tn.factory.namedNode(hr);break;case 144:case 146:case 151:case 155:this.$=xr(i[p-1],i[p]);break;case 145:this.$=["||",i[p]];break;case 147:this.$=["&&",i[p]];break;case 149:this.$=Nr(i[p-1],[i[p-2],i[p]]);break;case 150:this.$=Nr(i[p-2]?"notin":"in",[i[p-3],i[p]]);break;case 152:case 156:this.$=[i[p-1],i[p]];break;case 153:this.$=["+",xr(i[p-1],i[p])];break;case 154:var d=Pr(i[p-1].value.replace("-",""),i[p-1].datatype);this.$=["-",xr(d,i[p])];break;case 158:this.$=Nr(i[p-1],[i[p]]);break;case 159:this.$=Nr("UMINUS",[i[p]]);break;case 168:this.$=Nr(Er(i[p-1]));break;case 169:this.$=Nr(Er(i[p-3]),[i[p-1]]);break;case 170:this.$=Nr(Er(i[p-5]),[i[p-3],i[p-1]]);break;case 171:this.$=Nr(Er(i[p-7]),[i[p-5],i[p-3],i[p-1]]);break;case 172:this.$=Nr(Er(i[p-1]),i[p]);break;case 173:this.$=Nr("bound",[Sr(i[p-1])]);break;case 174:this.$=Nr(i[p-1],[]);break;case 175:this.$=Nr(i[p-3],[i[p-1]]);break;case 176:this.$=Nr(i[p-2]?"notexists":"exists",[Rr(i[p])]);break;case 177:case 178:this.$=wr(i[p-1],{type:"aggregate",aggregation:Er(i[p-4]),distinct:!!i[p-2]});break;case 179:this.$=wr(i[p-2],{type:"aggregate",aggregation:Er(i[p-5]),distinct:!!i[p-3],separator:i[p-1]||" "});break;case 181:this.$=Pr(i[p]);break;case 182:this.$=(o=i[p-1],u=Er(i[p].substr(1)),tn.factory.literal(o,u));break;case 183:this.$=Pr(i[p-2],i[p]);break;case 184:case 197:this.$=Pr(i[p],dr);break;case 185:case 198:this.$=Pr(i[p],yr);break;case 186:case 199:this.$=Pr(Er(i[p]),br);break;case 189:this.$=Pr(i[p].toLowerCase(),vr);break;case 190:case 191:this.$=Mr(i[p],1);break;case 192:case 193:this.$=Mr(i[p],3);break;case 194:this.$=Pr(i[p].substr(1),dr);break;case 195:this.$=Pr(i[p].substr(1),yr);break;case 196:this.$=Pr(i[p].substr(1).toLowerCase(),br);break;case 200:this.$=tn.factory.namedNode(Dr(i[p]));break;case 201:var y=i[p].indexOf(":"),b=i[p].substr(0,y),v=tn.prefixes[b];if(!v)throw new Error("Unknown prefix: "+b);var g=Dr(v+i[p].substr(y+1));this.$=tn.factory.namedNode(g);break;case 202:if(i[p]=i[p].substr(0,i[p].length-1),!(i[p]in tn.prefixes))throw new Error("Unknown prefix: "+i[p]);g=Dr(tn.prefixes[i[p]]);this.$=tn.factory.namedNode(g);break;case 210:case 218:case 220:case 222:case 232:case 234:case 240:case 244:case 248:case 262:case 264:case 266:case 268:case 270:case 272:case 274:case 276:case 301:case 307:case 318:case 334:case 368:case 384:case 403:case 405:case 431:case 433:case 443:case 447:case 449:case 451:i[p-1].push(i[p]);break;case 221:case 239:case 261:case 263:case 265:case 271:case 275:case 402:case 404:this.$=[i[p]];break;case 278:i[p-3].push(i[p-2]);break;case 328:case 340:case 344:case 354:case 356:case 360:case 372:case 374:case 382:case 388:case 390:case 399:i[p-2].push(i[p-1])}},table:[e(t,r,{3:1,4:2,7:3}),{1:[3]},e(n,[2,277],{5:4,8:5,313:6,9:7,103:8,17:9,40:10,49:11,54:12,104:13,18:14,22:15,25:19,6:[2,203],28:a,41:[1,16],50:[1,17],55:[1,18]}),e([6,28,41,50,55,107,117,120,122,123,132,133,138,322,323,324,325,326],[2,2],{314:21,11:22,14:23,12:[1,24],15:[1,25]}),{6:[1,26]},{6:[2,205]},{6:[2,206]},{6:[2,215],10:27,89:28,90:i},{6:[2,204]},e(s,[2,211]),e(s,[2,212]),e(s,[2,213]),e(s,[2,214]),{105:30,107:[1,31],110:32,113:33,117:[1,34],120:[1,35],122:[1,36],123:[1,37],124:38,128:39,132:[2,302],133:[2,296],137:45,138:[1,46],322:[1,40],323:[1,41],324:[1,42],325:[1,43],326:[1,44]},e(o,[2,217],{19:47}),e(o,[2,219],{23:48}),e(u,[2,233],{42:49,44:50,46:[1,51]}),{13:c,16:l,26:[1,54],34:p,51:52,60:57,312:h,318:55,319:53},e(o,[2,247],{56:61}),{26:[1,62],27:63,33:64,34:f,35:d},e(y,[2,225],{29:67,315:68,316:[1,69],317:[1,70]}),e(t,[2,210]),e(t,[2,207]),e(t,[2,208]),{13:[1,71]},{16:[1,72]},{1:[2,1]},{6:[2,3]},{6:[2,216]},{34:[1,74],35:[1,76],91:73,93:[1,75]},{6:[2,279],106:77,191:[1,78]},e(b,[2,281],{108:79,321:[1,80]}),e(v,[2,287],{111:81,321:[1,82]}),e(g,[2,292],{114:83,321:[1,84]}),{118:85,119:[2,294],321:[1,86]},{46:F,121:87},{46:F,121:89},{46:F,121:90},{125:91,133:m},{129:93,132:E},e(T,[2,285]),e(T,[2,286]),e(k,[2,289]),e(k,[2,290]),e(k,[2,291]),{132:[2,303],133:[2,297]},{13:c,16:l,60:95,312:h},{20:96,45:_,46:A,57:97,58:D,61:98},{20:101,45:_,46:A,57:102,58:D,61:98},e(o,[2,231],{43:103}),{45:[1,104],57:105,58:D},e(S,[2,359],{179:106,180:107,181:108,48:[2,357]}),e(N,[2,243],{52:109}),e(N,[2,241],{60:57,318:110,13:c,16:l,34:p,312:h}),e(N,[2,242]),e(w,[2,239]),e(w,[2,237]),e(w,[2,238]),e(C,[2,200]),e(C,[2,201]),e(C,[2,202]),{20:111,45:_,46:A,57:112,58:D,61:98},e(o,[2,8]),e(o,[2,9],{33:113,34:f,35:d}),e(x,[2,221]),e(x,[2,13]),e(I,O,{36:114,39:115,247:116,251:118,255:119,259:120,267:121,271:122,219:R,231:P,273:L,334:j}),e(y,[2,10]),e(y,[2,226]),e(y,[2,223]),e(y,[2,224]),e(t,[2,4]),{13:[1,126]},e($,[2,40]),{46:[1,127]},{46:[1,128]},{34:[1,130],95:129},{6:[2,49]},e(t,r,{7:3,4:131}),{13:c,16:l,60:132,312:h},e(b,[2,282]),{112:133,119:[1,134],141:[1,136],143:135,320:[1,137],327:[1,138]},e(v,[2,288]),e(b,U,{115:139,142:141,119:G,141:B}),e(g,[2,293]),{119:[1,143]},{119:[2,295]},e(q,[2,54]),e(S,M,{144:144,151:145,152:146,48:V,119:V}),e(q,[2,55]),e(q,[2,56]),e(Q,[2,298],{126:147,129:148,132:E}),{46:F,121:149},e(Q,[2,304],{130:150,125:151,133:m}),{46:F,121:152},e([132,133],[2,62]),e(H,W,{21:153,64:154,74:155,75:z}),e(o,[2,218]),{46:Y,62:157},e(b,[2,249],{59:159,320:[1,160]}),{46:[2,252]},e(X,Z,{24:161,63:162,67:163,68:J}),e(o,[2,220]),{20:165,45:_,46:A,57:166,58:D,61:98},{46:[1,167]},e(u,[2,234]),{48:[1,168]},{48:[2,358]},{13:c,16:l,34:K,35:ee,39:173,60:178,87:te,93:re,98:179,153:169,183:170,185:171,226:ne,231:P,243:172,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Fe,[2,245],{61:98,53:200,57:201,20:202,45:_,46:A,58:D}),e(w,[2,240]),e(X,Z,{63:162,67:163,24:203,68:J}),e(o,[2,248]),e(x,[2,222]),{37:[1,204]},{37:[1,205]},e(me,[2,430],{248:206}),{13:c,16:l,34:K,39:209,60:178,87:te,93:re,98:179,119:[1,207],231:P,236:208,243:210,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Ee,[2,432],{252:211}),e(Ee,[2,148],{256:212,257:213,258:[2,440],295:[1,214],335:[1,215],336:[1,216],337:[1,217],338:[1,218],339:[1,219],340:[1,220]}),e(ke,[2,442],{260:221}),e(_e,[2,450],{268:222}),{13:c,16:l,34:Ae,35:De,60:226,72:225,73:227,82:224,87:te,98:228,263:187,265:188,272:223,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},{13:c,16:l,34:Ae,35:De,60:226,72:225,73:227,82:224,87:te,98:228,263:187,265:188,272:249,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},{13:c,16:l,34:Ae,35:De,60:226,72:225,73:227,82:224,87:te,98:228,263:187,265:188,272:250,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},e(I,[2,455]),e(t,[2,5]),e(Me,[2,267],{92:251}),e(Ve,[2,269],{94:252}),{34:[1,254],38:[1,253]},e(Qe,[2,271]),e(n,[2,278],{6:[2,280]}),e(q,[2,283],{109:255,139:256,140:[1,257]}),e(q,[2,51]),{13:c,16:l,60:258,312:h},e(q,[2,67]),e(q,[2,312]),e(q,[2,313]),e(q,[2,314]),{116:[1,259]},e(He,[2,64]),{13:c,16:l,60:260,312:h},e(b,[2,311]),{13:c,16:l,60:261,312:h},e(We,[2,317],{145:262}),e(We,[2,316]),{13:c,16:l,34:K,35:ee,39:173,60:178,87:te,93:re,98:179,153:263,183:170,185:171,226:ne,231:P,243:172,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Q,[2,300],{127:264}),e(Q,[2,299]),e([45,132,135],[2,60]),e(Q,[2,306],{131:265}),e(Q,[2,305]),e([45,133,135],[2,59]),e(s,[2,6]),e(ze,[2,257],{65:266,77:267,78:[1,268]}),e(H,[2,256]),{13:c,16:l,35:De,60:274,72:272,73:273,76:269,82:271,84:270,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},e([6,48,68,75,78,86,88,90],[2,21]),e(S,Ye,{25:19,30:275,155:276,18:277,22:278,156:279,162:280,163:281,28:a,46:Xe,48:Xe,90:Xe,119:Xe,167:Xe,168:Xe,170:Xe,173:Xe,174:Xe}),{13:c,16:l,60:282,312:h},e(b,[2,250]),e(s,[2,7]),e(H,W,{64:154,74:155,21:283,75:z}),e(X,[2,254]),{69:[1,284]},e(X,Z,{63:162,67:163,24:285,68:J}),e(o,[2,232]),e(S,M,{152:146,47:286,151:287,48:[2,235]}),e(o,[2,92]),{48:[2,361],182:288,328:[1,289]},{13:c,16:l,34:Ze,60:294,184:290,188:291,193:292,195:Je,312:h},e(Ke,[2,365],{188:291,193:292,60:294,186:296,187:297,184:298,13:c,16:l,34:Ze,195:Je,312:h}),e(et,[2,363]),e(et,[2,364]),{13:c,16:l,34:K,35:ee,39:304,60:178,87:te,93:re,98:179,185:302,197:300,225:299,226:ne,229:301,231:P,243:303,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{13:c,16:l,34:Ze,60:294,184:305,188:291,193:292,195:Je,312:h},e(tt,[2,137]),e(tt,[2,138]),e(tt,[2,139]),e(tt,[2,140]),e(tt,[2,141]),e(tt,[2,142]),e(tt,[2,143]),e(rt,[2,181],{297:[1,306],298:[1,307]}),e(rt,[2,184]),e(rt,[2,185]),e(rt,[2,186]),e(rt,[2,187]),e(rt,[2,188]),e(rt,[2,189]),e(nt,[2,190]),e(nt,[2,191]),e(nt,[2,192]),e(nt,[2,193]),e(rt,[2,194]),e(rt,[2,195]),e(rt,[2,196]),e(rt,[2,197]),e(rt,[2,198]),e(rt,[2,199]),e(X,Z,{63:162,67:163,24:308,68:J}),e(N,[2,244]),e(Fe,[2,246]),e(s,[2,19]),{34:[1,309]},{34:[1,310]},e([37,38,191,278],[2,144],{249:311,250:[1,312]}),{13:c,16:l,34:[1,314],60:315,232:313,312:h},{13:c,16:l,34:Ze,60:294,193:316,195:Je,312:h},e(et,[2,416]),e(et,[2,417]),e(me,[2,146],{253:317,254:[1,318]}),e(I,O,{259:120,267:121,271:122,255:319,219:R,273:L,334:j}),{258:[1,320]},e(at,[2,434]),e(at,[2,435]),e(at,[2,436]),e(at,[2,437]),e(at,[2,438]),e(at,[2,439]),{258:[2,441]},e([37,38,191,250,254,258,278,295,335,336,337,338,339,340],[2,151],{261:321,262:322,263:323,265:324,273:[1,326],306:fe,307:de,308:ye,309:be,310:ve,311:ge,334:[1,325]}),e(ke,[2,155],{269:327,270:328,26:it,331:st}),e(_e,[2,157]),e(_e,[2,160]),e(_e,[2,161]),e(_e,[2,162],{35:ot,93:ut}),e(_e,[2,163]),e(_e,[2,164]),e(_e,[2,165]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:333,219:R,273:L,334:j}),e(ct,[2,167]),{93:[1,334]},{35:[1,335]},{35:[1,336]},{35:[1,337]},{35:lt,93:pt,177:338},{35:[1,341]},{35:[1,343],93:[1,342]},{284:[1,344]},{35:[1,345]},{35:[1,346]},{35:[1,347]},e(ht,[2,456]),e(ht,[2,457]),e(ht,[2,458]),e(ht,[2,459]),e(ht,[2,460]),{284:[2,462]},e(_e,[2,158]),e(_e,[2,159]),{13:c,16:l,48:[1,348],60:350,87:te,97:349,98:351,99:352,100:ft,231:dt,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{48:[1,355],93:[1,356]},{46:[1,357]},e(Qe,[2,272]),e(q,[2,50]),e(q,[2,284]),{119:[1,358]},e(q,[2,66]),e(b,U,{142:141,115:359,119:G,141:B}),e(He,[2,65]),e(q,[2,53]),{48:[1,360],119:[1,362],146:361},e(We,[2,329],{154:363,328:[1,364]}),{45:[1,365],134:366,135:yt},{45:[1,368],134:369,135:yt},e(bt,[2,259],{66:370,85:371,86:[1,372],88:[1,373]}),e(ze,[2,258]),{69:[1,374]},e(H,[2,30],{274:231,280:236,283:239,82:271,72:272,73:273,60:274,84:375,13:c,16:l,35:De,275:Se,276:Ne,277:we,279:Ce,281:xe,282:Ie,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe}),e(vt,[2,263]),e(gt,[2,85]),e(gt,[2,86]),e(gt,[2,87]),{35:ot,93:ut},{48:[1,376]},{48:[1,377]},{20:378,45:_,46:A,61:98},{20:379,45:_,46:A,61:98},e(Ft,[2,333],{157:380}),e(Ft,[2,332]),{13:c,16:l,34:K,35:mt,39:385,60:178,87:te,93:re,98:179,164:381,201:382,203:383,226:Et,231:P,243:384,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(N,[2,20]),e(bt,[2,22]),{13:c,16:l,34:Tt,35:kt,60:274,70:388,71:389,72:390,73:391,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},e(s,[2,16]),{48:[1,394]},{48:[2,236]},{48:[2,93]},e(S,[2,360],{48:[2,362]}),e(Ke,[2,94]),e(_t,[2,367],{189:395}),e(S,[2,371],{194:396,196:397}),e(S,[2,100]),e(S,[2,101]),e(S,[2,102]),e(Ke,[2,95]),e(Ke,[2,96]),e(Ke,[2,366]),{13:c,16:l,34:K,35:ee,38:[1,398],39:304,60:178,87:te,93:re,98:179,185:302,197:399,226:ne,229:301,231:P,243:303,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(At,[2,402]),e(Dt,[2,129]),e(Dt,[2,130]),e(Dt,[2,406]),e(Dt,[2,407]),{227:[1,400]},e(rt,[2,182]),{13:c,16:l,60:401,312:h},e(s,[2,18]),{38:[1,402]},{38:[1,403]},e(me,[2,431]),e(I,O,{251:118,255:119,259:120,267:121,271:122,247:404,219:R,273:L,334:j}),{46:[1,405]},{46:[2,410]},{46:[2,411]},{13:c,16:l,34:K,39:407,60:178,87:te,93:re,98:179,231:P,237:406,243:408,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Ee,[2,433]),e(I,O,{255:119,259:120,267:121,271:122,251:409,219:R,273:L,334:j}),e(Ee,[2,149]),{35:lt,93:pt,177:410},e(ke,[2,443]),e(I,O,{267:121,271:122,259:411,219:R,273:L,334:j}),e(_e,[2,446],{264:412}),e(_e,[2,448],{266:413}),e(at,[2,444]),e(at,[2,445]),e(_e,[2,451]),e(I,O,{271:122,267:414,219:R,273:L,334:j}),e(at,[2,452]),e(at,[2,453]),e(ct,[2,88]),e(at,[2,351],{175:415,316:[1,416]}),{38:[1,417]},e(ct,[2,168]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:418,219:R,273:L,334:j}),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:419,219:R,273:L,334:j}),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:420,219:R,273:L,334:j}),e(ct,[2,172]),e(ct,[2,90]),e(at,[2,355],{178:421}),{34:[1,422]},e(ct,[2,174]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:423,219:R,273:L,334:j}),{46:Y,62:424},e(St,[2,463],{286:425,316:[1,426]}),e(at,[2,467],{289:427,316:[1,428]}),e(at,[2,469],{291:429,316:[1,430]}),e($,[2,41]),e(Me,[2,268]),e(Nt,[2,44]),e(Nt,[2,45]),e(Nt,[2,46]),e(Nt,[2,47]),{13:c,16:l,60:178,87:te,93:re,98:179,99:433,119:[1,431],231:dt,241:432,244:434,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e($,[2,42]),e(Ve,[2,270]),e(wt,[2,273],{96:435}),{13:c,16:l,60:436,312:h},e(q,[2,52]),e([6,45,132,133,135,191],[2,68]),e(We,[2,318]),{13:c,16:l,34:[1,438],60:439,147:437,312:h},e(We,[2,70]),e(S,[2,328],{48:Ct,119:Ct}),{46:Y,62:440},e(Q,[2,301]),e(b,[2,308],{136:441,320:[1,442]}),{46:Y,62:443},e(Q,[2,307]),e(bt,[2,23]),e(bt,[2,260]),{87:[1,444]},{87:[1,445]},{13:c,16:l,34:xt,35:De,60:274,72:272,73:273,79:446,80:447,81:It,82:271,83:Ot,84:450,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},e(vt,[2,264]),e(Rt,[2,71]),e(Rt,[2,72]),e(H,W,{64:154,74:155,21:452,75:z}),e(X,Z,{63:162,67:163,24:453,68:J}),{46:[2,343],48:[2,73],89:463,90:i,119:[1,459],158:454,159:455,166:456,167:[1,457],168:[1,458],170:[1,460],173:[1,461],174:[1,462]},e(Ft,[2,341],{165:464,328:[1,465]}),e(Pt,Lt,{202:466,205:467,210:468,211:470,34:jt}),e($t,[2,377],{205:467,210:468,211:470,204:471,202:472,13:Lt,16:Lt,35:Lt,195:Lt,219:Lt,224:Lt,312:Lt,34:jt}),e(Ut,[2,375]),e(Ut,[2,376]),{13:c,16:l,34:K,35:mt,39:478,60:178,87:te,93:re,98:179,200:474,203:476,226:Et,228:473,230:475,231:P,243:477,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Pt,Lt,{205:467,210:468,211:470,202:479,34:jt}),e(X,[2,24],{274:231,280:236,283:239,60:274,72:390,73:391,71:480,13:c,16:l,34:Tt,35:kt,275:Se,276:Ne,277:we,279:Ce,281:xe,282:Ie,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe}),e(Gt,[2,261]),e(Gt,[2,25]),e(Gt,[2,26]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:481,219:R,273:L,334:j}),e(Gt,[2,29]),e(X,Z,{63:162,67:163,24:482,68:J}),e([48,119,227,328],[2,97],{190:483,191:[1,484]}),e(_t,[2,99]),{13:c,16:l,34:K,35:ee,39:304,60:178,87:te,93:re,98:179,185:302,197:485,226:ne,229:301,231:P,243:303,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Bt,[2,125]),e(At,[2,403]),e(Bt,[2,126]),e(rt,[2,183]),e(x,[2,14]),e(x,[2,15]),e(me,[2,145]),{13:c,16:l,34:K,39:487,60:178,87:te,93:re,98:179,231:P,233:486,243:488,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{235:[1,489]},{235:[2,418]},{235:[2,419]},e(Ee,[2,147]),e(Ee,[2,150]),e(ke,[2,152]),e(ke,[2,153],{270:328,269:490,26:it,331:st}),e(ke,[2,154],{270:328,269:491,26:it,331:st}),e(_e,[2,156]),e(at,[2,353],{176:492}),e(at,[2,352]),e([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344,345],[2,166]),{38:[1,493]},{278:[1,494]},{278:[1,495]},e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:496,219:R,273:L,334:j}),{38:[1,497]},{38:[1,498]},e(ct,[2,176]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,287:499,36:501,26:[1,500],219:R,273:L,334:j}),e(St,[2,464]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:502,219:R,273:L,334:j}),e(at,[2,468]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:503,219:R,273:L,334:j}),e(at,[2,470]),{13:c,16:l,34:[1,505],60:506,238:504,312:h},{13:c,16:l,34:Ze,60:294,193:507,195:Je,312:h},e(et,[2,426]),e(et,[2,427]),{35:[1,510],48:[1,508],101:509},e(q,[2,63]),{46:[1,511]},{46:[2,319]},{46:[2,320]},e(q,[2,57]),{13:c,16:l,60:512,312:h},e(b,[2,309]),e(q,[2,58]),e(bt,[2,36],{88:[1,513]}),e(bt,[2,37],{86:[1,514]}),e(ze,[2,31],{274:231,280:236,283:239,82:271,72:272,73:273,60:274,84:450,80:515,13:c,16:l,34:xt,35:De,81:It,83:Ot,275:Se,276:Ne,277:we,279:Ce,281:xe,282:Ie,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe}),e(qt,[2,265]),{35:De,82:516},{35:De,82:517},e(qt,[2,34]),e(qt,[2,35]),{31:518,48:[2,227],89:519,90:i},{32:520,48:[2,229],89:521,90:i},e(Ft,[2,334]),e(Mt,[2,335],{160:522,328:[1,523]}),{46:Y,62:524},{46:Y,62:525},{46:Y,62:526},{13:c,16:l,34:[1,528],60:529,169:527,312:h},e(Vt,[2,347],{171:530,321:[1,531]}),{13:c,16:l,35:De,60:274,72:272,73:273,82:271,84:532,274:231,275:Se,276:Ne,277:we,279:Ce,280:236,281:xe,282:Ie,283:239,284:Oe,285:Re,288:Pe,290:Le,312:h,340:je,341:$e,342:Ue,343:Ge,344:Be,345:qe},{35:[1,533]},e(Qt,[2,84]),e(Ft,[2,75]),e(S,[2,340],{46:Ht,48:Ht,90:Ht,119:Ht,167:Ht,168:Ht,170:Ht,173:Ht,174:Ht}),e($t,[2,105]),e(S,[2,381],{206:534}),e(S,[2,379]),e(S,[2,380]),e(Pt,[2,389],{212:535,213:536}),e($t,[2,106]),e($t,[2,378]),{13:c,16:l,34:K,35:mt,38:[1,537],39:478,60:178,87:te,93:re,98:179,200:538,203:476,226:Et,230:475,231:P,243:477,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(At,[2,404]),e(Wt,[2,131]),e(Wt,[2,132]),e(Wt,[2,408]),e(Wt,[2,409]),{227:[1,539]},e(Gt,[2,262]),{37:[1,541],38:[1,540]},e(s,[2,17]),e(_t,[2,368]),e(_t,[2,369],{193:292,60:294,192:542,188:543,13:c,16:l,34:Ze,195:Je,312:h}),e(_t,[2,103],{278:[1,544]}),{13:c,16:l,34:Ze,60:294,193:545,195:Je,312:h},e(et,[2,412]),e(et,[2,413]),e(zt,[2,134]),e(_e,[2,447]),e(_e,[2,449]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:546,219:R,273:L,334:j}),e(ct,[2,169]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:547,219:R,273:L,334:j}),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:548,219:R,273:L,334:j}),{38:[1,549],278:[1,550]},e(ct,[2,173]),e(ct,[2,175]),{38:[1,551]},{38:[2,465]},{38:[2,466]},{38:[1,552]},{38:[2,471],191:[1,555],292:553,293:554},{46:[1,556]},{46:[2,420]},{46:[2,421]},{13:c,16:l,60:178,87:te,93:re,98:179,99:558,231:dt,242:557,244:559,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e($,[2,43]),e(wt,[2,274]),{13:c,16:l,60:350,87:te,97:561,98:351,99:352,100:ft,102:560,231:dt,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(S,M,{152:146,148:562,151:563,48:[2,321]}),e(Q,[2,61]),{87:[1,564]},{87:[1,565]},e(qt,[2,266]),e(qt,[2,32]),e(qt,[2,33]),{48:[2,11]},{48:[2,228]},{48:[2,12]},{48:[2,230]},e(S,Ye,{163:281,161:566,162:567,46:Yt,48:Yt,90:Yt,119:Yt,167:Yt,168:Yt,170:Yt,173:Yt,174:Yt}),e(Mt,[2,336]),e(Qt,[2,76],{329:[1,568]}),e(Qt,[2,77]),e(Qt,[2,78]),{46:Y,62:569},{46:[2,345]},{46:[2,346]},{13:c,16:l,34:[1,571],60:572,172:570,312:h},e(Vt,[2,348]),e(Qt,[2,81]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:573,39:574,219:R,231:P,273:L,334:j}),{13:c,16:l,34:K,35:mt,39:478,60:178,87:te,93:re,98:179,200:575,203:476,226:Et,230:475,231:P,243:477,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(At,[2,110],{330:[1,576]}),e(Xt,[2,396],{214:577,218:578,224:[1,579]}),e(Zt,[2,127]),e(At,[2,405]),e(Zt,[2,128]),e(Gt,[2,27]),{34:[1,580]},e(_t,[2,98]),e(_t,[2,370]),e(S,[2,372]),{13:c,16:l,34:K,39:582,60:178,87:te,93:re,98:179,231:P,234:581,243:583,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{38:[1,584],278:[1,585]},{38:[1,586]},{278:[1,587]},e(ct,[2,91]),e(at,[2,356]),e(ct,[2,177]),e(ct,[2,178]),{38:[1,588]},{38:[2,472]},{294:[1,589]},{13:c,16:l,60:178,87:te,93:re,98:179,99:591,231:dt,239:590,244:592,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{235:[1,593]},{235:[2,428]},{235:[2,429]},{13:c,16:l,38:[1,594],60:350,87:te,97:595,98:351,99:352,100:ft,231:dt,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(Jt,[2,275]),{48:[1,596]},{48:[2,322]},e(bt,[2,38]),e(bt,[2,39]),e(Ft,[2,74]),e(Ft,[2,338]),{46:[2,344]},e(Qt,[2,79]),{46:Y,62:597},{46:[2,349]},{46:[2,350]},{37:[1,598]},{37:[1,599]},e(Kt,[2,383],{207:600,278:[1,601]}),e(Pt,[2,388]),e([13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330],[2,111],{331:[1,602]}),{13:c,16:l,35:[1,608],60:605,195:[1,606],215:603,216:604,219:[1,607],312:h},e(Xt,[2,397]),{38:[1,609]},{48:[1,610]},{48:[2,414]},{48:[2,415]},e(ct,[2,89]),e(at,[2,354]),e(ct,[2,170]),e(I,O,{247:116,251:118,255:119,259:120,267:121,271:122,36:611,219:R,273:L,334:j}),e(ct,[2,179]),{295:[1,612]},{13:c,16:l,34:Ze,60:294,193:613,195:Je,312:h},e(et,[2,422]),e(et,[2,423]),e(er,[2,136]),e(wt,[2,48]),e(Jt,[2,276]),e(tr,[2,323],{149:614,328:[1,615]}),e(Qt,[2,80]),{34:[1,616]},{34:[1,617]},e([46,48,90,119,167,168,170,173,174,227,328],[2,107],{208:618,191:[1,619]}),e(S,[2,382]),e(Pt,[2,390]),e(rr,[2,113]),e(rr,[2,394],{217:620,332:621,26:[1,623],333:[1,622],334:[1,624]}),e(nr,[2,114]),e(nr,[2,115]),{13:c,16:l,35:[1,628],60:629,93:[1,627],195:ar,220:625,221:626,224:ir,312:h},e(Pt,Lt,{211:470,210:632}),e(Gt,[2,28]),{235:[1,633]},{38:[1,634]},{296:635,302:ce,303:le,304:pe,305:he},{13:c,16:l,60:178,87:te,93:re,98:179,99:637,231:dt,240:636,244:638,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},e(S,M,{152:146,150:639,151:640,48:sr,119:sr}),e(tr,[2,324]),{38:[1,641]},{38:[1,642]},e(Kt,[2,384]),e(Kt,[2,108],{211:470,209:643,210:644,13:Lt,16:Lt,35:Lt,195:Lt,219:Lt,224:Lt,312:Lt,34:[1,645]}),e(rr,[2,112]),e(rr,[2,395]),e(rr,[2,391]),e(rr,[2,392]),e(rr,[2,393]),e(nr,[2,116]),e(nr,[2,118]),e(nr,[2,119]),e(or,[2,398],{222:646}),e(nr,[2,121]),e(nr,[2,122]),{13:c,16:l,60:647,195:[1,648],312:h},{38:[1,649]},e(zt,[2,133]),e(ct,[2,171]),{38:[2,180]},{48:[1,650]},{48:[2,424]},{48:[2,425]},e(We,[2,69]),e(We,[2,326]),e(Qt,[2,82]),e(Qt,[2,83]),e(S,[2,373],{198:651,199:652}),e(S,[2,385]),e(S,[2,386]),{13:c,16:l,38:[2,400],60:629,195:ar,221:654,223:653,224:ir,312:h},e(nr,[2,123]),e(nr,[2,124]),e(nr,[2,117]),{235:[1,655]},e(Kt,[2,109]),{13:c,16:l,34:K,35:mt,39:478,60:178,87:te,93:re,98:179,200:656,203:476,226:Et,230:475,231:P,243:477,244:177,245:ae,246:ie,263:187,265:188,296:183,299:se,300:oe,301:ue,302:ce,303:le,304:pe,305:he,306:fe,307:de,308:ye,309:be,310:ve,311:ge,312:h},{38:[1,657]},{38:[2,401],330:[1,658]},e(er,[2,135]),e(Kt,[2,104],{278:[1,659]}),e(nr,[2,120]),e(or,[2,399]),e(S,[2,374])],defaultActions:{5:[2,205],6:[2,206],8:[2,204],26:[2,1],27:[2,3],28:[2,216],77:[2,49],86:[2,295],100:[2,252],107:[2,358],220:[2,441],248:[2,462],287:[2,236],288:[2,93],314:[2,410],315:[2,411],407:[2,418],408:[2,419],438:[2,319],439:[2,320],500:[2,465],501:[2,466],505:[2,420],506:[2,421],518:[2,11],519:[2,228],520:[2,12],521:[2,230],528:[2,345],529:[2,346],554:[2,472],558:[2,428],559:[2,429],563:[2,322],568:[2,344],571:[2,349],572:[2,350],582:[2,414],583:[2,415],635:[2,180],637:[2,424],638:[2,425]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],a=[],i=this.table,s="",o=0,u=0,c=2,l=1,p=a.slice.call(arguments,1),h=Object.create(this.lexer),f={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(f.yy[d]=this.yy[d]);h.setInput(e,f.yy),f.yy.lexer=h,f.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var y=h.yylloc;a.push(y);var b=h.options&&h.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,g,F,m,E,T,k,_,A=function(){var e;return"number"!=typeof(e=h.lex()||l)&&(e=t.symbols_[e]||e),e},D={};;){if(g=r[r.length-1],this.defaultActions[g]?F=this.defaultActions[g]:(null==v&&(v=A()),F=i[g]&&i[g][v]),void 0===F||!F.length||!F[0]){var S="";for(E in _=[],i[g])this.terminals_[E]&&E>c&&_.push("'"+this.terminals_[E]+"'");S=h.showPosition?"Parse error on line "+(o+1)+":\n"+h.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(o+1)+": Unexpected "+(v==l?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(S,{text:h.match,token:this.terminals_[v]||v,line:h.yylineno,loc:y,expected:_})}if(F[0]instanceof Array&&F.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+v);switch(F[0]){case 1:r.push(v),n.push(h.yytext),a.push(h.yylloc),r.push(F[1]),v=null,u=h.yyleng,s=h.yytext,o=h.yylineno,y=h.yylloc;break;case 2:if(T=this.productions_[F[1]][1],D.$=n[n.length-T],D._$={first_line:a[a.length-(T||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(T||1)].first_column,last_column:a[a.length-1].last_column},b&&(D._$.range=[a[a.length-(T||1)].range[0],a[a.length-1].range[1]]),void 0!==(m=this.performAction.apply(D,[s,u,o,f.yy,F[1],n,a].concat(p))))return m;T&&(r=r.slice(0,-1*T*2),n=n.slice(0,-1*T),a=a.slice(0,-1*T)),r.push(this.productions_[F[1]][0]),n.push(D.$),a.push(D._$),k=i[r[r.length-2]][r[r.length-1]],r.push(k);break;case 3:return!0}}return!0}},cr=Te.Wildcard,lr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",pr=lr+"type",hr=lr+"nil",fr="http://www.w3.org/2001/XMLSchema#",dr=fr+"integer",yr=fr+"decimal",br=fr+"double",vr=fr+"boolean",gr="",Fr="",mr="";function Er(e){return e.toLowerCase()}function Tr(e,t){return e.push(t),e}function kr(e,t){return e.push.apply(e,t),e}function _r(e){e||(e={});for(var t,r=1,n=arguments.length;r<n&&(t=arguments[r]||{});r++)for(var a in t)e[a]=t[a];return e}function Ar(){for(var e=[],t=0,r=arguments.length;t<r;t++)e=e.concat.apply(e,arguments[t]);return e}function Dr(e){if("<"===e[0]&&(e=e.substring(1,e.length-1)),/^[a-z]+:/i.test(e))return e;if(!tn.base)throw new Error("Cannot resolve relative IRI "+e+" because no base IRI was set.");switch(gr!==tn.base&&(gr=tn.base,Fr=gr.replace(/[^\/:]*$/,""),mr=gr.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),e[0]){case void 0:return gr;case"#":return gr+e;case"?":return gr.replace(/(?:\?.*)?$/,e);case"/":return mr+e;default:return Fr+e}}function Sr(e){if(e){var t=e[0];if("?"===t||"$"===t)return tn.factory.variable(e.substr(1))}return e}function Nr(e,t){return{type:"operation",operator:e,args:t||[]}}function wr(e,t){var r={expression:"*"===e?new cr:e};if(t)for(var n in t)r[n]=t[n];return r}function Cr(e,t){return{type:"path",pathType:e,items:t}}function xr(e,t){for(var r,n=0,a=t.length;n<a&&(r=t[n]);n++)e=Nr(r[0],[e,r[1]]);return e}function Ir(e,t){var r,n=[],a=[],i=e.length,s={};if(!i)return null;for(var o=0;o<i&&(r=e[o]);o++)(r.named?a:n).push(r.iri);return s[t||"from"]={default:n,named:a},s}function Or(e){return parseInt(e,10)}function Rr(e){return"group"===e.type&&1===e.patterns.length?e.patterns[0]:e}function Pr(e,t){return t&&"NamedNode"!==t.termType&&(t=tn.factory.namedNode(t)),tn.factory.literal(e,t)}function Lr(e,t,r){var n={};return null!=e&&(n.subject=e),null!=t&&(n.predicate=t),null!=r&&(n.object=r),n}function jr(e){return"string"==typeof e?e.startsWith("e_")?tn.factory.blankNode(e):tn.factory.blankNode("e_"+e):tn.factory.blankNode("g_"+$r++)}var $r=0;tn._resetBlanks=function(){$r=0};var Ur=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Gr={"\\":"\\","'":"'",'"':'"',t:"\t",b:"\b",n:"\n",r:"\r",f:"\f"},Br=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,qr=String.fromCharCode;function Mr(e,t){e=e.substring(t,e.length-t);try{e=e.replace(Ur,(function(e,t,r,n){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return qr(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return a<65535?qr(a):qr(55296+((a-=65536)>>10),56320+(1023&a))}var i=Gr[n];if(!i)throw new Error;return i}))}catch(e){return""}if(Br.exec(e))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+e);return e}function Vr(e,t,r){var n=[],a=[];return t.forEach((function(t){n.push(Lr(null,e,t.entity)),kr(a,t.triples)})),Ar(n,r||[],a)}function Qr(e){return e.variable?e.variable.value:e.value||e.expression.value}function Hr(e){if(!e)return[];if("aggregate"===e.type)return[e];if("operation"===e.type){const t=[];for(const r of e.args)t.push(...Hr(r));return t}return[]}function Wr(e){const t=new Set,r=function(e){e&&("Variable"===e.termType?t.add(e):"operation"===e.type&&e.args.forEach(r))};return r(e),t}function zr(e,t=1,r=[]){for(const n of e)t>0&&n instanceof Array?zr(n,t-1,r):r.push(n);return r}function Yr(e){return"Variable"===e.termType}function Xr(e){if(e.triples){const t=[];for(const r of e.triples)Yr(r.subject)&&t.push(r.subject.value),Yr(r.predicate)&&t.push(r.predicate.value),Yr(r.object)&&t.push(r.object.value);return t}if(e.patterns){const t=[];for(const r of e.patterns)t.push(...Xr(r));return t}return[]}function Zr(e){if(!tn.sparqlStar)throw new Error("SPARQL* support is not enabled");return e}function Jr(e){for(const t of e){if("graph"===t.type&&"Variable"===t.name.termType)throw new Error("Detected illegal variable in GRAPH");if("bgp"===t.type||"graph"===t.type)for(const e of t.triples)if("Variable"===e.subject.termType||"Variable"===e.predicate.termType||"Variable"===e.object.termType)throw new Error("Detected illegal variable in BGP")}return e}function Kr(e){for(const t of e)if("bgp"===t.type)for(const e of t.triples)if("BlankNode"===e.subject.termType||"BlankNode"===e.predicate.termType||"BlankNode"===e.object.termType)throw new Error("Detected illegal blank node in BGP");return e}var en={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in a)this[i]=a[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),i=0;i<a.length;i++)if((r=this._input.match(this.rules[a[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,a[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(e,t,r,n){switch(r){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 316;case 5:return 317;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 320;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 321;case 30:return 140;case 31:return 322;case 32:return 323;case 33:return 117;case 34:return 324;case 35:return 116;case 36:return 325;case 37:return 326;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 327;case 48:return 328;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 329;case 55:return 173;case 56:return 231;case 57:return 235;case 58:return 278;case 59:return 195;case 60:return 330;case 61:return 331;case 62:return 224;case 63:return 333;case 64:return 334;case 65:return 219;case 66:return 226;case 67:return 227;case 68:return 250;case 69:return 254;case 70:return 295;case 71:return 335;case 72:return 336;case 73:return 337;case 74:return 338;case 75:return 339;case 76:return 258;case 77:return 340;case 78:return 273;case 79:return 281;case 80:return 282;case 81:return 275;case 82:return 276;case 83:return 277;case 84:return 341;case 85:return 342;case 86:return 279;case 87:return 344;case 88:return 343;case 89:return 345;case 90:return 284;case 91:return 285;case 92:return 288;case 93:return 290;case 94:return 294;case 95:return 298;case 96:return 301;case 97:return 13;case 98:return 16;case 99:return 312;case 100:return 245;case 101:return 34;case 102:return 297;case 103:return 87;case 104:return 299;case 105:return 300;case 106:return 306;case 107:return 307;case 108:return 308;case 109:return 309;case 110:return 310;case 111:return 311;case 112:return"EXPONENT";case 113:return 302;case 114:return 303;case 115:return 304;case 116:return 305;case 117:return 93;case 118:return 246;case 119:return 6;case 120:return"INVALID";case 121:console.log(t.yytext)}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};function tn(){this.yy={}}return ur.lexer=en,tn.prototype=ur,ur.Parser=tn,new tn}();t.parser=r,t.Parser=r.Parser,t.parse=function(){return r.parse.apply(r,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var r=u.readFileSync(c.normalize(e[1]),"utf8");return t.parser.parse(r)},R.main===e&&t.main(process.argv.slice(1))})),_e=(ke.parser,ke.Parser,ke.parse,ke.main,L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0;t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}})));P(_e);_e.BlankNode;var Ae=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class r{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=r,r.INSTANCE=new r}));P(Ae);Ae.DefaultGraph;var De=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0;t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}}));P(De);De.NamedNode;var Se=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;class r{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}t.Literal=r,r.RDF_LANGUAGE_STRING=new De.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new De.NamedNode("http://www.w3.org/2001/XMLSchema#string")}));P(Se);Se.Literal;var Ne=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0;t.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}}));P(Ne);Ne.Quad;var we=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;t.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}}));P(we);we.Variable;var Ce=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;let r=0;t.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${r++}_`}namedNode(e){return new De.NamedNode(e)}blankNode(e){return new _e.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Se.Literal(e,t)}variable(e){return new we.Variable(e)}defaultGraph(){return Ae.DefaultGraph.INSTANCE}quad(e,t,r,n){return new Ne.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Se.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}}));P(Ce);Ce.DataFactory;P(L((function(e,t){var r=O&&O.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=O&&O.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(_e,t),n(Ce,t),n(Ae,t),n(Se,t),n(De,t),n(Ne,t),n(we,t)})));ke.Parser,new(0,require("sparqljs").Parser);var xe=new(0,require("sparqljs").Generator)({}),Ie=function(e){var t=e.containers,r=e.params.filter,n=e.dereference,a=e.ontologies;console.log("******************* buildSparqlQuery",t,r,n,a);var i={queryType:"CONSTRUCT",template:[{subject:le.variable("s1"),predicate:le.variable("p1"),object:le.variable("o1")}],where:[{type:"bgp",triples:[{subject:le.variable("s1"),predicate:le.variable("p1"),object:le.variable("o1")}]},{type:"filter",expression:{type:"operation",operator:"isiri",args:[le.variable("s1")]}},{type:"filter",expression:{type:"operation",operator:"in",args:[le.variable("containerUri"),[le.namedNode(t[0])]]}},{type:"bgp",triples:[{subject:le.variable("containerUri"),predicate:le.namedNode("http://www.w3.org/ns/ldp#contains"),object:le.variable("s1")}]}],type:"query",prefixes:{}};console.log("***** sparqljsParams-init",b({},i)),a.map((function(e){i.prefixes=b(b({},i.prefixes),{},f({},e.prefix,e.url))})),console.log("***** sparqljsParams-1",b({},i));var s=Fe(n,!0,a);if(s&&s.construct&&(i.where=i.where.concat(s.where),i.template=i.template.concat(s.construct)),console.log("***** sparqljsParams-2",b({},i)),r&&Object.keys(r).length>0){console.log("** FILTER-0",b({},r),Object.keys(r).join());var o=r.sparqlWhere&&Object.keys(r.sparqlWhere).length>0,u=r.q&&r.q.length>0;o&&(console.log("** FILTER-SPARQL"),i.where.push(r.sparqlWhere)),u?(console.log("** FILTER-Q"),i.where.push({type:"group",patterns:[{queryType:"SELECT",variables:[le.variable("s1")],where:[{type:"bgp",triples:[{subject:le.variable("s1"),predicate:le.variable("p1"),object:le.variable("o1")}]},{type:"filter",expression:{type:"operation",operator:"regex",args:[{type:"operation",operator:"lcase",args:[{type:"operation",operator:"str",args:[le.variable("o1")]}]},le.literal(r.q.toLowerCase(),"",le.namedNode("http://www.w3.org/2001/XMLSchema#string"))]}},{type:"filter",expression:{type:"operation",operator:"notexists",args:[{type:"bgp",triples:[{subject:le.variable("s1"),predicate:le.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),object:le.variable("o1")}]}]}}],type:"query"}]})):(console.log("** FILTER<>Q"),Object.keys(r).forEach((function(e){if(r[e]&&"sparqlWhere"!==e){var t=null,n=null,s=null,o=null,u=null;"a"===e?(console.log("** FILTER<>Q-a"),t=r[e].split(":")[0],n=r[e].split(":")[1],u="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",o=(s=a.find((function(e){return e.prefix===t}))).url+n):(t=e.split(":")[0],n=e.split(":")[1],u=(s=a.find((function(e){return e.prefix===t}))).url+n,o=r[e]),console.log("** FILTER-<>Q---\x3e",e,r[e],t,n,s,o),i.where.push({type:"bgp",triples:[{subject:le.variable("s1"),predicate:le.namedNode(u),object:le.namedNode(o)}]})}})))}console.log("***** sparqljsParams-final",b({},i));var c=xe.stringify(i);console.log("******************* SEMAPPS buildSparqlQuery ***",t,r,n,a);var l="",p="";r&&(r.q&&r.q.length>0&&(l+='\n      {\n        SELECT ?s1\n        WHERE {\n          ?s1 ?p1 ?o1 .\n          FILTER regex(lcase(str(?o1)), "'.concat(r.q.toLowerCase(),'")\n          FILTER NOT EXISTS {?s1 a ?o1}\n        }\n      }\n      '),delete r.q),Object.keys(r).forEach((function(e){if(r[e]&&"sparqlWhere"!=e){var t=r[e].startsWith("http")?"<".concat(r[e],">"):r[e];p+="?s1 ".concat(e," ").concat(t," .")}})));var h=Fe(n);console.log("*** SEMAPPS buildSparqlQuery-params ***","1:",h,"2:",p,"3:",t,"4:",l);var d="\n  ".concat(function(e){return e.map((function(e){return"PREFIX ".concat(e.prefix,": <").concat(e.url,">")})).join("\n")}(a),"\n  CONSTRUCT {\n    ?s1 ?p2 ?o2 .\n    ").concat(h.construct,"\n  }\n  WHERE {\n    ").concat(p,"\n    ?containerUri ldp:contains ?s1 .\n    FILTER( ?containerUri IN (").concat(t.map((function(e){return"<".concat(e,">")})).join(", "),") ) .\n    FILTER( (isIRI(?s1)) ) .\n    ").concat(l,"\n    ").concat(h.where,"\n    ?s1 ?p2 ?o2 .\n  }\n  ");return console.log("******************* SEMAPPS -> SPARQL.JS - return :",c),console.log("******************* SEMAPPS buildSparqlQuery - return :",d),r.q&&delete r.q,c},Oe=function(){var e=h(regeneratorRuntime.mark((function e(t,r,n,a){var s,o,u,c,l,p,h,f,d,y,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.dataServers,u=a.resources,c=a.httpClient,l=a.jsonContext,p=a.ontologies,h=u[r],f=b({"@context":l,"@type":h.types,"@embed":"@never"},Y(null===(s=h.list)||void 0===s?void 0:s.dereference)),d=Object.keys(t).map((function(e){return new Promise((function(r,a){var s,u,l=Ie({containers:t[e],params:b(b({},n),{},{filter:b(b({},null===(s=h.list)||void 0===s?void 0:s.filter),n.filter)}),dereference:null===(u=h.list)||void 0===u?void 0:u.dereference,ontologies:p});c(o[e].sparqlEndpoint,{method:"POST",body:l,noToken:!0!==o[e].authServer}).then((function(e){var t=e.json;return i.frame(t,f,{omitGraph:!1})})).then((function(e){r(e["@graph"]||[])})).catch((function(e){return a(e)}))}))})),e.next=6,Promise.all(d);case 6:if(0!==(y=e.sent).length){e.next=11;break}return e.abrupt("return",{data:[],total:0});case 11:return y=(v=[].concat).apply.apply(v,F(y)),g=y.map((function(e){return e.id=e.id||e["@id"],e})),n.sort&&(g=g.sort((function(e,t){return!e[n.sort.field]||!t[n.sort.field]||("ASC"===n.sort.order?e[n.sort.field].localeCompare(t[n.sort.field]):t[n.sort.field].localeCompare(e[n.sort.field]))}))),n.pagination&&(g=g.slice((n.pagination.page-1)*n.pagination.perPage,n.pagination.page*n.pagination.perPage)),e.abrupt("return",{data:g,total:y.length});case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Re=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r){var n,a,i,s,o,u,c,l,p,h,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=f.length>1&&void 0!==f[1]?f[1]:{},o=e.dataServers,u=e.resources,c=u[r]){t.next=5;break}throw new Error("Resource ".concat(r," is not mapped in resources file"));case 5:if(l=(null===(n=c.list)||void 0===n?void 0:n.containers)&&(null===(a=c.list)||void 0===a?void 0:a.containers.length)>0?null===(p=c.list)||void 0===p?void 0:p.containers:q(c.types,null===(h=c.list)||void 0===h?void 0:h.servers,o),!(null===(i=c.list)||void 0===i?void 0:i.fetchContainer)){t.next=10;break}return t.abrupt("return",z(l,r,s,e));case 10:return t.abrupt("return",Oe(l,r,s,e));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pe=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s,o,u,c,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.returnFailedResources,i=[],s=T(n.ids),t.prev=3,s.s();case 5:if((o=s.n()).done){t.next=21;break}return u="object"===l(u=o.value)?u["@id"]:u,t.prev=8,t.next=11,I(e)(r,{id:u});case 11:c=t.sent,p=c.data,i.push(p),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),a&&i.push({id:u});case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(3),s.e(t.t1);case 26:return t.prev=26,s.f(),t.finish(26);case 29:return t.abrupt("return",{data:i});case 30:case"end":return t.stop()}}),t,null,[[3,23,26,29],[8,16]])})));return function(e,r){return t.apply(this,arguments)}}()},Le=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.filter=b(b({},n.filter),{},f({},n.target,n.id)),delete n.target,t.next=4,Re(e)(r,n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},je=function(e){return function(){var t=h(regeneratorRuntime.mark((function t(r,n){var a,i,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dataServers,i=e.httpClient,s=e.jsonContext,o=C(n.id,a),t.next=4,B(n.data,e);case 4:return n.data=t.sent,t.next=7,i(n.id,{method:"PUT",body:JSON.stringify(b({"@context":s},n.data)),noToken:!o||!0!==a[o].authServer});case 7:return t.abrupt("return",{data:n.data});case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()};function $e(e){this.message=e}$e.prototype=new Error,$e.prototype.name="InvalidCharacterError";var Ue="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new $e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,a=0,i=0,s="";n=t.charAt(i++);~n&&(r=a%4?64*r+n:n,a++%4)?s+=String.fromCharCode(255&r>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function Ge(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Ue(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return Ue(t)}}function Be(e){this.message=e}function qe(e,t){if("string"!=typeof e)throw new Be("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(Ge(e.split(".")[r]))}catch(e){throw new Be("Invalid token specified: "+e.message)}}Be.prototype=new Error,Be.prototype.name="InvalidTokenError";var Me=function(){var e=h(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o,u,c,l,p,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dataServers,n=t.httpClient,a=localStorage.getItem("token"),i=w("pod",r),s=w("authServer",r),!a){e.next=24;break}return o=qe(a),u=o.webId,e.prev=6,e.next=9,n(u);case 9:l=e.sent,p=l.json,c=p,e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(6),console.error(e.t0),localStorage.removeItem("token"),window.location.reload(),e.abrupt("return");case 20:i&&(t.dataServers[i].name="My Pod",t.dataServers[i].baseUrl=j(u,"data"),t.dataServers[i].sparqlEndpoint=(null===(h=c.endpoints)||void 0===h?void 0:h["void:sparqlEndpoint"])||j(u,"sparql")),s&&(t.dataServers[s].proxyUrl=null===(f=c.endpoints)||void 0===f?void 0:f.proxyUrl),e.next=25;break;case 24:i&&delete t.dataServers[i];case 25:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=h(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.values(t.dataServers).filter((function(e){return!0!==e.pod})).map((function(e){return t.httpClient(new URL("/.well-known/void",e.baseUrl)).then((function(e){return{data:e.json}})).catch((function(e){if(404===e.status)return{error:e};throw e}))})),e.prev=1,e.next=4,Promise.all(r);case 4:n=e.sent,a=T(n);try{for(a.s();!(i=a.n()).done;)i.value.data}catch(e){a.e(e)}finally{a.f()}e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();exports.DateTimeInput=function(e){return r.createElement(n.DateTimeInput,d({},e,{format:function(e){return e&&e.replace(" ","T").replace("Z","")}}))},exports.FilterHandler=A,exports.GroupedReferenceHandler=function(e){var t=e.children,a=e.groupReference,i=e.groupLabel,s=e.groupHeader,o=e.filterProperty,u=v(e,["children","groupReference","groupLabel","groupHeader","filterProperty"]),c=n.useQueryWithStore({type:"getList",resource:a,payload:{}}).data;return r.createElement(r.Fragment,null,null==c?void 0:c.map((function(e,n){var a={};return a[o]=e.id,r.createElement(r.Fragment,null,s&&s(b(b({},u),{},{group:e})),r.createElement(A,d({},u,{filter:a,label:e[i]}),t))})))},exports.ImageField=function(e){var t=e.record,a=e.source,i=v(e,["record","source"]);return"string"==typeof t&&(t=f({},a,t)),r.createElement(n.ImageField,d({record:t,source:a},i))},exports.ReferenceArrayField=k,exports.ReferenceArrayInput=D,exports.ReferenceField=_,exports.ReferenceInput=function(e){var t=n.useResourceContext({});return r.createElement(n.ReferenceInput,d({},e,{resource:t,format:function(t){return t?(e.format&&(t=e.format(t)),"object"===l(t)?t.id||t["@id"]:t):t}}))},exports.ReificationArrayInput=function(e){var t=e.reificationClass,a=(e.children,v(e,["reificationClass","children"])),i=S(),s=N();return r.createElement(n.ArrayInput,a,r.createElement(n.SimpleFormIterator,{classes:{form:i.form}},r.Children.map(e.children,(function(e,t){return r.cloneElement(e,{className:i.input})})),r.createElement(n.TextInput,{className:s.root,source:"type",initialValue:t})))},exports.UriArrayField=k,exports.UriArrayInput=D,exports.buildDereferenceQuery=Fe,exports.buildSparqlQuery=Ie,exports.dataProvider=function(e){if(!w("default",e.dataServers))throw new Error("You must define a default server in your dataServers config");e.jsonContext||(e.jsonContext=Object.fromEntries(e.ontologies.map((function(e){return[e.prefix,e.url]})))),e.returnFailedResources||(e.returnFailedResources=!1);var t=Me(e),r=Ve(e),n=function(e){return h(regeneratorRuntime.mark((function n(){var a=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.next=4,r;case 4:return n.next=6,e.apply(void 0,a);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))};return{getList:n(Re(e)),getOne:n(I(e)),getMany:n(Pe(e)),getManyReference:n(Le(e)),create:n(M(e)),update:n(je(e)),updateMany:function(){throw new Error("updateMany is not implemented yet")},delete:n(V(e)),deleteMany:n(Q(e)),getCreateContainer:n(W(e))}},exports.httpClient=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.headers||(t.headers=new Headers),t.method){case"POST":case"PATCH":case"PUT":t.headers.has("Accept")||t.headers.set("Accept","application/ld+json"),t.headers.has("Content-Type")||t.headers.set("Content-Type","application/ld+json");break;case"DELETE":break;case"GET":default:t.headers.has("Accept")||t.headers.set("Accept","application/ld+json")}if(!t.noToken){var r=localStorage.getItem("token");r&&t.headers.set("Authorization","Bearer ".concat(r))}return n.fetchUtils.fetchJson(e,t)},exports.useCreateContainer=function(e){var r=t.useContext(n.DataProviderContext),a=g(t.useState(),2),i=a[0],s=a[1];return t.useEffect((function(){e&&r.getCreateContainer(e).then((function(e){return s(e)}))}),[e]),i};
//# sourceMappingURL=index.cjs.js.map
