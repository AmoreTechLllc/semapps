{"version":3,"file":"index.es.js","sources":["../src/fields/ImageField.js","../src/fields/ReferenceArrayField.js","../src/fields/ReferenceField.js","../src/fields/FilteredArrayField.js","../src/fields/GroupedArrayField.js","../src/inputs/DateTimeInput.js","../src/inputs/ReferenceArrayInput.js","../src/inputs/ReferenceInput.js","../src/inputs/ReificationArrayInput.js","../src/buildDereferenceQuery.js","../src/buildSparqlQuery.js","../src/dataProvider.js","../src/httpClient.js"],"sourcesContent":["import React from 'react';\nimport { ImageField as RaImageField } from 'react-admin';\n\nconst ImageField = ({ record, source, ...otherProps }) => {\n  // For the display, we need to have the URI in a src property\n  if (typeof record === 'string') record = { [source]: record };\n  return <RaImageField record={record} source={source} {...otherProps} />;\n};\n\nexport default ImageField;\n","import React from 'react';\nimport { ReferenceArrayField as RaReferenceArrayField } from 'react-admin';\n\nconst ReferenceArrayField = ({ record, source, ...otherProps }) => {\n  if (record?.[source]) {\n    if (!Array.isArray(record[source])) {\n      record[source] = [record[source]];\n    }\n    record[source] = record[source].map(i => i['@id'] || i.id || i);\n  }\n  return <RaReferenceArrayField record={record} source={source} {...otherProps} />;\n};\n\nReferenceArrayField.defaultProps = {\n  addLabel: true\n};\n\nexport default ReferenceArrayField;\n","import React from 'react';\nimport { ReferenceField as RaReferenceField } from 'react-admin';\n\nconst ReferenceField = ({ record, source, ...otherProps }) => {\n  if (record[source]) {\n    if (typeof record[source] === 'object') {\n      record[source] = record[source]['@id'] || record[source].id;\n    }\n  }\n  return <RaReferenceField record={record} source={source} {...otherProps} />;\n};\n\nReferenceField.defaultProps = {\n  addLabel: true\n};\n\nexport default ReferenceField;\n","import React, { useState, useEffect } from 'react';\nimport { ArrayField } from 'react-admin';\n\n/**\n * @example\n * <Show>\n *   <FilteredArrayField\n *     source=\"pair:organizationOfMembership\"\n *     filter={{\n *       'pair:membershipRole':'http://localhost:3000/membership-roles/role-1'\n *     }}\n *     >\n *     <SingleFieldList>\n *    </SingleFieldList>\n *   </FilteredArrayField>\n * </Show>\n */\n\nconst FilteredArrayField = ({ children, record, filter, source, ...otherProps }) => {\n  const [filtered, setFiltered] = useState();\n  useEffect(() => {\n    if (record && source && Array.isArray(record[source])) {\n      const filteredData = record[source].filter(r => {\n        let eq = true;\n        for (const key in filter) {\n          const value = r[key];\n          if (Array.isArray(value)) {\n            if (!value.includes(filter[key])) {\n              eq = false;\n            }\n          } else {\n            if (value !== filter[key]) {\n              eq = false;\n            }\n          }\n        }\n        return eq;\n      });\n      let newRecord = {\n        ...record\n      };\n      newRecord[source] = filteredData;\n      setFiltered(newRecord);\n    }\n  }, [record, source, filter]);\n\n  return (\n    <ArrayField record={filtered} source={source} {...otherProps}>\n      {children}\n    </ArrayField>\n  );\n};\n\nFilteredArrayField.defaultProps = {\n  addLabel: true\n};\n\nexport default FilteredArrayField;\n","import React, { useState, useEffect, createElement } from 'react';\nimport { ArrayField, useDataProvider, useResourceContext } from 'react-admin';\nimport { default as FilteredArrayField } from './FilteredArrayField';\nimport { Typography, Box } from '@material-ui/core';\n\n/**\n * @example 1 : simple group label\n * <GroupedArrayField\n *   source=\"property\"\n *   groupReference=\"RAresource\"\n *   groupLabel=\"property of RAresource display\"\n *   groupVariant=\"Typography MaterialUI variant\"\n *   filterProperty=\"property of source filtered by groupReference\"\n * >\n *   <SingleFieldList>\n *   </SingleFieldList>\n * </GroupedArrayField>\n */\n\n/**\n * @example 2 : custom group label\n * <GroupedArrayField\n *   source=\"property\"\n *   groupReference=\"RAresource\"\n *   groupComponent={({record, ...otherProps })=>\n *     <RightLabel label={record['property of RAresource display']}/>\n *   }\n *   filterProperty=\"property of source filtered by groupReference\"\n * >\n *   <SingleFieldList>\n *   </SingleFieldList>\n * </GroupedArrayField>\n */\n\nconst GroupedArrayField = ({\n  children,\n  groupReference,\n  groupLabel,\n  filterProperty,\n  groupComponent,\n  groupVariant,\n  ...otherProps\n}) => {\n  const dataProvider = useDataProvider();\n  const [groups, setGroups] = useState();\n\n  useEffect(() => {\n    if (!groups) {\n      dataProvider.getResources().then(resources => {\n        const resource = resources.data[groupReference];\n        dataProvider\n          .getList(groupReference, { '@id': resource.containerUri })\n          .then(groups => {\n            setGroups(groups.data);\n          })\n          .catch(e => {\n            setGroups([]);\n          });\n      });\n    }\n  }, [groups]);\n\n  return (\n    <>\n      {groups?.map((group, index) => {\n        let filter = {};\n        filter[filterProperty] = group.id;\n        return (\n          <Box key={index}>\n            {groupComponent && groupComponent(group)\n            // createElement(groupComponent,{record:group})\n            }\n            {!groupComponent && (\n              <Typography variant={groupVariant} align=\"left\" noWrap>\n                {group[groupLabel]}\n              </Typography>\n            )}\n\n            <FilteredArrayField {...otherProps} filter={filter}>\n              {children}\n            </FilteredArrayField>\n          </Box>\n        );\n      })}\n    </>\n  );\n};\n\nGroupedArrayField.defaultProps = {\n  addLabel: true\n};\n\nexport default GroupedArrayField;\n","import React from 'react';\nimport { DateTimeInput as RaDateTimeInput } from 'react-admin';\n\nconst DateTimeInput = props => (\n  <RaDateTimeInput {...props} format={value => value && value.replace(' ', 'T').replace('Z', '')} />\n);\n\nexport default DateTimeInput;\n","import React from 'react';\nimport { ReferenceArrayInput as RaReferenceArrayInput, useResourceContext } from 'react-admin';\n\nconst ReferenceArrayInput = props => {\n  const resource = useResourceContext({});\n  return (\n    <RaReferenceArrayInput\n      {...props}\n      resource={resource}\n      format={value => {\n        // If there is no value, return immediately\n        if (!value) return value;\n        // if the linked field value is not an array, turns it into an array.\n        // Necessary as JSON-LD are sometimes arrays, sometimes not (when there is one value)\n        // and the ReferenceArrayInput component only accept arrays\n        if (!Array.isArray(value)) value = [value];\n        // If a format prop was defined, apply it to the array\n        if (props.format) value = props.format(value);\n        // If the values are objects with @id field, turn it to a simple string\n        return value.map(v => (typeof v === 'object' ? v.id || v['@id'] : v));\n      }}\n    />\n  );\n};\n\nexport default ReferenceArrayInput;\n","import React from 'react';\nimport { ReferenceInput as RaReferenceInput, useResourceContext } from 'react-admin';\n\nconst ReferenceInput = props => {\n  const resource = useResourceContext({});\n  return (\n    <RaReferenceInput\n      {...props}\n      resource={resource}\n      format={value => {\n        // If there is no value, return immediately\n        if (!value) return value;\n        // If a format prop was defined, apply it\n        if (props.format) value = props.format(value);\n        // If the value is an object with an @id field, return the uri\n        return typeof value === 'object' ? value.id || value['@id'] : value;\n      }}\n    />\n  );\n};\n\nexport default ReferenceInput;\n","import React, { useEffect, useState } from 'react';\nimport { ArrayInput, SimpleFormIterator, TextInput } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useReferenceInputStyles = makeStyles({\n  form: {\n    display: 'flex'\n  },\n  input: {\n    paddingRight: '20px'\n  }\n});\n\nconst useHideInputStyles = makeStyles({\n  root: {\n    display: 'none'\n  }\n});\n\nconst ReificationArrayInput = props => {\n  const { reificationClass, children, ...otherProps } = props;\n  const flexFormClasses = useReferenceInputStyles();\n  const hideInputStyles = useHideInputStyles();\n\n  return (\n    <ArrayInput {...otherProps}>\n      <SimpleFormIterator classes={{ form: flexFormClasses.form }}>\n        {React.Children.map(props.children, (child, i) => {\n          return React.cloneElement(child, {\n            className: flexFormClasses.input\n          });\n        })}\n        <TextInput className={hideInputStyles.root} source=\"type\" initialValue={reificationClass} />\n      </SimpleFormIterator>\n    </ArrayInput>\n  );\n};\n\nexport default ReificationArrayInput;\n","// Return an object in the form of predicate => parentPredicate\nconst flattenPredicate = (accumulator, predicate, parent = 'root') => {\n  if (predicate.includes('/')) {\n    const matches = predicate.split(/\\/(.+)/);\n    accumulator[matches[0]] = parent;\n    flattenPredicate(accumulator, matches[1], matches[0]);\n  } else {\n    accumulator[predicate] = parent;\n  }\n  return accumulator;\n};\n\n// Transform ontology:predicate to OntologyPredicate in order to use it as a variable name\nconst generateSparqlVarName = predicate =>\n  predicate\n    .split(':')\n    .map(s => s[0].toUpperCase() + s.slice(1))\n    .join('');\n\nconst buildDereferenceQuery = predicates => {\n  let queries = [];\n\n  if (predicates) {\n    const flattenedPredicates = predicates.reduce((acc, predicate) => flattenPredicate(acc, predicate), {});\n\n    for (const [predicate, parent] of Object.entries(flattenedPredicates)) {\n      const varName = generateSparqlVarName(predicate);\n      const parentVarName = parent === 'root' ? '1' : generateSparqlVarName(parent);\n\n      // Group queries by parent, so that we can group WHERE triples in the same OPTIONAL tag\n      const groupKey = parent === 'root' ? predicate : parent;\n      if (!queries[groupKey]) queries[groupKey] = [];\n\n      queries[groupKey].push(`\n        ?s${parentVarName} ${predicate} ?s${varName} .\n        ?s${varName} ?p${varName} ?o${varName} .\n      `);\n    }\n  }\n\n  return {\n    construct: Object.values(queries)\n      .map(groupedQueries => Object.values(groupedQueries).join('\\n'))\n      .join('\\n'),\n    where: Object.values(queries)\n      .map(groupedQueries => `OPTIONAL { ${Object.values(groupedQueries).join('\\n')} }`)\n      .join('\\n')\n  };\n};\n\nexport default buildDereferenceQuery;\n","import buildDereferenceQuery from './buildDereferenceQuery';\n\nconst getPrefixRdf = ontologies => {\n  return ontologies.map(ontology => `PREFIX ${ontology.prefix}: <${ontology.url}>`).join('\\n');\n};\n\nconst buildSparqlQuery = ({ types, params: { pagination, sort, filter }, dereference, ontologies }) => {\n  let whereQuery = '';\n\n  if (filter) {\n    if (filter.q && filter.q.length > 0) {\n      whereQuery += `\n      {\n        SELECT ?s1\n        WHERE {\n          ?s1 ?p1 ?o1 .\n          FILTER regex(lcase(str(?o1)), \"${filter.q.toLowerCase()}\")\n          FILTER NOT EXISTS {?s1 a ?o1}\n        }\n      }\n      `;\n      delete filter.q;\n    }\n    Object.keys(filter).forEach(predicate => {\n      const object = filter[predicate].startsWith('http') ? `<${filter[predicate]}>` : filter[predicate];\n      whereQuery += `?s1 ${predicate} ${object} .`;\n    });\n  }\n\n  const dereferenceQuery = buildDereferenceQuery(dereference);\n\n  return `\n    ${getPrefixRdf(ontologies)}\n    CONSTRUCT {\n      ?s1 ?p2 ?o2 .\n      ${dereferenceQuery.construct}\n    }\n    WHERE {\n      ?s1 a ?type .\n      FILTER( ?type IN (${types.join(', ')}) ) .\n      FILTER( (isIRI(?s1)) ) .\n      ${whereQuery}\n      ${dereferenceQuery.where}\n      ?s1 ?p2 ?o2 .\n    }\n    # TODO try to make pagination work in SPARQL as this doesn't work.\n    # LIMIT ${pagination.perPage}\n    # OFFSET ${(pagination.page - 1) * pagination.perPage}\n  `;\n};\n\nexport default buildSparqlQuery;\n","import jsonld from 'jsonld';\nimport buildSparqlQuery from './buildSparqlQuery';\nconst createSlug = require('speakingurl');\n\nconst buildJsonContext = ontologies => {\n  let pattern = {};\n  ontologies.forEach(ontology => (pattern[ontology.prefix] = ontology.url));\n  return pattern;\n};\n\nconst isFile = o => o && o.rawFile && o.rawFile instanceof File;\n\nconst getSlugWithExtension = fileName => {\n  let fileExtension = '';\n  let splitFileName = fileName.split('.');\n  if (splitFileName.length > 1) {\n    fileExtension = splitFileName.pop();\n    fileName = splitFileName.join('.');\n  }\n  return createSlug(fileName, { lang: 'fr' }) + '.' + fileExtension;\n};\n\nconst isType = (type, resource) => {\n  const resourceType = resource.type || resource['@type'];\n  return Array.isArray(resourceType) ? resourceType.includes(type) : resourceType === type;\n};\n\nconst dataProvider = ({ sparqlEndpoint, httpClient, resources, ontologies, jsonContext, uploadsContainerUri }) => {\n  const uploadFile = async rawFile => {\n    if (!uploadsContainerUri) throw new Error('No uploadsContainerUri defined for the data provider');\n\n    const response = await httpClient(uploadsContainerUri, {\n      method: 'POST',\n      body: rawFile,\n      headers: new Headers({\n        // We must sluggify the file name, because we can't use non-ASCII characters in the header\n        // However we keep the extension apart (if it exists) so that it is not replaced with a -\n        // TODO let the middleware guess the extension based on the content type\n        Slug: getSlugWithExtension(rawFile.name),\n        'Content-Type': rawFile.type\n      })\n    });\n\n    if (response.status === 201) {\n      return response.headers.get('Location');\n    }\n  };\n\n  /*\n   * Look for raw files in the resource data.\n   * If there are any, upload them and replace the file by its URL.\n   */\n  const uploadAllFiles = async resource => {\n    for (let property in resource) {\n      if (resource.hasOwnProperty(property)) {\n        if (Array.isArray(resource[property])) {\n          for (let i = 0; i < resource[property].length; i++) {\n            if (isFile(resource[property][i])) {\n              resource[property][i] = await uploadFile(resource[property][i].rawFile);\n            }\n          }\n        } else {\n          if (isFile(resource[property])) {\n            resource[property] = await uploadFile(resource[property].rawFile);\n          }\n        }\n      }\n    }\n    return resource;\n  };\n\n  return {\n    getResources: async (resourceId, params) => {\n      return { data: resources };\n    },\n    getList: async (resourceId, params) => {\n      if (!resources[resourceId]) Error(`Resource ${resourceId} is not mapped in resources file`);\n\n      if (params.id || params['@id'] || !resources[resourceId].types) {\n        const url = params.id || params['@id'] || resources[resourceId].containerUri;\n        let { json } = await httpClient(url);\n\n        if (isType('ldp:Container', json)) {\n          /*\n           * LDP Container\n           */\n          let returnData = json['ldp:contains'].map(item => {\n            item.id = item.id || item['@id'];\n            return item;\n          });\n\n          // Apply filter to results\n          if (params.filter) {\n            // Remove search params from filter\n            if (params.filter.q) {\n              delete params.filter.q;\n            }\n            if (Object.keys(params.filter).length > 0) {\n              returnData = returnData.filter(resource =>\n                Object.entries(params.filter).some(([k, v]) =>\n                  Array.isArray(resource[k]) ? resource[k].includes(v) : resource[k] === v\n                )\n              );\n            }\n          }\n\n          if (params.pagination) {\n            returnData = returnData.slice(\n              (params.pagination.page - 1) * params.pagination.perPage,\n              params.pagination.page * params.pagination.perPage\n            );\n          }\n\n          return { data: returnData, total: json['ldp:contains'].length };\n        } else {\n          /*\n           * ActivityPub collection\n           */\n\n          // If the collection is split amongst several pages, get the first page\n          if (json.first) {\n            const result = await httpClient(json.first);\n            json = result.json;\n          }\n\n          const listProperty = ['as:orderedItems', 'orderedItems', 'as:items', 'items'].find(p => json[p]);\n          if (!listProperty) throw new Error('Unknown list type');\n\n          // TODO fetch several pages depending on params.pagination\n\n          let returnData = json[listProperty].map(item => {\n            item.id = item.id || item['@id'];\n            return item;\n          });\n\n          return { data: returnData, total: json.totalItems };\n        }\n      } else {\n        /*\n         * Do a SPARQL search\n         */\n        const sparqlQuery = buildSparqlQuery({\n          types: resources[resourceId].types,\n          params: { ...params, filter: { ...resources[resourceId].filter, ...params.filter } },\n          dereference: resources[resourceId].dereference,\n          ontologies\n        });\n\n        const { json } = await httpClient(sparqlEndpoint, {\n          method: 'POST',\n          body: sparqlQuery\n        });\n\n        const compactJson = await jsonld.frame(json, {\n          '@context': jsonContext || buildJsonContext(ontologies),\n          '@type': resources[resourceId].types\n        });\n\n        if (Object.keys(compactJson).length === 1) {\n          // If we have only the context, it means there is no match\n          return { data: [], total: 0 };\n        } else if (!compactJson['@graph']) {\n          // If we have several fields but no @graph, there is a single match\n          compactJson.id = compactJson.id || compactJson['@id'];\n          return { data: [compactJson], total: 1 };\n        } else {\n          const returnData = compactJson['@graph']\n            .map(item => {\n              item.id = item.id || item['@id'];\n              return item;\n            })\n            .sort((a, b) => {\n              if (params.sort && a[params.sort.field] && b[params.sort.field]) {\n                if (params.sort.order === 'DESC') {\n                  return a[params.sort.field].localeCompare(b[params.sort.field]);\n                } else {\n                  return b[params.sort.field].localeCompare(a[params.sort.field]);\n                }\n              } else {\n                return true;\n              }\n            })\n            .slice(\n              (params.pagination.page - 1) * params.pagination.perPage,\n              params.pagination.page * params.pagination.perPage\n            );\n\n          return { data: returnData, total: compactJson['@graph'].length };\n        }\n      }\n    },\n    getOne: async (resourceId, params) => {\n      if (!resources[resourceId]) {\n        Error(`Resource ${resourceId} is not mapped in resources file`);\n      }\n      const dataModel = resources[resourceId];\n\n      let { json } = await httpClient(params.id);\n      json.id = json.id || json['@id'];\n      // TODO compact only if remote context is different from local context\n      const compactJson = await jsonld.compact(json, jsonContext || buildJsonContext(ontologies));\n      // transform single value into array concidering forceArray predicates\n      if (dataModel.forceArray) {\n        for (const forceArrayItem of dataModel.forceArray) {\n          if (compactJson[forceArrayItem] && !Array.isArray(compactJson[forceArrayItem])) {\n            compactJson[forceArrayItem] = [compactJson[forceArrayItem]];\n          }\n        }\n      }\n      return { data: compactJson };\n    },\n    getMany: async (resourceId, params) => {\n      let returnData = [];\n\n      for (let id of params.ids) {\n        id = typeof id === 'object' ? id['@id'] : id;\n\n        try {\n          let { json } = await httpClient(id);\n          json.id = json.id || json['@id'];\n          returnData.push(json);\n        } catch (e) {\n          // Do nothing if one resource fails to load\n          // Otherwise no references will be show if only one is missing\n          // See https://github.com/marmelab/react-admin/issues/5190\n        }\n      }\n\n      return { data: returnData };\n    },\n    getManyReference: (resourceId, params) => {\n      throw new Error('getManyReference is not implemented yet');\n    },\n    create: async (resourceId, params) => {\n      if (!resources[resourceId]) Error(`Resource ${resourceId} is not mapped in resources file`);\n\n      const { slugField, containerUri, types } = resources[resourceId];\n      const headers = new Headers();\n\n      if (slugField) {\n        headers.set(\n          'Slug',\n          Array.isArray(slugField) ? slugField.map(f => params.data[f]).join(' ') : params.data[slugField]\n        );\n      }\n\n      // Upload files, if there are any\n      params.data = await uploadAllFiles(params.data);\n\n      const { headers: responseHeaders } = await httpClient(containerUri, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          '@context': jsonContext || buildJsonContext(ontologies),\n          '@type': types,\n          ...params.data\n        })\n      });\n\n      // Retrieve newly-created resource\n      const resourceUri = responseHeaders.get('Location');\n      let { json } = await httpClient(resourceUri);\n      json.id = json.id || json['@id'];\n      return { data: json };\n    },\n    update: async (resourceId, params) => {\n      // Upload files, if there are any\n      params.data = await uploadAllFiles(params.data);\n      await httpClient(params.id, {\n        method: 'PUT',\n        body: JSON.stringify({\n          '@context': jsonContext || buildJsonContext(ontologies),\n          ...params.data\n        })\n      });\n\n      return { data: params.data };\n    },\n\n    updateMany: (resourceId, params) => {\n      throw new Error('updateMany is not implemented yet');\n    },\n    delete: async (resourceId, params) => {\n      await httpClient(params.id, {\n        method: 'DELETE'\n      });\n\n      return { data: { id: params.id } };\n    },\n    deleteMany: (resourceId, params) => {\n      throw new Error('deleteMany is not implemented yet');\n    }\n  };\n};\n\nexport default dataProvider;\n","import { fetchUtils } from 'react-admin';\n\nconst httpClient = (url, options = {}) => {\n  if (!options.headers) options.headers = new Headers();\n\n  switch (options.method) {\n    case 'POST':\n    case 'PATCH':\n    case 'PUT':\n      if (!options.headers.has('Accept')) options.headers.set('Accept', 'application/ld+json');\n      if (!options.headers.has('Content-Type')) options.headers.set('Content-Type', 'application/ld+json');\n      break;\n\n    case 'DELETE':\n      break;\n\n    case 'GET':\n    default:\n      if (!options.headers.has('Accept')) options.headers.set('Accept', 'application/ld+json');\n      break;\n  }\n\n  const token = localStorage.getItem('token');\n  if (token) options.headers.set('Authorization', `Bearer ${token}`);\n\n  return fetchUtils.fetchJson(url, options);\n};\n\nexport default httpClient;\n"],"names":["ImageField","record","source","otherProps","React","RaImageField","ReferenceArrayField","Array","isArray","map","i","id","RaReferenceArrayField","defaultProps","addLabel","ReferenceField","_typeof","RaReferenceField","FilteredArrayField","children","filter","useState","filtered","setFiltered","useEffect","filteredData","r","eq","key","value","includes","newRecord","ArrayField","GroupedArrayField","groupReference","groupLabel","filterProperty","groupComponent","groupVariant","dataProvider","useDataProvider","groups","setGroups","getResources","then","resources","resource","data","getList","containerUri","e","group","index","Box","Typography","variant","align","noWrap","DateTimeInput","props","RaDateTimeInput","format","replace","ReferenceArrayInput","useResourceContext","RaReferenceArrayInput","v","ReferenceInput","RaReferenceInput","useReferenceInputStyles","makeStyles","form","display","input","paddingRight","useHideInputStyles","root","ReificationArrayInput","reificationClass","flexFormClasses","hideInputStyles","ArrayInput","SimpleFormIterator","classes","Children","child","cloneElement","className","TextInput","initialValue","generateSparqlVarName","predicate","split","s","toUpperCase","slice","join","buildSparqlQuery","types","params","pagination","sort","dereference","ontologies","whereQuery","q","length","toLowerCase","Object","keys","forEach","object","startsWith","dereferenceQuery","predicates","queries","flattenedPredicates","reduce","acc","flattenPredicate","accumulator","parent","matches","entries","varName","parentVarName","groupKey","push","construct","values","groupedQueries","where","buildDereferenceQuery","ontology","prefix","url","getPrefixRdf","perPage","page","createSlug","require","buildJsonContext","pattern","isFile","o","rawFile","File","sparqlEndpoint","httpClient","jsonContext","uploadsContainerUri","uploadFile","Error","method","body","headers","Headers","Slug","fileName","name","fileExtension","splitFileName","pop","lang","type","response","status","get","uploadAllFiles","property","hasOwnProperty","resourceId","json","resourceType","returnData","item","some","k","total","first","result","listProperty","find","p","totalItems","sparqlQuery","jsonld","frame","compactJson","a","b","field","order","localeCompare","getOne","dataModel","compact","forceArray","forceArrayItem","getMany","ids","getManyReference","create","slugField","set","f","JSON","stringify","responseHeaders","resourceUri","update","updateMany","deleteMany","options","has","token","localStorage","getItem","fetchUtils","fetchJson"],"mappings":"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"}