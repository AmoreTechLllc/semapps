import e,{useState as t,useMemo as n,useEffect as r,useRef as a,createContext as o,useContext as i,forwardRef as l,useImperativeHandle as c,createElement as u,cloneElement as s,Children as m}from"react";import{getResources as p,AppBar as d,MenuItemLink as f,Layout as h,useGetIdentity as b,Notification as y,TopToolbar as v,ListButton as g,Create as E,ShowButton as C,Edit as w,useResourceDefinition as O,Link as P,Button as x,CreateButton as k,ExportButton as j,RefreshButton as L,List as S,Pagination as N,useListContext as I,EditButton as A,SimpleList as T,linkToRecord as _,useGetList as B,FilterList as R,FilterListItem as F,useTranslate as D,getFieldLabelTranslationArgs as M,ImageField as z,Show as W,sanitizeListRestProps as U,useCreate as H,useNotify as V,ReferenceInput as q,FormWithRedirect as G,TextInput as Z,required as $,SaveButton as X}from"react-admin";import{Grid as J,Button as K,TextField as Q,Select as Y,MenuItem as ee,makeStyles as te,Hidden as ne,ListItemIcon as re,Typography as ae,Tooltip as oe,Collapse as ie,List as le,useMediaQuery as ce,Box as ue,Container as se,ThemeProvider as me,createMuiTheme as pe,Tabs as de,Tab as fe,Card as he,CardActionArea as be,CardMedia as ye,CardContent as ve,CircularProgress as ge,LinearProgress as Ee,Dialog as Ce,DialogTitle as we,DialogContent as Oe,DialogActions as Pe}from"@material-ui/core";import{Form as xe,Field as ke,useForm as je}from"react-final-form";import{useHistory as Le,useLocation as Se,Link as Ne}from"react-router-dom";import{useSelector as Ie,shallowEqual as Ae}from"react-redux";import{useLocation as Te,useHistory as _e}from"react-router";import Be from"@material-ui/icons/ViewList";import Re from"@material-ui/icons/ExpandMore";import{createPortal as Fe}from"react-dom";import De,{DomUtil as Me,LatLngBounds as ze,Map as We,Marker as Ue,Popup as He,TileLayer as Ve}from"leaflet";import"leaflet.markercluster";import{createMuiTheme as qe,ThemeProvider as Ge,makeStyles as Ze}from"@material-ui/core/styles";import $e from"react-markdown";import Xe from"@material-ui/icons/Add";import Je from"@material-ui/icons/Cancel";function Ke(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e){return function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(t){var n=t.input,r=nt(t,["input"]);return e.createElement(Q,Ye({},n,r))},ct=function(t){var n=t.input,r=nt(t,["input"]),a=Ie(p,Ae);return e.createElement(Y,Ye({},n,r),a.filter((function(e){return e.hasList})).map((function(t){return e.createElement(ee,{value:t.name,key:t.name},t.options.label)})))},ut=function(){var t=Le(),n=Se().pathname.match(/^\/([^/]+)/),r=n?n[1]:"Organization";return e.createElement(xe,{onSubmit:function(e){var n=e.filter,r=e.type;n?t.push("/".concat(r,"?filter=").concat(encodeURIComponent('{"q": "'.concat(n,'"}')))):t.push("/".concat(r))},initialValues:{type:r},render:function(t){var n=t.handleSubmit;return e.createElement("form",{onSubmit:n},e.createElement(J,{container:!0,spacing:2},e.createElement(J,{item:!0,xs:5},e.createElement(ke,{name:"filter",component:lt,placeholder:"Rechercher...",fullWidth:!0})),e.createElement(J,{item:!0,xs:5},e.createElement(ke,{name:"type",component:ct,fullWidth:!0})),e.createElement(J,{item:!0,xs:2},e.createElement(K,{variant:"outlined",type:"submit",fullWidth:!0},"Hop"))))}})},st=te({toolbar:{height:56},spacer:{flex:1},searchForm:{flex:2}}),mt=function(t){var n=st();return e.createElement(d,Ye({},t,{classes:tt({toolbar:n.toolbar},t.classes),color:"primary"}),e.createElement("span",{className:n.spacer}),e.createElement(ne,{only:"xs"},e.createElement("span",{className:n.searchForm},e.createElement(ut,null))),e.createElement("span",{className:n.spacer}))},pt=te((function(e){return{icon:{minWidth:e.spacing(5)},sidebarIsOpen:{"& a":{paddingLeft:e.spacing(4),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}},sidebarIsClosed:{"& a":{paddingLeft:e.spacing(2),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}}}})),dt=function(t){var n=t.handleToggle,r=t.sidebarIsOpen,a=t.isOpen,o=t.name,i=t.icon,l=t.children,c=t.dense,u=pt(),s=e.createElement(ee,{dense:c,button:!0,onClick:n},e.createElement(re,{className:u.icon},a?e.createElement(Re,null):i),e.createElement(ae,{variant:"inherit",color:"textSecondary"},o));return e.createElement(e.Fragment,null,r||a?s:e.createElement(oe,{title:o,placement:"right"},s),e.createElement(ie,{in:a,timeout:"auto",unmountOnExit:!0},e.createElement(le,{dense:c,component:"div",disablePadding:!0,className:r?u.sidebarIsOpen:u.sidebarIsClosed},l)))},ft=function(t){var n=t.resource,r=t.onClick,a=t.open;return e.createElement(f,{to:"/".concat(n.name),primaryText:n.options&&n.options.label||n.name,leftIcon:n.icon?e.createElement(n.icon,null):e.createElement(DefaultIcon,null),onClick:r,sidebarIsOpen:a})},ht=te({appFrame:{marginTop:56},title:{position:"absolute",top:80,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bt=function(t){var n=t.appBar,r=t.menu,a=(t.userMenu,t.children),o=nt(t,["appBar","menu","userMenu","children"]),i=ht();return e.createElement(h,Ye({},o,{classes:{appFrame:i.appFrame},appBar:n,menu:r}),e.createElement(ae,{variant:"h4",color:"primary",className:i.title,id:"react-admin-title",component:"h1"}),a)};bt.defaultProps={appBar:mt,menu:function(a){var o=a.onMenuClick,i=a.logout,l=a.dense,c=void 0!==l&&l,u=a.openAll,s=void 0!==u&&u,m=ce((function(e){return e.breakpoints.down("xs")})),d=Ie((function(e){return e.admin.ui.sidebarOpen})),f=Ie(p),h=Te().pathname.match(/^\/([^/]+)/),b=h?h[1]:null,y=rt(t({}),2),v=y[0],g=y[1],E=n((function(){var e=f.reduce((function(e,t){return t.options&&t.options.parent&&e.push(t.options.parent),e}),[]);return f.filter((function(t){return e.includes(t.name)}))}),[f]);return r((function(){var e=f.find((function(e){return e.name===b})),t=E.find((function(t){return t.name===e.options.parent})),n=E.reduce((function(e,n){return e[n.name]=s||t&&n.name===t.name,e}),{});g((function(e){return tt(tt({},n),e)}))}),[E,f,b,s]),e.createElement(ue,{mt:2},E.map((function(t){return e.createElement(dt,{key:t.name,handleToggle:function(){return e=t.name,void g((function(t){return tt(tt({},t),{},Qe({},e,!t[e]))}));var e},isOpen:v[t.name],sidebarIsOpen:d,name:t.options&&t.options.label||t.name,icon:t.icon?e.createElement(t.icon,null):e.createElement(Be,null),dense:c},f.filter((function(e){return e.hasList&&e.options.parent===t.name})).map((function(t){return e.createElement(ft,{key:t.name,resource:t,onClick:o,open:d})})))})),f.filter((function(e){return e.hasList&&(!e.options||!e.options.parent)})).map((function(t){return e.createElement(ft,{key:t.name,resource:t,onClick:o,open:d})})),m&&i)}};var yt=te((function(e){return{header:{position:"relative",height:65},logo:Qe({position:"absolute",top:-15,height:110,width:110},e.breakpoints.down("xs"),{position:"relative",top:0,width:65,height:65})}})),vt=function(t){var n=t.userMenu,r=t.logout,a=yt(),o=b().identity;return e.createElement(ue,{bgcolor:"primary.main"},e.createElement(se,{maxWidth:"lg",className:a.header},e.createElement(J,{container:!0},e.createElement(J,{item:!0,xs:12,sm:n?3:6},e.createElement(Ne,{to:"/"},e.createElement("img",{src:process.env.PUBLIC_URL+"/logo192.png",alt:"SemApps",className:a.logo}))),e.createElement(ne,{xsDown:!0},e.createElement(J,{item:!0,sm:6},e.createElement(ue,{pt:2},e.createElement(ut,null)))),n&&e.createElement(J,{item:!0,sm:3,align:"right"},e.createElement(ue,{pt:o&&""!==o.id?2:1},e.cloneElement(n,{logout:r}))))))},gt=function(){var e=Se().pathname;return r((function(){window.scrollTo(0,0)}),[e]),null},Et=function(t){var n=t.appBar,r=t.title,a=t.open,o=t.logout,i=t.theme,l=t.children,c=ce(i.breakpoints.down("xs"));return e.createElement(me,{theme:i},e.createElement(gt,null),e.createElement(n,{title:r,open:a,logout:o}),e.createElement(se,{maxWidth:"lg",disableGutters:c},e.createElement(ue,{mb:{xs:0,sm:5}},l)),e.createElement(y,null))};Et.defaultProps={appBar:vt};var Ct=pe(),wt=pe({palette:{primary:{main:"#28ccfb"},secondary:{main:"#bcef5b"},grey:{main:"#e0e0e0"}},typography:{details:{fontSize:8}},overrides:{RaChipField:{chip:{marginLeft:0,marginTop:0,marginRight:8,marginBottom:8}},RaShow:{card:Qe({padding:25},Ct.breakpoints.down("xs"),{padding:15})},RaList:{content:Qe({padding:25},Ct.breakpoints.down("xs"),{padding:15})},RaListToolbar:{toolbar:Qe({},Ct.breakpoints.down("xs"),{height:0,minHeight:0})},RaSingleFieldList:{root:{marginTop:0,marginBottom:0}},MuiTab:{labelIcon:{paddingTop:0}}}}),Ot=function(t){var n=t.basePath,r=t.className,a=t.data,o=t.hasList,i=nt(t,["basePath","className","data","hasList"]);return e.createElement(v,Ye({className:r},i),o&&e.createElement(g,{basePath:n,record:a}))},Pt=function(t){return e.createElement(E,Ye({actions:e.createElement(Ot,null),redirect:"show"},t))},xt=function(t){var n=t.basePath,r=t.className,a=t.data,o=t.hasList,i=t.hasShow,l=nt(t,["basePath","className","data","hasList","hasShow"]);return e.createElement(v,Ye({className:r},l),o&&e.createElement(g,{basePath:n,record:a}),i&&e.createElement(C,{basePath:n,record:a}))},kt=function(t){return e.createElement(w,Ye({actions:e.createElement(xt,null)},t))},jt=function(t){var n=t.bulkActions,r=t.basePath,a=t.currentSort,o=t.displayedFilters,i=t.exporter,l=t.filters,c=t.filterValues,u=t.onUnselectItems,s=t.resource,m=t.selectedIds,p=t.showFilter,d=t.total,f=t.views,h=t.currentView,b=t.setView,y=ce((function(e){return e.breakpoints.down("xs")})),g=O({}),E=new URLSearchParams(Te().search);return e.createElement(v,null,f&&Object.entries(f).filter((function(e){return rt(e,1)[0]!==h})).map((function(t){var n=rt(t,2),r=n[0],a=n[1];return E.set("view",r),E.set("page",1),E.set("perPage",a.perPage),a.sort&&(E.set("sort",a.sort.field),E.set("order",a.sort.order)),e.createElement(P,{key:r,to:"?"+E.toString()},e.createElement(x,{onClick:function(){return b(r)},label:a.label},e.createElement(a.icon)))})),n&&e.cloneElement(n,{basePath:r,filterValues:c,resource:s,selectedIds:m,onUnselectItems:u}),l&&e.cloneElement(l,{resource:s,showFilter:p,displayedFilters:o,filterValues:c,context:"button"}),g.hasCreate&&e.createElement(k,{basePath:r}),!y&&e.createElement(j,{disabled:0===d,resource:s,sort:a,filter:c,exporter:i}),!y&&e.createElement(L,null))},Lt=function(t){return e.createElement(N,Ye({rowsPerPageOptions:[25,50,100]},t))},St=function(t){var n=t.children,r=nt(t,["children"]);return e.createElement(S,Ye({actions:e.createElement(jt,null),sort:{field:"pair:label",order:"DESC"},pagination:e.createElement(Lt,null),perPage:50},r),n)},Nt=function(n){n.children;var r=n.views,a=nt(n,["children","views"]),o=new URLSearchParams(Te().search),i=o.has("view")?o.get("view"):Object.keys(r)[0],l=rt(t(i),2),c=l[0],u=l[1];return e.createElement(S,Ye({actions:e.createElement(jt,{views:r,currentView:c,setView:u}),pagination:r[c].pagination,perPage:r[i].perPage,sort:r[i].sort},a),r[c].list)};function It(e,t){const n=a(t);r((function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t}),[e,t])}const At=o(null),Tt=At.Provider;function _t(){const e=i(At);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Bt(t){function n(n,r){const{instance:a,context:o}=t(n).current;return c(r,()=>a),null==n.children?null:e.createElement(Tt,{value:o},n.children)}return l(n)}function Rt(e){function n(n,a){const[o,i]=t(!1),{instance:l}=e(n,i).current;c(a,()=>l),r((function(){o&&l.update()}),[l,o,n.children]);const u=l._contentNode;return u?Fe(n.children,u):null}return l(n)}function Ft(e){function t(t,n){const{instance:r}=e(t).current;return c(n,()=>r),null}return l(t)}function Dt(e){return function(t){const n=_t(),o=e(t,n),{instance:i}=o.current,l=a(t.position),{position:c}=t;return r((function(){return i.addTo(n.map),function(){i.remove()}}),[n.map,i]),r((function(){null!=c&&c!==l.current&&(i.setPosition(c),l.current=c)}),[i,c]),o}}function Mt(e,t){const n=a();r((function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}}),[e,t])}function zt(e,t){var n;const r=null!=(n=e.pane)?n:t.pane;return r?{...e,pane:r}:e}function Wt(e,t){return function(n,r){const a=_t(),o=e(zt(n,a),a);return It(a.map,n.attribution),Mt(o.current,n.eventHandlers),t(o.current,a,n,r),o}}function Ut(e){return e.split(" ").filter(Boolean)}function Ht(e,t){Ut(t).forEach(t=>{Me.addClass(e,t)})}function Vt(e,t){Ut(t).forEach(t=>{Me.removeClass(e,t)})}function qt(e,t){return null==t?function(t,n){return a(e(t,n))}:function(n,o){const i=a(e(n,o)),l=a(n),{instance:c}=i.current;return r((function(){l.current!==n&&(t(c,n,l.current),l.current=n)}),[c,n,o]),i}}function Gt(e,t){r((function(){var n;const r=null!=(n=t.layerContainer)?n:t.map;return r.addLayer(e.instance),function(){r.removeLayer(e.instance)}}),[t,e])}function Zt(e){return function(t){const n=_t(),r=e(zt(t,n),n);return It(n.map,t.attribution),Mt(r.current,t.eventHandlers),Gt(r.current,n),r}}function $t(e,t){const n=a();r((function(){if(t.pathOptions!==n.current){var r;const a=null!=(r=t.pathOptions)?r:{};e.instance.setStyle(a),n.current=a}}),[e,t])}function Xt(e){return function(t){const n=_t(),r=e(zt(t,n),n);return Mt(r.current,t.eventHandlers),Gt(r.current,n),$t(r.current,t),r}}function Jt(e,t){return Bt(Zt(qt(e,t)))}function Kt(e,t){return Rt(Wt(qt(e),t))}function Qt(e,t){return Ft(Zt(qt(e,t)))}function Yt(e,t,n){const{opacity:r,zIndex:a}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=a&&a!==n.zIndex&&e.setZIndex(a)}var en=Object.freeze({__proto__:null,useAttribution:It,updateCircle:function(e,t,n){t.center!==n.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==n.radius&&e.setRadius(t.radius)},createContainerComponent:Bt,createDivOverlayComponent:Rt,createLeafComponent:Ft,CONTEXT_VERSION:1,LeafletContext:At,LeafletProvider:Tt,useLeafletContext:_t,createControlHook:Dt,createDivOverlayHook:Wt,addClassName:Ht,removeClassName:Vt,updateClassName:function(e,t,n){null!=e&&n!==t&&(null!=t&&t.length>0&&Vt(e,t),null!=n&&n.length>0&&Ht(e,n))},createElementHook:qt,useEventHandlers:Mt,createControlComponent:function(e){return Ft(Dt(qt((function(t,n){return{instance:e(t),context:n}}))))},createLayerComponent:Jt,createOverlayComponent:Kt,createPathComponent:function(e,t){return Bt(Xt(qt(e,t)))},createTileLayerComponent:Qt,updateGridLayer:Yt,createLayerHook:Zt,useLayerLifecycle:Gt,updateMediaOverlay:function(e,t,n){t.bounds instanceof ze&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)},withPane:zt,createPathHook:Xt,usePathOptions:$t});function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nn({children:o,className:i,id:l,placeholder:c,style:u,whenCreated:s,...m}){const p=a(null),d=function(e,n){const[a,o]=t(null);return r(()=>{if(null!==e.current&&null===a){const t=new We(e.current,n);null!=n.center&&null!=n.zoom?t.setView(n.center,n.zoom):null!=n.bounds&&t.fitBounds(n.bounds,n.boundsOptions),null!=n.whenReady&&t.whenReady(n.whenReady),o(t)}},[e,a,n]),a}(p,m),f=a(!1);r(()=>{null!=d&&!1===f.current&&null!=s&&(f.current=!0,s(d))},[d,s]);const[h]=t({className:i,id:l,style:u}),b=n(()=>d?{__version:1,map:d}:null,[d]),y=b?e.createElement(Tt,{value:b},o):null!=c?c:null;return e.createElement("div",tn({},h,{ref:p}),y)}const rn=Jt((function({position:e,...t},n){const r=new Ue(e,t);return{instance:r,context:{...n,overlayContainer:r}}}),(function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})),an=Kt((function(e,t){return{instance:new He(e,t.overlayContainer),context:t}}),(function(e,t,n,a){const{onClose:o,onOpen:i,position:l}=n;r((function(){const{instance:n}=e;function r(e){e.popup===n&&(n.update(),a(!0),null==i||i())}function c(e){e.popup===n&&(a(!1),null==o||o())}return t.map.on({popupopen:r,popupclose:c}),null==t.overlayContainer?(null!=l&&n.setLatLng(l),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:r,popupclose:c}),null==t.overlayContainer?t.map.removeLayer(n):t.overlayContainer.unbindPopup()}}),[e,t,a,o,i,l])})),on=Qt((function({url:e,...t},n){return{instance:new Ve(e,zt(t,n)),context:n}}),Yt);function ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cn(e,t){return e(t={exports:{}},t.exports),t.exports}var un=ln(cn((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=De)&&n.__esModule?n:{default:n};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=(0,en.createPathComponent)((function(e,t){e.children;var n=u(e,["children"]),a={},i={};Object.entries(n).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];return n.startsWith("on")?i[n]=r:a[n]=r}));var c=new r.default.markerClusterGroup(a);return Object.entries(i).forEach((function(e){var t=l(e,2),n=t[0],r=t[1],a="cluster".concat(n.substring(2).toLowerCase());c.on(a,r)})),{instance:c,context:o(o({},t),{},{layerContainer:c})}}));t.default=s}))),sn=function(t){var n=t.latitude,r=t.longitude,a=t.label,o=t.description,i=t.popupContent,l=nt(t,["latitude","longitude","label","description","popupContent"]),c=I(),u=c.ids,s=c.data,m=c.basePath;return e.createElement(nn,Ye({style:{height:700}},l),e.createElement(on,{attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.createElement(un,{showCoverageOnHover:!1},u.map((function(t){var l=tt(tt({},s[t]),{},{latitude:n&&n(s[t]),longitude:r&&r(s[t]),label:a&&a(s[t]),description:o&&o(s[t])});return l.latitude&&l.longitude?e.createElement(rn,{key:t,position:[l.latitude,l.longitude]},e.createElement(an,null,e.createElement(i,{record:l,basePath:m}))):null}))))};sn.defaultProps={height:700,center:[47,2.213749],zoom:6,scrollWheelZoom:!1,popupContent:function(t){var n=t.record,r=t.basePath,a=O({});return e.createElement(e.Fragment,null,n.label&&e.createElement(ae,{variant:"h5"},n.label),n.description&&e.createElement(ae,null,n.description.length>150?n.description.substring(0,150)+"...":n.description),a.hasShow&&e.createElement(C,{basePath:r,record:n}),a.hasEdit&&e.createElement(A,{basePath:r,record:n}))}};var mn=te((function(e){return{tab:{minWidth:55}}})),pn=function(){var t=_e(),n=mn(),r=Te().pathname.match(/^\/([^/]+)/),a=r?r[1]:null,o=Ie(p,Ae),i=ce((function(e){return e.breakpoints.down("xs")}));return e.createElement(de,{value:a,onChange:function(e,n){return t.push("/"+n)},indicatorColor:"primary",textColor:"primary",scrollButtons:"auto"},o.filter((function(e){return e.hasList})).map((function(t){return e.createElement(fe,{key:t.name,icon:e.createElement(t.icon),label:i?void 0:t.options.label,value:t.name,className:n.tab})})))},dn=qe({overrides:{MuiListItem:{root:{padding:15,paddingBottom:15,paddingTop:15,marginBottom:10,borderStyle:"solid",borderColor:"#e0e0e0",borderWidth:1}}}}),fn=function(t){return e.createElement(Ge,{theme:dn},e.createElement(T,t))},hn=ln(cn((function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(r=e)&&r.__esModule?r:{default:r};var c={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.reCalculateColumnCount=n.reCalculateColumnCount.bind(n),n.reCalculateColumnCountDebounce=n.reCalculateColumnCountDebounce.bind(n);var r=void 0;return r=n.props.breakpointCols&&n.props.breakpointCols.default?n.props.breakpointCols.default:parseInt(n.props.breakpointCols)||2,n.state={columnCount:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"componentDidUpdate",value:function(){this.reCalculateColumnCount()}},{key:"componentWillUnmount",value:function(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"reCalculateColumnCountDebounce",value:function(){var e=this;window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((function(){e.reCalculateColumnCount()}))):this.reCalculateColumnCount()}},{key:"reCalculateColumnCount",value:function(){var e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!==(void 0===t?"undefined":o(t))&&(t={default:parseInt(t)||2});var n=1/0,r=t.default||2;for(var a in t){var i=parseInt(a);i>0&&e<=i&&i<n&&(n=i,r=t[a])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}},{key:"itemsInColumns",value:function(){for(var e=this.state.columnCount,t=new Array(e),n=[].concat(this.props.children||[]),r=0;r<n.length;r++){var a=r%e;t[a]||(t[a]=[]),t[a].push(n[r])}return t}},{key:"renderColumns",value:function(){var e=this.props,t=e.column,n=e.columnAttrs,r=void 0===n?{}:n,o=e.columnClassName,i=this.itemsInColumns(),c=100/i.length+"%",u=o;"string"!=typeof u&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===u&&(u="my-masonry-grid_column"));var s=a({},t,r,{style:a({},r.style,{width:c}),className:u});return i.map((function(e,t){return l.default.createElement("div",a({},s,{key:t}),e)}))}},{key:"logDeprecated",value:function(e){console.error("[Masonry]",e)}},{key:"render",value:function(){var e=this.props,t=(e.children,e.breakpointCols,e.columnClassName,e.columnAttrs,e.column,e.className),n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),r=t;return"string"!=typeof t&&(this.logDeprecated('The property "className" requires a string'),void 0===t&&(r="my-masonry-grid")),l.default.createElement("div",a({},n,{className:r}),this.renderColumns())}}]),t}(l.default.Component);u.defaultProps=c,n.default=u}))),bn=te((function(){return{grid:{display:"flex",marginLeft:-20,width:"auto"},column:{paddingLeft:20,backgroundClip:"padding-box"},card:{marginBottom:20},media:{height:0,paddingTop:"56.25%"}}})),yn=function(t){var n=t.image,r=t.content,a=t.breakpointCols,o=t.linkType,i=bn(),l=I(),c=l.ids,u=l.data,s=l.basePath;return e.createElement(hn,{breakpointCols:a,className:i.grid,columnClassName:i.column},c.map((function(t){var a="function"==typeof n?n(u[t]):n;return e.createElement(he,{key:t,className:i.card},e.createElement(P,{to:_(s,t)+"/"+o},e.createElement(be,null,a&&e.createElement(ye,{className:i.media,image:a}),r&&e.createElement(ve,null,r(u[t])))))})))};yn.defaultProps={breakpointCols:{default:3,900:2,450:1},linkType:"edit"};var vn=function(t){var n=t.reference,r=t.source,a=t.limit,o=t.label,i=t.icon,l=B(n,{page:1,perPage:a},{},{}),c=l.data,u=l.ids,s=Ie(p,Ae).filter((function(e){return(null==e?void 0:e.name)===n}))[0];return e.createElement(R,{label:o||s.options.label,icon:i||e.createElement(s.icon)},u.map((function(t){return e.createElement(F,{key:t,label:c[t]["pair:label"],value:Qe({},r,t)})})))};vn.defaultProps={limit:20};var gn=te((function(){return{rightLabel:{color:"grey",textAlign:"right",borderBottom:"1px dashed #c0c0c0",paddingBottom:10,marginBottom:10}}})),En=function(t){var n=t.label,r=t.children,a=t.record,o=t.resource,i=t.source,l=t.basePath,c=gn(),u=D();return a[i]?e.createElement(ue,{mb:4},e.createElement(ue,{className:c.rightLabel},u.apply(void 0,at(M({label:n,resource:o,source:i})))),e.createElement(ue,{m:0},e.cloneElement(r,{record:a,resource:o,basePath:l}))):null},Cn=function(t){var n=t.basePath,r=t.children,a=t.record,o=t.resource,i=t.showLabel,l=nt(t,["basePath","children","record","resource","showLabel"]);return e.createElement(J,Ye({item:!0},l),e.Children.map(r,(function(t){return t&&e.isValidElement(t)?e.createElement("div",{key:t.props.source},t.props.addLabel&&i?e.createElement(En,{record:a,resource:o,basePath:n,label:t.props.label,source:t.props.source,disabled:!1},t):"string"==typeof t.type?t:e.cloneElement(t,{record:a,resource:o,basePath:n})):null})))},wn=te((function(){return{root:{flexGrow:1}}})),On=function(t){var n=t.basePath,r=t.children,a=t.record,o=t.resource,i=wn();return e.createElement("div",{className:i.root},e.createElement(J,{container:!0,spacing:5},e.Children.map(r,(function(t){return t&&e.isValidElement(t)?e.cloneElement(t,{resource:o,record:a,basePath:n}):null}))))},Pn=function(e){return e.stopPropagation()},xn=function(){},kn=function(e){var t=e.children,n=e.xs,r=e.linkType,a=I(),o=a.ids,i=a.data,l=a.basePath;return u(J,{container:!0,spacing:3},o.map((function(e){return u(J,{item:!0,xs:n,key:e},u(Ne,{to:_(l,e,r),onClick:Pn},s(m.only(t),{record:i[e],basePath:l,onClick:xn})))})))};kn.defaultProps={xs:6,linkType:"edit"};var jn=te((function(){return{line:{borderBottom:"1px solid #e0e0e0",marginTop:-6,marginBottom:7}}})),Ln=function(t){var n=t.basePath,r=t.children,a=t.record,o=t.resource,i=jn(),l=D();return e.createElement(ue,null,e.Children.map(r,(function(t){return t&&a[t.props.source]&&e.isValidElement(t)?e.createElement("div",{key:t.props.source},t.props.addLabel?e.createElement(J,{container:!0,spacing:3,className:i.line},e.createElement(J,{item:!0,xs:3},e.createElement(ae,{color:"textSecondary",align:"right",variant:"body2"},l.apply(void 0,at(M({label:t.props.label,resource:o,source:t.props.source}))))),e.createElement(J,{item:!0,xs:9},e.createElement(ae,{variant:"body2"},e.cloneElement(t,{record:a,resource:o,basePath:n})))):"string"==typeof t.type?t:e.cloneElement(t,{record:a,resource:o,basePath:n})):null})))},Sn=te((function(){return{loader:{width:"100%",backgroundColor:"#e0e0e0",paddingTop:100,paddingBottom:100},image:{width:"100%",maxHeight:"none"}}})),Nn=function(t){var n=t.record,r=t.source,a=t.defaultImage,o=nt(t,["record","source","defaultImage"]),i=Sn();if(n[r]){if(n[r].rawFile instanceof File)return e.createElement(ue,{align:"center",className:i.loader},e.createElement(ge,null))}else n[r]=a;return e.createElement(z,Ye({record:n,source:r,classes:{image:i.image}},o))},In=te((function(){return{root:{flexGrow:1}}})),An=function(t){var n=t.basePath,r=t.children,a=t.record,o=t.resource,i=t.image,l=t.defaultImage,c=In();return e.createElement("div",{className:c.root},e.createElement(ae,{variant:"h3",color:"primary",component:"h1",id:"react-admin-title"}),e.createElement(J,{container:!0,spacing:5},e.createElement(J,{item:!0,xs:12,sm:5},e.createElement(Nn,{record:a,source:i,defaultImage:l})),e.createElement(J,{item:!0,xs:12,sm:7},e.createElement(Ln,{record:a,resource:o,basePath:n},r))))};An.defaultProps={defaultImage:process.env.PUBLIC_URL+"/logo192.png"};var Tn=function(t){var n=t.basePath,r=t.className,a=t.data,o=t.hasList,i=t.hasEdit,l=nt(t,["basePath","className","data","hasList","hasEdit"]);return e.createElement(v,Ye({className:r},l),o&&e.createElement(g,{basePath:n,record:a}),i&&e.createElement(A,{basePath:n,record:a}))},_n=function(t){return e.createElement(W,Ye({actions:e.createElement(Tn,null)},t))},Bn=te((function(){return{parent:{position:"relative"},image:{width:"100%",borderRadius:"50%"},child:{position:"absolute",bottom:0,left:0,right:0,paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6},caption:{color:"black",fontSize:13}}})),Rn=function(t){var n=t.record,r=Bn(),a=n?n["pair:firstName"]+" "+n["pair:lastName"]:"";return e.createElement(ue,{className:r.parent},e.createElement("img",{src:n&&n.image||process.env.PUBLIC_URL+"/unknown-user.png",className:r.image,alt:a}),e.createElement(ue,{bgcolor:"secondary.main",className:r.child,borderRadius:7},e.createElement(ae,{align:"center",className:r.caption,noWrap:!0},a)))},Fn=function(t){var n=t.source,r=t.record;return r&&r[n]?e.createElement($e,{source:r[n]}):null},Dn=cn((function(e){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&e.push(i)}else if("object"===o)for(var l in a)t.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),Mn=Ze((function(e){return{root:{display:"flex",flexWrap:"wrap"},link:{}}})),zn=function(e){return e.stopPropagation()},Wn=function(){},Un=function(e){e.classes;var t=e.className,n=e.children,r=e.linkType,a=void 0===r?"edit":r,o=e.separator,i=void 0===o?",":o,l=nt(e,["classes","className","children","linkType","separator"]),c=I(e),p=c.ids,d=c.data,f=c.loaded,h=c.resource,b=c.basePath,y=Mn(e);return!1===f?u(Ee,null):u("div",Ye({className:Dn(y.root,t)},U(l)),p.map((function(e,t){var r=!!a&&_(b,e,a);return r?u("span",{key:e},u(P,{classes:y.link,to:r,onClick:zn},s(m.only(n),{record:d[e],resource:h,basePath:b,onClick:Wn})),t<p.length-1&&i+" "):s(m.only(n),{key:e,record:d[e],resource:h,basePath:b})})))},Hn=te({root:{display:"flex",alignItems:"center"}}),Vn=function(n){var r=n.label,a=n.reference,o=n.source,i=n.children,l=Hn(),c=rt(t(!1),2),u=c[0],s=c[1],m=rt(H(a),2),p=m[0],d=m[1].loading,f=D(),h=V(),b=je(),y=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p({payload:{data:t}},{onSuccess:function(e){var t=e.data;s(!1),b.change(o,t["@id"])},onFailure:function(e){var t=e.error;h(t.message,"error")}});case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ke(o,r,a,i,l,"next",e)}function l(e){Ke(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return e.createElement("div",{className:l.root},e.createElement(q,{label:r,reference:a,source:o},i),e.createElement(x,{onClick:function(){return s(!0)},label:"ra.action.create"},e.createElement(Xe,null)),e.createElement(Ce,{fullWidth:!0,open:u,onClose:function(){return s(!1)}},e.createElement(we,null,f("ra.action.create")),e.createElement(G,{resource:a,save:y,render:function(t){var n=t.handleSubmitWithRedirect,r=t.pristine,a=t.saving;return e.createElement(e.Fragment,null,e.createElement(Oe,null,e.createElement(Z,{label:"Titre",source:"pair:label",validate:$(),fullWidth:!0})),e.createElement(Pe,null,e.createElement(x,{label:"ra.action.cancel",onClick:function(){return s(!1)},disabled:d},e.createElement(Je,null)),e.createElement(X,{handleSubmitWithRedirect:n,pristine:r,saving:a,disabled:d})))}})))};export{mt as AppBar,Cn as Column,On as ColumnShowLayout,Pt as Create,Ot as CreateActions,kt as Edit,xt as EditActions,kn as GridList,An as Hero,bt as Layout,St as List,jt as ListActions,sn as MapList,Fn as MarkdownField,yn as MasonryList,Nt as MultiViewsList,vn as ReferenceFilter,Vn as ReferenceQuickCreateInput,Un as SeparatedListField,_n as Show,Tn as ShowActions,vt as SimpleAppBar,Et as SimpleLayout,fn as SimpleList,pn as TabsMenu,Rn as UserIcon,wt as theme};
