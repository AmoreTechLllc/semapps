{"version":3,"file":"index.es.js","sources":["../src/ActivitiesList.js"],"sourcesContent":["import React from 'react';\nimport { useQueryWithStore, ListContextProvider, LinearProgress } from 'react-admin';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  progress: { marginTop: theme.spacing(2) }\n}));\n\nconst ActivitiesList = ({ children, source, record = {} }) => {\n  if (React.Children.count(children) !== 1) {\n    throw new Error('<ActivitiesList> only accepts a single child');\n  }\n\n  const classes = useStyles();\n\n  const { data, loaded, loading, total } = useQueryWithStore({\n    type: 'getList',\n    resource: 'Activity',\n    payload: { id: record[source] }\n  });\n\n  if (!loaded) {\n    return <LinearProgress className={classes.progress} />;\n  } else if (data.length === 0) {\n    return 'Aucune activitÃ© pour le moment.';\n  }\n\n  const notes = data\n    .filter(activity => activity.type === 'Create')\n    .reduce((o, activity) => ({ ...o, [activity.object.id]: activity.object }), {});\n\n  return (\n    <ListContextProvider\n      value={{\n        basePath: '/Note',\n        currentSort: { field: 'id', order: 'ASC' },\n        data: notes,\n        // defaultTitle: null,\n        // displayedFilters: null,\n        // filterValues: null,\n        // hasCreate: null,\n        // hideFilter: null,\n        ids: Object.keys(notes),\n        loaded,\n        loading,\n        // onSelect: null,\n        // onToggleItem: null,\n        // onUnselectItems: null,\n        page: 1,\n        perPage: 10,\n        resource: 'Note',\n        // selectedIds: null,\n        // setFilters: null,\n        // setPage: null,\n        // setPerPage: null,\n        // setSort: null,\n        // showFilter: null,\n        total\n      }}\n    >\n      {children}\n    </ListContextProvider>\n  );\n};\n\nActivitiesList.defaultProps = {\n  addLabel: true\n};\n\nexport default ActivitiesList;\n"],"names":["useStyles","makeStyles","theme","progress","marginTop","spacing","ActivitiesList","children","source","record","React","Children","count","Error","classes","useQueryWithStore","type","resource","payload","id","data","loaded","loading","total","LinearProgress","className","length","notes","filter","activity","reduce","o","object","ListContextProvider","value","basePath","currentSort","field","order","ids","Object","keys","page","perPage","defaultProps","addLabel"],"mappings":"w1BAIA,IAAMA,EAAYC,GAAW,SAAAC,SAAU,CACrCC,SAAU,CAAEC,UAAWF,EAAMG,QAAQ,QAGjCC,EAAiB,gBAAGC,IAAAA,SAAUC,IAAAA,WAAQC,OAAAA,aAAS,QACZ,IAAnCC,EAAMC,SAASC,MAAML,SACjB,IAAIM,MAAM,oDAGZC,EAAUd,MAEyBe,EAAkB,CACzDC,KAAM,UACNC,SAAU,WACVC,QAAS,CAAEC,GAAIV,EAAOD,MAHhBY,IAAAA,KAAMC,IAAAA,OAAQC,IAAAA,QAASC,IAAAA,UAM1BF,SACIX,gBAACc,GAAeC,UAAWX,EAAQX,WACrC,GAAoB,IAAhBiB,EAAKM,aACP,sCAGHC,EAAQP,EACXQ,QAAO,SAAAC,SAA8B,WAAlBA,EAASb,QAC5Bc,QAAO,SAACC,EAAGF,iBAAmBE,WAAIF,EAASG,OAAOb,GAAKU,EAASG,WAAW,WAG5EtB,gBAACuB,GACCC,MAAO,CACLC,SAAU,QACVC,YAAa,CAAEC,MAAO,KAAMC,MAAO,OACnClB,KAAMO,EAMNY,IAAKC,OAAOC,KAAKd,GACjBN,OAAAA,EACAC,QAAAA,EAIAoB,KAAM,EACNC,QAAS,GACT1B,SAAU,OAOVM,MAAAA,IAGDhB,IAKPD,EAAesC,aAAe,CAC5BC,UAAU"}